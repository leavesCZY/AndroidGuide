> å…¬ä¼—å·ï¼š[å­—èŠ‚æ•°ç»„](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/adbc507fc3704fd8955aae739a433db2~tplv-k3u1fbpfcp-zoom-1.image)
>
> å¸Œæœ›å¯¹ä½ æœ‰æ‰€å¸®åŠ© ğŸ¤£ğŸ¤£

å¼€å¤´å…ˆè¯´ä¸€ä¸‹ï¼Œæˆ‘ä¸æ˜¯æ ‡é¢˜å…šï¼Œæœ¬æ•™ç¨‹çœŸçš„æœ‰ä¸¤ä¸‡å…­åƒå­—ï¼Œä»¥å‰æˆ‘ä¹Ÿæ›¾å†™è¿‡ Kotlin çš„å…¥é—¨æ•™ç¨‹ï¼Œä½†ç”±äºéš”å¾—æ¯”è¾ƒä¹…äº†ï¼Œæ‰€ä»¥å°±å¯¹åŸæœ‰æ•™ç¨‹è¿›è¡Œäº†ä¿®æ­£ï¼Œå¹¶ä¸”è¡¥å……äº† Kotlin æ–°ç‰ˆæœ¬çš„ä¸€äº›æ–°ç‰¹æ€§ï¼Œå¸Œæœ›å¯¹ä½ æœ‰æ‰€å¸®åŠ© ğŸ¤£ğŸ¤£

# ä¸€ã€Hello World

æŒ‰ç…§å›½é™…æƒ¯ä¾‹ï¼Œå­¦ä¹ ä¸€é—¨æ–°çš„è¯­è¨€é€šå¸¸éƒ½æ˜¯è¦ä»æ‰“å° Hello World å¼€å§‹çš„

```kotlin
package main

fun main() {
    val msg: String = "Hello World"
    println(msg)
}
```

ä»è¿™ä¸ªç®€å•çš„å‡½æ•°å°±å¯ä»¥åˆ—å‡º kotlin å’Œ Java çš„å‡ ä¸ªä¸åŒç‚¹

1. å‡½æ•°å¯ä»¥å®šä¹‰åœ¨æ–‡ä»¶çš„æœ€å¤–å±‚ï¼Œä¸éœ€è¦æŠŠå®ƒæ”¾åœ¨ç±»ä¸­
2. ç”¨å…³é”®å­— **fun** æ¥å£°æ˜ä¸€ä¸ªå‡½æ•°
3. å¯ä»¥çœç•¥ `main` æ–¹æ³•çš„å‚æ•°
4. å‚æ•°ç±»å‹å†™åœ¨å˜é‡åä¹‹åï¼Œè¿™æœ‰åŠ©äºåœ¨ç±»å‹è‡ªåŠ¨æ¨å¯¼æ—¶çœç•¥ç±»å‹å£°æ˜
5. ä½¿ç”¨ `println` ä»£æ›¿äº† `System.out.println` ï¼Œè¿™æ˜¯ kotlin æ ‡å‡†åº“æä¾›çš„å¯¹ Java æ ‡å‡†åº“å‡½æ•°çš„ç®€æ˜“å°è£…
6. å¯ä»¥çœç•¥ä»£ç ç»“å°¾çš„åˆ†å·

# äºŒã€Package

kotlin æ–‡ä»¶éƒ½ä»¥ **package** å¼€å¤´ï¼ŒåŒä¸ªæ–‡ä»¶ä¸­å®šä¹‰çš„æ‰€æœ‰å£°æ˜ï¼ˆç±»ã€å‡½æ•°å’Œå±æ€§ï¼‰éƒ½ä¼šè¢«æ”¾åˆ°è¿™ä¸ªåŒ…ä¸­ã€‚åŒä¸ªåŒ…ä¸­çš„å£°æ˜å¯ä»¥ç›´æ¥ä½¿ç”¨ï¼Œä¸åŒåŒ…çš„å£°æ˜éœ€è¦å¯¼å…¥åä½¿ç”¨

åŒ…çš„å£°æ˜è¦æ”¾åœ¨æ–‡ä»¶é¡¶éƒ¨ï¼Œimport è¯­å¥ç´§éšå…¶å

```kotlin
package base

import java.text.SimpleDateFormat
import java.util.*
```

kotlin ä¸åŒºåˆ†å¯¼å…¥çš„æ˜¯ç±»è¿˜æ˜¯å‡½æ•°ï¼Œå¯ä»¥ä½¿ç”¨ `import` å…³é”®å­—å¯¼å…¥ä»»ä½•ç§ç±»çš„å£°æ˜ã€‚æ­¤å¤–ä¹Ÿå¯ä»¥åœ¨åŒ…åç§°ååŠ ä¸Š **.*** æ¥å¯¼å…¥åŒ…ä¸­å®šä¹‰çš„æ‰€æœ‰å£°æ˜ï¼Œä»è€Œè®©åŒ…ä¸­å®šä¹‰çš„ç±»ã€é¡¶å±‚å‡½æ•°ã€å’Œå±æ€§éƒ½å¯ä»¥ç›´æ¥å¼•ç”¨

```kotlin
package learn.package2

val index = 10

fun Test(status: Boolean) = println(status)

class Point(val x: Int, val y: Int) {

    val isEquals1: Boolean
        get() {
            return x == y
        }

    val isEquals2
        get() = x == y

    var isEquals3 = false
        get() = x > y
        set(value) {
            field = !value
        }

}
```

```kotlin
package learn.package1

import learn.package2.Point
import learn.package2.Test
import learn.package2.index

fun main() {
    val point = Point(10, index)
    Test(true)
}
```

Java è¯­è¨€è§„å®šç±»è¦æ”¾åˆ°å’ŒåŒ…ç»“æ„**åŒ¹é…**çš„æ–‡ä»¶å¤¹ç›®å½•ç»“æ„ä¸­ï¼Œä¸”æ–‡ä»¶åå¿…é¡»å’Œç±»åç›¸åŒã€‚è€Œ kotlin å…è®¸æŠŠå¤šä¸ªç±»æ”¾åˆ°åŒä¸€ä¸ªæ–‡ä»¶ä¸­ï¼Œæ–‡ä»¶åä¹Ÿå¯ä»¥ä»»æ„é€‰æ‹©ã€‚kotlin ä¹Ÿæ²¡æœ‰æ–‡ä»¶å¤¹ç›®å½•æ–½åŠ ä»»ä½•é™åˆ¶ï¼ŒåŒ…å±‚çº§ç»“æ„ä¸éœ€è¦éµå¾ªåŒæ ·çš„ç›®å½•å±‚çº§ç»“æ„ ,ä½† kotlin å®˜æ–¹è¿˜æ˜¯å»ºè®®æ ¹æ®åŒ…å£°æ˜æŠŠæºç æ–‡ä»¶æ”¾åˆ°ç›¸åº”çš„ç›®å½•ä¸­

å¦‚æœåŒ…åå‡ºç°å‘½åå†²çªï¼Œå¯ä»¥ä½¿ç”¨  **as  å…³é”®å­—**åœ¨æœ¬åœ°é‡å‘½åå†²çªé¡¹æ¥æ¶ˆæ­§ä¹‰

```kotlin
import learn.package1.Point
import learn.package2.Point as PointTemp //PointTemp å¯ä»¥ç”¨æ¥è¡¨ç¤º learn.package2.Point äº†
```

kotlin ä¸­ä¹Ÿæœ‰ä¸€ä¸ªç±»ä¼¼çš„æ¦‚å¿µå¯ä»¥ç”¨æ¥é‡å‘½åç°æœ‰ç±»å‹ï¼Œå«åšç±»å‹åˆ«åã€‚ç±»å‹åˆ«åç”¨äºä¸ºç°æœ‰ç±»å‹æä¾›ä¸€ä¸ªæ›¿ä»£åç§°ï¼Œå¦‚æœç±»å‹åç§°æ¯”è¾ƒé•¿ï¼Œå°±å¯ä»¥é€šè¿‡å¼•å…¥ä¸€ä¸ªè¾ƒçŸ­æˆ–è€…æ›´ä¸ºç®€ç•¥çš„åç§°æ¥æ–¹ä¾¿è®°å¿†

ç±»å‹åˆ«åä¸ä¼šå¼•å…¥æ–°çš„ç±»å‹ï¼Œä¾ç„¶å¯¹åº”å…¶åº•å±‚ç±»å‹ï¼Œæ‰€ä»¥åœ¨ä¸‹è¿°ä»£ç ä¸­è¾“å‡ºçš„ class ç±»å‹æ˜¯ä¸€è‡´çš„

```kotlin
class Base {

    class InnerClass

}

typealias BaseInner = Base.InnerClass

fun main() {
    val baseInner1 = Base.InnerClass()
    val baseInner2 = BaseInner()
    println(baseInner1.javaClass) //class test2.Base$InnerClass
    println(baseInner2.javaClass) //class test2.Base$InnerClass
}
```

# ä¸‰ã€å˜é‡ä¸æ•°æ®ç±»å‹

åœ¨ Java ä¸­ï¼Œå¤§éƒ¨åˆ†çš„å˜é‡æ˜¯å¯å˜çš„ï¼ˆé final çš„ï¼‰ï¼Œæ„å‘³ç€ä»»ä½•å¯ä»¥è®¿é—®åˆ°è¿™ä¸ªå˜é‡çš„ä»£ç éƒ½å¯ä»¥å»ä¿®æ”¹å®ƒã€‚è€Œåœ¨ kotlin ä¸­ï¼Œå˜é‡å¯ä»¥åˆ†ä¸º **å¯å˜å˜é‡(var)** å’Œ **ä¸å¯å˜å˜é‡(val)** ä¸¤ç±»

å£°æ˜å˜é‡çš„å…³é”®å­—æœ‰ä¸¤ä¸ªï¼š

- valï¼ˆvalue /  varible+finalï¼‰â€”â€”ä¸å¯å˜å¼•ç”¨ã€‚ä½¿ç”¨ val å£°æ˜çš„å˜é‡ä¸èƒ½åœ¨åˆå§‹åŒ–ä¹‹åå†æ¬¡èµ‹å€¼ï¼Œå¯¹åº”çš„æ˜¯ Java ä¸­çš„ final å˜é‡
- varï¼ˆvariableï¼‰â€”â€”å¯å˜å¼•ç”¨ã€‚var å˜é‡çš„å€¼å¯ä»¥è¢«æ”¹å˜ï¼Œå¯¹åº”çš„æ˜¯ Java ä¸­çš„é final å˜é‡

ä¸å¯å˜å˜é‡åœ¨èµ‹å€¼ä¹‹åå°±ä¸èƒ½å†å»æ”¹å˜å®ƒçš„çŠ¶æ€äº†ï¼Œå› æ­¤ä¸å¯å˜å˜é‡å¯ä»¥è¯´æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œå› ä¸ºå®ƒä»¬æ— æ³•æ”¹å˜ï¼Œæ‰€æœ‰çº¿ç¨‹è®¿é—®åˆ°çš„å¯¹è±¡éƒ½æ˜¯åŒä¸€ä¸ªï¼Œå› æ­¤ä¹Ÿä¸éœ€è¦å»åšè®¿é—®æ§åˆ¶ã€‚å¼€å‘è€…åº”å½“å°½å¯èƒ½åœ°ä½¿ç”¨ä¸å¯å˜å˜é‡ï¼Œè¿™æ ·å¯ä»¥è®©ä»£ç æ›´åŠ æ¥è¿‘å‡½æ•°å¼ç¼–ç¨‹é£æ ¼

ç¼–ç¨‹é¢†åŸŸä¹Ÿæ¨å´‡ä¸€ç§å¼€å‘åŸåˆ™ï¼šå°½å¯èƒ½ä½¿ç”¨ valï¼Œä¸å¯å˜å¯¹è±¡åŠçº¯å‡½æ•°æ¥è®¾è®¡ç¨‹åºã€‚è¿™æ ·å¯ä»¥å°½é‡é¿å…å‰¯ä½œç”¨å¸¦æ¥çš„å½±å“

```kotlin
fun main() {
    //åªè¯»å˜é‡å³èµ‹å€¼åä¸å¯ä»¥æ”¹å˜å€¼çš„å˜é‡ï¼Œç”¨ val å£°æ˜
    //å£°æ˜ä¸€ä¸ªæ•´æ•°ç±»å‹çš„ä¸å¯å˜å˜é‡
    val intValue: Int = 100

    //å£°æ˜ä¸€ä¸ªåŒç²¾åº¦ç±»å‹çš„å¯å˜å˜é‡
    var doubleValue: Double = 100.0
}
```

åœ¨å£°æ˜å˜é‡æ—¶æˆ‘ä»¬é€šå¸¸ä¸éœ€è¦æ˜¾å¼æŒ‡æ˜å˜é‡çš„ç±»å‹ï¼Œè¿™å¯ä»¥ç”±ç¼–è¯‘å™¨æ ¹æ®ä¸Šä¸‹æ–‡è‡ªåŠ¨æ¨å¯¼å‡ºæ¥ã€‚å¦‚æœåªè¯»å˜é‡åœ¨å£°æ˜æ—¶æ²¡æœ‰åˆå§‹çš„é»˜è®¤å€¼ï¼Œåˆ™å¿…é¡»æŒ‡æ˜å˜é‡ç±»å‹ï¼Œä¸”åœ¨ä½¿ç”¨å‰å¿…é¡»ç¡®ä¿åœ¨å„ä¸ªåˆ†æ”¯æ¡ä»¶ä¸‹å˜é‡å¯ä»¥è¢«åˆå§‹åŒ–ï¼Œå¦åˆ™ç¼–è¯‘å™¨å°±ä¼šæŠ¥å¼‚å¸¸

```kotlin
fun main() {
    val intValue = 1002222222222
    val doubleValue = 100.0
    val longValue = 100L

    //å¦‚æœåªè¯»å˜é‡åœ¨å£°æ˜æ—¶æ²¡æœ‰åˆå§‹å€¼ï¼Œåˆ™å¿…é¡»æŒ‡æ˜å˜é‡ç±»å‹
    val intValue2: Int
    if (false) {
        intValue2 = 10
    }
    println(intValue2) //errorï¼Œ Variable 'intValue2' must be initialized
}
```

## 1ã€åŸºæœ¬æ•°æ®ç±»å‹

ä¸ Java ä¸åŒï¼Œkotlin å¹¶ä¸åŒºåˆ†åŸºæœ¬æ•°æ®ç±»å‹å’Œå®ƒçš„åŒ…è£…ç±»ï¼Œåœ¨ kotlin ä¸­ä¸€åˆ‡éƒ½æ˜¯å¯¹è±¡ï¼Œå¯ä»¥åœ¨ä»»ä½•å˜é‡ä¸Šè°ƒç”¨å…¶æˆå‘˜å‡½æ•°å’Œå±æ€§ã€‚kotlin æ²¡æœ‰åƒ Java ä¸­é‚£æ ·çš„åŸå§‹åŸºæœ¬ç±»å‹ï¼Œä½† **byteã€charã€integerã€float æˆ–è€… boolean** ç­‰ç±»å‹ä»ç„¶æœ‰ä¿ç•™ï¼Œä½†æ˜¯å…¨éƒ¨éƒ½ä½œä¸ºå¯¹è±¡å­˜åœ¨

å¯¹äºåŸºæœ¬ç±»å‹ï¼Œkotlin ç›¸æ¯” Java æœ‰å‡ ç‚¹ç‰¹æ®Šçš„åœ°æ–¹

- æ•°å­—ã€å­—ç¬¦å’Œå¸ƒå°”å€¼å¯ä»¥åœ¨è¿è¡Œæ—¶è¡¨ç¤ºä¸ºåŸç”Ÿç±»å‹å€¼ï¼Œä½†å¯¹å¼€å‘è€…æ¥è¯´ï¼Œå®ƒä»¬çœ‹èµ·æ¥å°±åƒæ™®é€šçš„ç±»
- å¯¹äºæ•°å­—**æ²¡æœ‰éšå¼æ‹“å®½è½¬æ¢**ï¼Œè€Œåœ¨ Java ä¸­ int å¯ä»¥éšå¼è½¬æ¢ä¸º long
- æ‰€æœ‰æœªè¶…å‡º Int æœ€â¼¤å€¼çš„æ•´å‹å€¼åˆå§‹åŒ–çš„å˜é‡éƒ½ä¼šè‡ªåŠ¨æ¨æ–­ä¸º Int ç±»å‹ï¼Œå¦‚æœåˆå§‹å€¼è¶…è¿‡äº†å…¶æœ€â¼¤å€¼ï¼Œåˆ™ä¼šæ¨æ–­ä¸º Long ç±»å‹ï¼Œ å¦‚éœ€æ˜¾å¼æŒ‡å®š Long ç±»å‹å€¼å¯åœ¨è¯¥å€¼åè¿½åŠ  L åç¼€
- å­—ç¬¦ä¸èƒ½è§†ä¸ºæ•°å­—
- ä¸æ”¯æŒå…«è¿›åˆ¶

```kotlin
//åœ¨ kotlin ä¸­ï¼Œintã€longã€float ç­‰ç±»å‹ä»ç„¶å­˜åœ¨ï¼Œä½†æ˜¯æ˜¯ä½œä¸ºå¯¹è±¡å­˜åœ¨çš„

val intIndex: Int = 100
//ç­‰ä»·äºï¼Œç¼–è¯‘å™¨ä¼šè‡ªåŠ¨è¿›è¡Œç±»å‹æ¨å¯¼
val intIndex = 100

//æ•°å­—ç±»å‹ä¸ä¼šè‡ªåŠ¨è½¬å‹ï¼Œå¿…é¡»è¦è¿›è¡Œæ˜ç¡®çš„ç±»å‹è½¬æ¢
val doubleIndex: Double = intIndex.toDouble()
//ä»¥ä¸‹ä»£ç ä¼šæç¤ºé”™è¯¯ï¼Œéœ€è¦è¿›è¡Œæ˜ç¡®çš„ç±»å‹è½¬æ¢
//val doubleIndex: Double = intIndex

val intValue: Int = 1
val longValue: Long = 1
//ä»¥ä¸‹ä»£ç ä¼šæç¤ºé”™è¯¯ï¼Œå› ä¸ºä¸¤è€…çš„æ•°æ®ç±»å‹ä¸ä¸€è‡´ï¼Œéœ€è¦è½¬æ¢ä¸ºåŒä¸€ç±»å‹åæ‰èƒ½è¿›è¡Œæ¯”è¾ƒ
//println(intValue == longValue)

//Char ä¸èƒ½ç›´æ¥ä½œä¸ºæ•°å­—æ¥å¤„ç†ï¼Œéœ€è¦ä¸»åŠ¨è½¬æ¢
val ch: Char = 'c'
val charValue: Int = ch.toInt()
//ä»¥ä¸‹ä»£ç ä¼šæç¤ºé”™è¯¯
//val charValue: Int = ch

//äºŒè¿›åˆ¶
val value1 = 0b00101
//åå…­è¿›åˆ¶
val value2 = 0x123
```

æ­¤å¤–ï¼Œkotlin çš„å¯ç©ºç±»å‹ä¸èƒ½ç”¨ Java çš„åŸºæœ¬æ•°æ®ç±»å‹è¡¨ç¤ºï¼Œå› ä¸º null åªèƒ½è¢«å­˜å‚¨åœ¨ Java çš„å¼•ç”¨ç±»å‹çš„å˜é‡ä¸­ï¼Œè¿™æ„å‘³ç€åªè¦ä½¿ç”¨äº†åŸºæœ¬æ•°æ®ç±»å‹çš„å¯ç©ºç‰ˆæœ¬ï¼Œå®ƒå°±ä¼šè¢«ç¼–è¯‘æˆå¯¹åº”çš„åŒ…è£…ç±»å‹

```kotlin
//åŸºæœ¬æ•°æ®ç±»å‹
val intValue_1: Int = 200
//åŒ…è£…ç±»
val intValue_2: Int? = intValue_1
val intValue_3: Int? = intValue_1
//== æ¯”è¾ƒçš„æ˜¯æ•°å€¼ç›¸ç­‰æ€§ï¼Œå› æ­¤ç»“æœæ˜¯ true
println(intValue_2 == intValue_3)
//=== æ¯”è¾ƒçš„æ˜¯å¼•ç”¨æ˜¯å¦ç›¸ç­‰ï¼Œå› æ­¤ç»“æœæ˜¯ false
println(intValue_2 === intValue_3)
```

> å¦‚æœ intValue_1 çš„å€¼æ˜¯100ï¼Œå°±ä¼šå‘ç° intValue_2 === intValue_3 çš„æ¯”è¾ƒç»“æœæ˜¯ trueï¼Œè¿™å°±æ¶‰åŠåˆ° Java å¯¹åŒ…è£…ç±»å¯¹è±¡çš„å¤ç”¨é—®é¢˜äº†

## 2ã€å­—ç¬¦ä¸²

kotlin ä¸ Java ä¸€æ ·ç”¨  String  ç±»å‹æ¥è¡¨ç¤ºå­—ç¬¦ä¸²ï¼Œå­—ç¬¦ä¸²æ˜¯ä¸å¯å˜çš„ï¼Œå¯ä»¥ä½¿ç”¨ç´¢å¼•è¿ç®—ç¬¦è®¿é—®`[]` æ¥è®¿é—®åŒ…å«çš„å•ä¸ªå­—ç¬¦ï¼Œä¹Ÿå¯ä»¥ç”¨  for  å¾ªç¯æ¥è¿­ä»£å­—ç¬¦ä¸²ï¼Œæ­¤å¤–ä¹Ÿå¯ä»¥ç”¨ + æ¥è¿æ¥å­—ç¬¦ä¸²

```kotlin
val str = "leavesCZY"
println(str[1])
for (c in str) {
    println(c)
}
val str1 = str + " hello"
```

kotlin æ”¯æŒåœ¨å­—ç¬¦ä¸²å­—é¢å€¼ä¸­å¼•ç”¨å±€éƒ¨å˜é‡ï¼Œåªéœ€è¦åœ¨å˜é‡åå‰åŠ ä¸Šå­—ç¬¦ \$ å³å¯ï¼Œæ­¤å¤–è¿˜å¯ä»¥åŒ…å«ç”¨èŠ±æ‹¬å·æ‹¬èµ·æ¥çš„è¡¨è¾¾å¼ï¼Œæ­¤æ—¶ä¼šè‡ªåŠ¨æ±‚å€¼å¹¶æŠŠç»“æœåˆå¹¶åˆ°å­—ç¬¦ä¸²ä¸­

```kotlin
val intValue = 100
//å¯ä»¥ç›´æ¥åŒ…å«å˜é‡
println("intValue value is $intValue") //intValue value is 100
//ä¹Ÿå¯ä»¥åŒ…å«è¡¨è¾¾å¼
println("(intValue + 100) value is ${intValue + 100}")   //(intValue + 100) value is 200
```

å¦‚æœä½ éœ€è¦åœ¨åŸå§‹å­—ç¬¦ä¸²ä¸­è¡¨ç¤ºå­—é¢å€¼ï¼ˆ$ï¼‰å­—ç¬¦ï¼ˆå®ƒä¸æ”¯æŒåæ–œæ è½¬ä¹‰ï¼‰ï¼Œå¯ä»¥ç”¨ä¸‹åˆ—è¯­æ³•ï¼š

```kotlin
val price = "${'$'}100.99"
println(price)  //$100.99
```

## 3ã€æ•°ç»„

kotlin ä¸­çš„æ•°ç»„æ˜¯å¸¦æœ‰ç±»å‹å‚æ•°çš„ç±»ï¼Œå…¶å…ƒç´ ç±»å‹è¢«æŒ‡å®šä¸ºç›¸åº”çš„ç±»å‹å‚æ•°ï¼Œä½¿ç”¨  Array  ç±»æ¥è¡¨ç¤ºï¼Œ  Array  ç±»å®šä¹‰äº†  get  ä¸  set  å‡½æ•°ï¼ˆæŒ‰ç…§è¿ç®—ç¬¦é‡è½½çº¦å®šè¿™ä¼šè½¬å˜ä¸º  [ ]  ï¼‰ä»¥åŠ  size  å±æ€§ç­‰

åˆ›å»ºæ•°ç»„çš„æ–¹æ³•æœ‰ä»¥ä¸‹å‡ ç§ï¼š

1. ç”¨ arrayOf å‡½æ•°åˆ›å»ºä¸€ä¸ªæ•°ç»„ï¼ŒåŒ…å«çš„å…ƒç´ æ˜¯æŒ‡å®šä¸ºè¯¥å‡½æ•°çš„å®å‚
2. ç”¨ arrayOfNulls åˆ›å»ºä¸€ä¸ªç»™å®šå¤§å°çš„æ•°ç»„ï¼ŒåŒ…å«çš„å…ƒç´ å‡ä¸º nullï¼Œåªèƒ½ç”¨æ¥åˆ›å»ºåŒ…å«å…ƒç´ ç±»å‹å¯ç©ºçš„æ•°ç»„
3. è°ƒç”¨ Array ç±»çš„æ„é€ æ–¹æ³•ï¼Œä¼ é€’æ•°ç»„çš„å¤§å°å’Œä¸€ä¸ª lambda è¡¨è¾¾å¼ï¼Œè°ƒç”¨ lambda è¡¨è¾¾å¼æ¥åˆ›å»ºæ¯ä¸€ä¸ªæ•°ç»„å…ƒç´ 

```kotlin
//åŒ…å«ç»™å®šå…ƒç´ çš„å­—ç¬¦ä¸²æ•°ç»„
val array1 = arrayOf("leavesCZY", "å¶", "https://github.com/leavesCZY")

array1[0] = "leavesCZY"
println(array1[1])
println(array1.size)

//åˆå§‹å…ƒç´ å‡ä¸º null ï¼Œå¤§å°ä¸º 10 çš„å­—ç¬¦æ•°ç»„
val array2 = arrayOfNulls<String>(10)

//åˆ›å»ºä» â€œaâ€ åˆ° â€œzâ€ çš„å­—ç¬¦ä¸²æ•°ç»„
val array3 = Array(26) { i -> ('a' + i).toString() }
```

éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œæ•°ç»„ç±»å‹çš„ç±»å‹å‚æ•°å§‹ç»ˆä¼šå˜æˆå¯¹è±¡ç±»å‹ï¼Œå› æ­¤å£°æ˜ **Array< Int >** å°†æ˜¯ä¸€ä¸ªåŒ…å«è£…ç®±ç±»å‹ï¼ˆjava.lang.Integerï¼‰çš„æ•°ç»„ã€‚å¦‚æœæƒ³è¦åˆ›å»ºæ²¡æœ‰è£…ç®±çš„åŸºæœ¬æ•°æ®ç±»å‹çš„æ•°ç»„ï¼Œå¿…é¡»ä½¿ç”¨ä¸€ä¸ªåŸºæœ¬æ•°æ®ç±»å‹æ•°ç»„çš„ç‰¹æ®Šç±»

ä¸ºäº†è¡¨ç¤ºåŸºæœ¬æ•°æ®ç±»å‹çš„æ•°ç»„ï¼Œkotlin ä¸ºæ¯ä¸€ç§åŸºæœ¬æ•°æ®ç±»å‹éƒ½æä¾›äº†è‹¥å¹²ç›¸åº”çš„ç±»å¹¶åšäº†ç‰¹æ®Šçš„ä¼˜åŒ–ã€‚ä¾‹å¦‚ï¼Œæœ‰ **IntArrayã€ByteArrayã€BooleanArray** ç­‰ç±»å‹ï¼Œè¿™äº›ç±»å‹éƒ½ä¼šè¢«ç¼–è¯‘æˆæ™®é€šçš„ Java åŸºæœ¬æ•°æ®ç±»å‹æ•°ç»„ï¼Œæ¯”å¦‚ **int[]ã€byte[]ã€boolean[]** ç­‰ï¼Œè¿™äº›æ•°ç»„ä¸­çš„å€¼å­˜å‚¨æ—¶æ²¡æœ‰è¿›è¡Œè£…ç®±ï¼Œè€Œæ˜¯ä½¿ç”¨äº†å¯èƒ½çš„æœ€é«˜æ•ˆçš„æ–¹å¼ã€‚éœ€è¦æ³¨æ„ï¼ŒIntArray ç­‰å¹¶ä¸æ˜¯ Array çš„å­ç±»

è¦åˆ›å»ºä¸€ä¸ªåŸºæœ¬æ•°æ®ç±»å‹çš„æ•°ç»„ï¼Œæœ‰ä»¥ä¸‹å‡ ç§æ–¹å¼ï¼š

1. å‘å¯¹åº”ç±»å‹çš„ç±»ï¼ˆå¦‚ IntArrayï¼‰çš„æ„é€ å‡½æ•°ä¼ é€’æ•°ç»„å¤§å°ï¼Œè¿™å°†è¿”å›ä¸€ä¸ªä½¿ç”¨å¯¹åº”åŸºæœ¬æ•°æ®ç±»å‹é»˜è®¤å€¼åˆå§‹åŒ–å¥½çš„æ•°ç»„
2. å‘å¯¹åº”ç±»å‹çš„ç±»ï¼ˆå¦‚ IntArrayï¼‰çš„æ„é€ å‡½æ•°ä¼ é€’æ•°ç»„å¤§å°ä»¥åŠç”¨æ¥åˆå§‹åŒ–æ¯ä¸ªå…ƒç´ çš„ lambda
3. å‘å·¥å‚å‡½æ•°ï¼ˆå¦‚ charArrayOfï¼‰ä¼ é€’å˜é•¿å‚æ•°çš„å€¼ï¼Œä»è€Œå¾—åˆ°æŒ‡å®šå…ƒç´ å€¼çš„æ•°ç»„

```kotlin
//æŒ‡å®šæ•°ç»„å¤§å°ï¼ŒåŒ…å«çš„å…ƒç´ å°†æ˜¯å¯¹åº”åŸºæœ¬æ•°æ®ç±»å‹çš„é»˜è®¤å€¼(int çš„é»˜è®¤å€¼æ˜¯ 0)
val intArray = IntArray(5)
//æŒ‡å®šæ•°ç»„å¤§å°ä»¥åŠç”¨äºåˆå§‹åŒ–æ¯ä¸ªå…ƒç´ çš„ lambda
val doubleArray = DoubleArray(5) { Random().nextDouble() }
//æ¥æ”¶å˜é•¿å‚æ•°çš„å€¼æ¥åˆ›å»ºå­˜å‚¨è¿™äº›å€¼çš„æ•°ç»„
val charArray = charArrayOf('H', 'e', 'l', 'l', 'o')
```

## 4ã€Any å’Œ Any?

Any ç±»å‹æ˜¯ kotlin æ‰€æœ‰éç©ºç±»å‹çš„è¶…ç±»å‹ï¼ŒåŒ…æ‹¬åƒ Int è¿™æ ·çš„åŸºæœ¬æ•°æ®ç±»å‹

å¦‚æœæŠŠåŸºæœ¬æ•°æ®ç±»å‹çš„å€¼èµ‹ç»™ Any ç±»å‹çš„å˜é‡ï¼Œåˆ™ä¼šè‡ªåŠ¨è£…ç®±

```kotlin
val any: Any = 100
println(any.javaClass) //class java.lang.Integer
```

å¦‚æœæƒ³è¦ä½¿å˜é‡å¯ä»¥å­˜å‚¨åŒ…æ‹¬ null åœ¨å†…çš„æ‰€æœ‰å¯èƒ½çš„å€¼ï¼Œåˆ™éœ€è¦ä½¿ç”¨ Any?

```kotlin
val any: Any? = null
```

## 5ã€Unit

kotlin ä¸­çš„ Unit ç±»å‹ç±»ä¼¼äº Java ä¸­çš„ voidï¼Œå¯ä»¥ç”¨äºå‡½æ•°æ²¡æœ‰è¿”å›å€¼æ—¶çš„æƒ…å†µ

```kotlin
fun check(): Unit {

}

//å¦‚æœè¿”å›å€¼ä¸º Unitï¼Œåˆ™å¯ä»¥çœç•¥è¯¥å£°æ˜
fun check() {

}
```

Unit æ˜¯ä¸€ä¸ªå®Œå¤‡çš„ç±»å‹ï¼Œå¯ä»¥ä½œä¸ºç±»å‹å‚æ•°ï¼Œä½† void ä¸è¡Œ

```kotlin
interface Test<T> {
    fun test(): T
}

class NoResultClass : Test<Unit> {
    
    //è¿”å› Unitï¼Œä½†å¯ä»¥çœç•¥ç±»å‹è¯´æ˜ï¼Œå‡½æ•°ä¹Ÿä¸éœ€è¦æ˜¾å¼åœ° return 
    override fun test() {

    }

}
```

## 6ã€Nothing

Nothing ç±»å‹æ²¡æœ‰ä»»ä½•å€¼ï¼Œåªæœ‰è¢«å½“åšå‡½æ•°è¿”å›å€¼ä½¿ç”¨ï¼Œæˆ–è€…è¢«å½“åšæ³›å‹å‡½æ•°è¿”å›å€¼çš„ç±»å‹å‚æ•°ä½¿ç”¨æ—¶æ‰ä¼šæœ‰æ„ä¹‰ï¼Œå¯ä»¥ç”¨ Nothing æ¥è¡¨ç¤ºä¸€ä¸ªå‡½æ•°ä¸ä¼šè¢«æ­£å¸¸ç»ˆæ­¢ï¼Œä»è€Œå¸®åŠ©ç¼–è¯‘å™¨å¯¹ä»£ç è¿›è¡Œè¯Šæ–­

ç¼–è¯‘å™¨çŸ¥é“è¿”å›å€¼ä¸º Nothing ç±»å‹çš„å‡½æ•°ä»ä¸ä¼šæ­£å¸¸ç»ˆæ­¢ï¼Œæ‰€ä»¥ç¼–è¯‘å™¨ä¼šæŠŠ name1 çš„ç±»å‹æ¨æ–­ä¸ºéç©ºï¼Œå› ä¸º name1 åœ¨ä¸º null æ—¶çš„åˆ†æ”¯å¤„ç†ä¼šå§‹ç»ˆæŠ›å‡ºå¼‚å¸¸

```kotlin
data class User(val name: String?)

fun fail(message: String): Nothing {
    throw IllegalStateException(message)
}

fun main() {
    val user = User("leavesC")
    val name = user.name ?: fail("no name")
    println(name) //leavesC

    val user1 = User(null)
    val name1 = user1.name ?: fail("no name")
    println(name1.length) //IllegalStateException
}
```

# å››ã€å‡½æ•°

kotlin ä¸­çš„å‡½æ•°ä»¥å…³é”®å­— fun ä½œä¸ºå¼€å¤´ï¼Œå‡½æ•°åç§°ç´§éšå…¶åï¼Œå†ä¹‹åæ˜¯ç”¨æ‹¬å·åŒ…è£¹èµ·æ¥çš„å‚æ•°åˆ—è¡¨ï¼Œå¦‚æœå‡½æ•°æœ‰è¿”å›å€¼ï¼Œåˆ™å†åŠ ä¸Šè¿”å›å€¼ç±»å‹ï¼Œç”¨ä¸€ä¸ªå†’å·ä¸å‚æ•°åˆ—è¡¨éš”å¼€

```kotlin
//fun ç”¨äºè¡¨ç¤ºå£°æ˜ä¸€ä¸ªå‡½æ•°ï¼ŒgetNameLastChar æ˜¯å‡½æ•°å
//ç©ºæ‹¬å·è¡¨ç¤ºè¯¥å‡½æ•°æ— ä¼ å…¥å‚æ•°ï¼ŒChar è¡¨ç¤ºå‡½æ•°çš„è¿”å›å€¼ç±»å‹æ˜¯å­—ç¬¦
fun getNameLastChar(): Char {
    return name.get(name.length - 1)
}

//å¸¦æœ‰ä¸¤ä¸ªä¸åŒç±»å‹çš„å‚æ•°ï¼Œä¸€ä¸ªæ˜¯ String ç±»å‹ï¼Œä¸€ä¸ªæ˜¯ Int ç±»å‹
//è¿”å›å€¼ä¸º Int ç±»å‹
fun test1(str: String, int: Int): Int {
    return str.length + int
}
```

æ­¤å¤–ï¼Œè¡¨è¾¾å¼å‡½æ•°ä½“çš„è¿”å›å€¼ç±»å‹å¯ä»¥çœç•¥ï¼Œè¿”å›å€¼ç±»å‹å¯ä»¥è‡ªåŠ¨æ¨æ–­ï¼Œè¿™ç§ç”¨å•è¡Œè¡¨è¾¾å¼ä¸ç­‰å·å®šä¹‰çš„å‡½æ•°å«åš**è¡¨è¾¾å¼å‡½æ•°ä½“**ã€‚ä½†å¯¹äºä¸€èˆ¬æƒ…å†µä¸‹çš„æœ‰è¿”å›å€¼çš„**ä»£ç å—å‡½æ•°ä½“**ï¼Œ**å¿…é¡»æ˜¾å¼åœ°**å†™å‡ºè¿”å›ç±»å‹å’Œ return è¯­å¥

```kotlin
//getNameLastChar å‡½æ•°çš„è¿”å›å€¼ç±»å‹ä»¥åŠ return å…³é”®å­—æ˜¯å¯ä»¥çœç•¥çš„
//è¿”å›å€¼ç±»å‹å¯ä»¥ç”±ç¼–è¯‘å™¨æ ¹æ®ä¸Šä¸‹æ–‡è¿›è¡Œæ¨å¯¼
//å› æ­¤ï¼Œå‡½æ•°å¯ä»¥ç®€å†™ä¸ºä»¥ä¸‹å½¢å¼
fun getNameLastChar() = name.get(name.length - 1)
```

å¦‚æœå‡½æ•°æ²¡æœ‰æœ‰æ„ä¹‰çš„è¿”å›å€¼ï¼Œåˆ™å¯ä»¥å£°æ˜ä¸º Unit ï¼Œä¹Ÿå¯ä»¥çœç•¥ Unit

ä»¥ä¸‹ä¸‰ç§å†™æ³•éƒ½æ˜¯ç­‰ä»·çš„

```kotlin
fun test(str: String, int: Int): Unit {
    println(str.length + int)
}

fun test(str: String, int: Int) {
    println(str.length + int)
}

fun test(str: String, int: Int) = println(str.length + int)
```

## 1ã€å‘½åå‚æ•°

ä¸ºäº†å¢å¼ºä»£ç çš„å¯è¯»æ€§ï¼Œkotlin å…è®¸æˆ‘ä»¬ä½¿ç”¨å‘½åå‚æ•°ï¼Œå³åœ¨è°ƒç”¨æŸå‡½æ•°çš„æ—¶å€™ï¼Œå¯ä»¥å°†å‡½æ•°å‚æ•°åä¸€èµ·æ ‡æ˜ï¼Œä»è€Œæ˜ç¡®åœ°è¡¨è¾¾è¯¥å‚æ•°çš„å«ä¹‰ä¸ä½œç”¨ï¼Œä½†æ˜¯åœ¨æŒ‡å®šäº†ä¸€ä¸ªå‚æ•°çš„åç§°åï¼Œä¹‹åçš„æ‰€æœ‰å‚æ•°éƒ½éœ€è¦æ ‡æ˜åç§°

```kotlin
fun main() {
    //é”™è¯¯ï¼Œåœ¨æŒ‡å®šäº†ä¸€ä¸ªå‚æ•°çš„åç§°åï¼Œä¹‹åçš„æ‰€æœ‰å‚æ•°éƒ½éœ€è¦æ ‡æ˜åç§°
    //compute(index = 110, "leavesC")
    compute(index = 120, value = "leavesC")
    compute(130, value = "leavesC")
}

fun compute(index: Int, value: String) {

}
```

## 2ã€é»˜è®¤å‚æ•°å€¼

å¯ä»¥åœ¨å£°æ˜å‡½æ•°çš„æ—¶å€™æŒ‡å®šå‚æ•°çš„é»˜è®¤å€¼ï¼Œä»è€Œé¿å…åˆ›å»ºé‡è½½çš„å‡½æ•°

```kotlin
fun main() {
    compute(24)
    compute(24, "leavesC")
}

fun compute(age: Int, name: String = "leavesC") {

}
```

å¯¹äºä»¥ä¸Šè¿™ä¸ªä¾‹å­ï¼Œå¦‚æœæŒ‰ç…§å¸¸è§„çš„è°ƒç”¨è¯­æ³•æ—¶ï¼Œå¿…é¡»æŒ‰ç…§å‡½æ•°å£°æ˜å®šä¹‰çš„å‚æ•°é¡ºåºæ¥ç»™å®šå‚æ•°ï¼Œå¯ä»¥çœç•¥çš„åªæœ‰æ’åœ¨æœ«å°¾çš„å‚æ•°

```kotlin
fun main() {
    //é”™è¯¯ï¼Œä¸èƒ½çœç•¥å‚æ•° name
    // compute(24)
    // compute(24,100)
    //å¯ä»¥çœç•¥å‚æ•° value
    compute("leavesC", 24)
}

fun compute(name: String = "leavesC", age: Int, value: Int = 100) {}
```

å¦‚æœä½¿ç”¨å‘½åå‚æ•°ï¼Œå¯ä»¥çœç•¥ä»»ä½•æœ‰é»˜è®¤å€¼çš„å‚æ•°ï¼Œè€Œä¸”ä¹Ÿå¯ä»¥æŒ‰ç…§ä»»æ„é¡ºåºä¼ å…¥éœ€è¦çš„å‚æ•°

```kotlin
fun main() {
    compute(age = 24)
    compute(age = 24, name = "leavesC")
    compute(age = 24, value = 90, name = "leavesC")
    compute(value = 90, age = 24, name = "leavesC")
}

fun compute(name: String = "leavesC", age: Int, value: Int = 100) {

}
```

## 3ã€å¯å˜å‚æ•°

å¯å˜å‚æ•°å¯ä»¥è®©æˆ‘ä»¬æŠŠä»»æ„ä¸ªæ•°çš„å‚æ•°æ‰“åŒ…åˆ°æ•°ç»„ä¸­ä¼ ç»™å‡½æ•°ï¼Œkotlin çš„è¯­æ³•ç›¸æ¯” Java æœ‰æ‰€ä¸åŒï¼Œæ”¹ä¸ºé€šè¿‡ä½¿ç”¨ vararg å…³é”®å­—å£°æ˜å¯å˜å‚æ•°

ä¾‹å¦‚ï¼Œä»¥ä¸‹çš„å‡ ç§å‡½æ•°è°ƒç”¨æ–¹å¼éƒ½æ˜¯æ­£ç¡®çš„

```kotlin
fun main() {
    compute()
    compute("leavesC")
    compute("leavesC", "leavesc")
    compute("leavesC", "leavesc", "å¶")
}

fun compute(vararg name: String) {
    name.forEach { println(it) }
}
```

åœ¨ Java ä¸­ï¼Œå¯ä»¥ç›´æ¥å°†æ•°ç»„ä¼ é€’ç»™å¯å˜å‚æ•°ï¼Œè€Œ kotlin è¦æ±‚æ˜¾å¼åœ°è§£åŒ…æ•°ç»„ï¼Œä»¥ä¾¿æ¯ä¸ªæ•°ç»„å…ƒç´ åœ¨å‡½æ•°ä¸­èƒ½å¤Ÿä½œä¸ºå•ç‹¬çš„å‚æ•°æ¥è°ƒç”¨ï¼Œè¿™ä¸ªåŠŸèƒ½è¢«ç§°ä¸ºå±•å¼€è¿ç®—ç¬¦ï¼Œä½¿ç”¨æ–¹å¼å°±æ˜¯åœ¨æ•°ç»„å‚æ•°å‰åŠ ä¸€ä¸ª *

```kotlin
fun main() {
    val names = arrayOf("leavesC", "leavesc", "å¶")
    compute(* names)
}

fun compute(vararg name: String) {
    name.forEach { println(it) }
}
```

## 4ã€å±€éƒ¨å‡½æ•°

kotlin æ”¯æŒåœ¨å‡½æ•°ä¸­åµŒå¥—å‡½æ•°ï¼Œè¢«åµŒå¥—çš„å‡½æ•°ç§°ä¸ºå±€éƒ¨å‡½æ•°

```kotlin
fun main() {
    compute("leavesC", "country")
}

fun compute(name: String, country: String) {
    fun check(string: String) {
        if (string.isEmpty()) {
            throw IllegalArgumentException("å‚æ•°é”™è¯¯")
        }
    }
    check(name)
    check(country)
}
```

# äº”ã€è¡¨è¾¾å¼å’Œæ¡ä»¶å¾ªç¯

## 1ã€è¯­å¥å’Œè¡¨è¾¾å¼

è¿™é‡Œéœ€è¦å…ˆåŒºåˆ†â€œè¯­å¥â€å’Œâ€œè¡¨è¾¾å¼â€è¿™ä¸¤ä¸ªæ¦‚å¿µã€‚è¯­å¥æ˜¯å¯ä»¥å•ç‹¬æ‰§è¡Œï¼Œèƒ½å¤Ÿäº§ç”Ÿå®é™…æ•ˆæœçš„ä»£ç ï¼Œè¡¨ç°ä¸ºèµ‹å€¼é€»è¾‘ã€æ‰“å°æ“ä½œã€æµç¨‹æ§åˆ¶ç­‰å½¢å¼ï¼ŒJava ä¸­çš„æµç¨‹æ§åˆ¶ï¼ˆifï¼Œwhileï¼Œforï¼‰ç­‰éƒ½æ˜¯è¯­å¥ã€‚è¡¨è¾¾å¼å¯ä»¥æ˜¯ä¸€ä¸ªå€¼ã€å˜é‡ã€å¸¸é‡ã€æ“ä½œç¬¦ã€æˆ–å®ƒä»¬ä¹‹é—´çš„ç»„åˆï¼Œè¡¨è¾¾å¼å¯ä»¥çœ‹åšæ˜¯åŒ…å«è¿”å›å€¼çš„è¯­å¥

ä¾‹å¦‚ï¼Œä»¥ä¸‹çš„èµ‹å€¼æ“ä½œã€æµç¨‹æ§åˆ¶ã€æ‰“å°è¾“å‡ºéƒ½æ˜¯è¯­å¥ï¼Œå…¶æ˜¯ä½œä¸ºä¸€ä¸ªæ•´ä½“å­˜åœ¨çš„ï¼Œä¸”ä¸åŒ…å«è¿”å›å€¼

```kotlin
val a = 10
for (i in 0..a step 2) {
    println(i)
}
```

å†çœ‹å‡ ä¸ªè¡¨è¾¾å¼çš„ä¾‹å­

```kotlin
1       //å­—é¢è¡¨è¾¾å¼ï¼Œè¿”å› 1

++1     //ä¹Ÿå±äºè¡¨è¾¾å¼ï¼Œè‡ªå¢ä¼šè¿”å› 2

//ä¸ Java ä¸åŒï¼Œkotlin ä¸­çš„ if æ˜¯ä½œä¸ºè¡¨è¾¾å¼å­˜åœ¨çš„ï¼Œå…¶å¯ä»¥æ‹¥æœ‰è¿”å›å€¼
fun getLength(str: String?): Int {
    return if (str.isNullOrBlank()) 0 else str.length
}
```

## 2ã€If è¡¨è¾¾å¼

if çš„åˆ†æ”¯å¯ä»¥æ˜¯ä»£ç å—ï¼Œæœ€åçš„è¡¨è¾¾å¼ä½œä¸ºè¯¥å—çš„è¿”å›å€¼

```kotlin
val maxValue = if (20 > 10) {
    println("maxValue is 20")
    20
} else {
    println("maxValue is 10")
    10
}
println(maxValue) //20
```

ä»¥ä¸‹ä»£ç å¯ä»¥æ˜¾ç¤ºåœ°çœ‹å‡º if çš„è¿”å›å€¼ï¼Œå®Œå…¨å¯ä»¥ç”¨æ¥æ›¿ä»£ Java ä¸­çš„**ä¸‰å…ƒè¿ç®—ç¬¦**ï¼Œå› æ­¤ kotlin å¹¶æ²¡æœ‰**ä¸‰å…ƒè¿ç®—ç¬¦**

```kotlin
val list = listOf(1, 4, 10, 4, 10, 30)
val value = if (list.size > 0) list.size else null
println(value)  //6
```

å¦‚æœ if è¡¨è¾¾å¼åˆ†æ”¯æ˜¯ç”¨äºæ‰§è¡ŒæŸä¸ªå‘½ä»¤ï¼Œé‚£ä¹ˆæ­¤æ—¶çš„è¿”å›å€¼ç±»å‹å°±æ˜¯ Unit ï¼Œæ­¤æ—¶çš„ if è¯­å¥å°±çœ‹èµ·æ¥å’Œ Java çš„ä¸€æ ·äº†

```kotlin
val value1 = if (list.size > 0) println("1") else println("2")
println(value1.javaClass)   //class kotlin.Unit
```

å¦‚æœå°† if ä½œä¸ºè¡¨è¾¾å¼è€Œä¸æ˜¯è¯­å¥ï¼ˆä¾‹å¦‚ï¼šè¿”å›å®ƒçš„å€¼æˆ–è€…æŠŠå®ƒèµ‹ç»™å˜é‡ï¼‰ï¼Œè¯¥è¡¨è¾¾å¼éœ€è¦æœ‰ else åˆ†æ”¯

## 3ã€when è¡¨è¾¾å¼

when è¡¨è¾¾å¼ä¸ Java ä¸­çš„ **switch/case** ç±»ä¼¼ï¼Œä½†æ˜¯è¦å¼ºå¤§å¾—å¤šã€‚when æ—¢å¯ä»¥è¢«å½“åšè¡¨è¾¾å¼ä½¿ç”¨ä¹Ÿå¯ä»¥è¢«å½“åšè¯­å¥ä½¿ç”¨ï¼Œwhen å°†å‚æ•°å’Œæ‰€æœ‰çš„åˆ†æ”¯æ¡ä»¶é¡ºåºæ¯”è¾ƒç›´åˆ°æŸä¸ªåˆ†æ”¯æ»¡è¶³æ¡ä»¶ï¼Œç„¶åå®ƒä¼šè¿è¡Œå³è¾¹çš„è¡¨è¾¾å¼ã€‚å¦‚æœ when è¢«å½“åšè¡¨è¾¾å¼æ¥ä½¿ç”¨ï¼Œç¬¦åˆæ¡ä»¶çš„åˆ†æ”¯çš„å€¼å°±æ˜¯æ•´ä¸ªè¡¨è¾¾å¼çš„å€¼ï¼Œå¦‚æœå½“åšè¯­å¥ä½¿ç”¨ï¼Œ åˆ™å¿½ç•¥ä¸ªåˆ«åˆ†æ”¯çš„å€¼ã€‚ä¸ Java çš„ switch/case ä¸åŒä¹‹å¤„æ˜¯ when è¡¨è¾¾å¼çš„å‚æ•°å¯ä»¥æ˜¯ä»»ä½•ç±»å‹ï¼Œå¹¶ä¸”åˆ†æ”¯ä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªæ¡ä»¶

å’Œ if ä¸€æ ·ï¼Œwhen è¡¨è¾¾å¼æ¯ä¸€ä¸ªåˆ†æ”¯å¯ä»¥æ˜¯ä¸€ä¸ªä»£ç å—ï¼Œå®ƒçš„å€¼æ˜¯ä»£ç å—ä¸­æœ€åçš„è¡¨è¾¾å¼çš„å€¼ï¼Œå¦‚æœå…¶å®ƒåˆ†æ”¯éƒ½ä¸æ»¡è¶³æ¡ä»¶å°†ä¼šæ±‚å€¼äº else åˆ†æ”¯

å¦‚æœ when ä½œä¸ºä¸€ä¸ªè¡¨è¾¾å¼ä½¿ç”¨ï¼Œåˆ™å¿…é¡»æœ‰ else åˆ†æ”¯ï¼Œ é™¤éç¼–è¯‘å™¨èƒ½å¤Ÿæ£€æµ‹å‡ºæ‰€æœ‰çš„å¯èƒ½æƒ…å†µéƒ½å·²ç»è¦†ç›–äº†ã€‚å¦‚æœå¾ˆå¤šåˆ†æ”¯éœ€è¦ç”¨ç›¸åŒçš„æ–¹å¼å¤„ç†ï¼Œåˆ™å¯ä»¥æŠŠå¤šä¸ªåˆ†æ”¯æ¡ä»¶æ”¾åœ¨ä¸€èµ·ï¼Œç”¨é€—å·åˆ†éš”

```kotlin
val value = 2
when (value) {
    in 4..9 -> println("in 4..9") //åŒºé—´åˆ¤æ–­
    3 -> println("value is 3")    //ç›¸ç­‰æ€§åˆ¤æ–­
    2, 6 -> println("value is 2 or 6")    //å¤šå€¼ç›¸ç­‰æ€§åˆ¤æ–­
    is Int -> println("is Int")   //ç±»å‹åˆ¤æ–­
    else -> println("else")       //å¦‚æœä»¥ä¸Šæ¡ä»¶éƒ½ä¸æ»¡è¶³ï¼Œåˆ™æ‰§è¡Œ else
}
```

```kotlin
fun main() {
    //è¿”å› when è¡¨è¾¾å¼
    fun parser(obj: Any): String =
            when (obj) {
                1 -> "value is 1"
                "4" -> "value is string 4"
                is Long -> "value type is long"
                else -> "unknown"
            }
    println(parser(1))
    println(parser(1L))
    println(parser("4"))
    println(parser(100L))
    println(parser(100.0))
}

value is 1
value type is long
value is string 4
value type is long
unknown
```

æ­¤å¤–ï¼Œwhen è¯­å¥ä¹Ÿå¯ä»¥ä¸å¸¦å‚æ•°æ¥ä½¿ç”¨

```kotlin
when {
    1 > 5 -> println("1 > 5")
    3 > 1 -> println("3 > 1")
}
```

## 4ã€for å¾ªç¯

å’Œ Java ä¸­çš„ for å¾ªç¯æœ€ä¸ºç±»ä¼¼çš„å½¢å¼æ˜¯

```kotlin
val list = listOf(1, 4, 10, 34, 10)
for (value in list) {
    println(value)
}
```

é€šè¿‡ç´¢å¼•æ¥éå†

```kotlin
val items = listOf("H", "e", "l", "l", "o")
//é€šè¿‡ç´¢å¼•æ¥éå†List
for (index in items.indices) {
    println("${index}å¯¹åº”çš„å€¼æ˜¯ï¼š${items[index]}")
}
```

ä¹Ÿå¯ä»¥åœ¨æ¯æ¬¡å¾ªç¯ä¸­è·å–å½“å‰ç´¢å¼•å’Œç›¸åº”çš„å€¼

```kotlin
val list = listOf(1, 4, 10, 34, 10)
for ((index, value) in list.withIndex()) {
    println("index : $index , value :$value")
}
```

ä¹Ÿå¯ä»¥è‡ªå®šä¹‰å¾ªç¯åŒºé—´

```kotlin
for (index in 2..10) {
    println(index)
}
```

## 5ã€while å’Œ do/while å¾ªç¯

while å’Œ do/while ä¸ Java ä¸­çš„åŒºåˆ«ä¸å¤§

```kotlin
val list = listOf(1, 4, 15, 2, 4, 10, 0, 9)
var index = 0
while (index < list.size) {
    println(list[index])
    index++
}
```

```kotlin
val list = listOf(1, 4, 15, 2, 4, 10, 0, 9)
var index = 0
do {
    println(list[index])
    index++
} while (index < list.size)
```

## 6ã€è¿”å›å’Œè·³è½¬

kotlin æœ‰ä¸‰ç§ç»“æ„åŒ–è·³è½¬è¡¨è¾¾å¼ï¼š

- return é»˜è®¤ä»æœ€ç›´æ¥åŒ…å›´å®ƒçš„å‡½æ•°æˆ–è€…åŒ¿åå‡½æ•°è¿”å›
- break  ç»ˆæ­¢æœ€ç›´æ¥åŒ…å›´å®ƒçš„å¾ªç¯
- continue  ç»§ç»­ä¸‹ä¸€æ¬¡æœ€ç›´æ¥åŒ…å›´å®ƒçš„å¾ªç¯

åœ¨ kotlin ä¸­ä»»ä½•è¡¨è¾¾å¼éƒ½å¯ä»¥ç”¨æ ‡ç­¾ï¼ˆlabelï¼‰æ¥æ ‡è®°ï¼Œæ ‡ç­¾çš„æ ¼å¼ä¸ºæ ‡è¯†ç¬¦åè·Ÿ @ ç¬¦å·ï¼Œä¾‹å¦‚ï¼š**abc@ ã€fooBar@** éƒ½æ˜¯æœ‰æ•ˆçš„æ ‡ç­¾

```kotlin
fun main() {
    fun1()
}

fun fun1() {
    val list = listOf(1, 4, 6, 8, 12, 23, 40)
    loop@ for (it in list) {
        if (it == 8) {
            continue
        }
        if (it == 23) {
            break@loop
        }
        println("value is $it")
    }
    println("function end")
}
```

```kotlin
value is 1
value is 4
value is 6
value is 12
function end
```

kotlin æœ‰å‡½æ•°å­—é¢é‡ã€å±€éƒ¨å‡½æ•°å’Œå¯¹è±¡è¡¨è¾¾å¼ã€‚å› æ­¤ kotlin çš„å‡½æ•°å¯ä»¥è¢«åµŒå¥—

æ ‡ç­¾é™åˆ¶çš„ return å…è®¸æˆ‘ä»¬ä»å¤–å±‚å‡½æ•°è¿”å›ï¼Œæœ€é‡è¦çš„ä¸€ä¸ªç”¨é€”å°±æ˜¯ä» lambda è¡¨è¾¾å¼ä¸­è¿”å›ã€‚é€šå¸¸æƒ…å†µä¸‹ä½¿ç”¨éšå¼æ ‡ç­¾æ›´æ–¹ä¾¿ï¼Œè¯¥æ ‡ç­¾ä¸æ¥å—è¯¥ lambda çš„å‡½æ•°åŒå

```kotlin
fun main() {
    fun1()
    fun2()
    fun3()
    fun4()
    fun5()
}

fun fun1() {
    val list = listOf(1, 4, 6, 8, 12, 23, 40)
    list.forEach {
        if (it == 8) {
            return
        }
        println("value is $it")
    }
    println("function end")

//    value is 1
//    value is 4
//    value is 6
}

fun fun2() {
    val list = listOf(1, 4, 6, 8, 12, 23, 40)
    list.forEach {
        if (it == 8) {
            return@fun2
        }
        println("value is $it")
    }
    println("function end")

//    value is 1
//    value is 4
//    value is 6
}

//fun3() å’Œ fun4() ä¸­ä½¿ç”¨çš„å±€éƒ¨è¿”å›ç±»ä¼¼äºåœ¨å¸¸è§„å¾ªç¯ä¸­ä½¿ç”¨ continue
fun fun3() {
    val list = listOf(1, 4, 6, 8, 12, 23, 40)
    list.forEach {
        if (it == 8) {
            return@forEach
        }
        println("value is $it")
    }
    println("function end")
    
//    value is 1
//    value is 4
//    value is 6
//    value is 12
//    value is 23
//    value is 40
//    function end
}

fun fun4() {
    val list = listOf(1, 4, 6, 8, 12, 23, 40)
    list.forEach loop@{
        if (it == 8) {
            return@loop
        }
        println("value is $it")
    }
    println("function end")

//    value is 1
//    value is 4
//    value is 6
//    value is 12
//    value is 23
//    value is 40
//    function end
}

fun fun5() {
    listOf(1, 2, 3, 4, 5).forEach(fun(value: Int) {
        if (value == 3) {
            //å±€éƒ¨è¿”å›åˆ°åŒ¿åå‡½æ•°çš„è°ƒç”¨è€…ï¼Œå³ forEach å¾ªç¯
            return
        }
        println("value is $value")
    })
    println("function end")
}
```

# å…­ã€åŒºé—´

Ranges è¡¨è¾¾å¼ä½¿ç”¨ä¸€ä¸ª **..**  æ“ä½œç¬¦æ¥å£°æ˜ä¸€ä¸ªé—­åŒºé—´ï¼Œå®ƒè¢«ç”¨äºå®šä¹‰å®ç°ä¸€ä¸ª RangTo æ–¹æ³•

ä»¥ä¸‹ä¸‰ç§å£°æ˜æ–¹å¼éƒ½æ˜¯ç­‰ä»·çš„

```kotlin
var index = 5

if (index >= 0 && index <= 10) {

}

if (index in 0..10) {

}

if (index in 0.rangeTo(10)) {

}
```

æ•°å­—ç±»å‹çš„ ranges åœ¨è¢«è¿­ä»£æ—¶ï¼Œç¼–è¯‘å™¨ä¼šå°†å®ƒä»¬è½¬æ¢ä¸ºä¸ Java ä¸­ä½¿ç”¨ index çš„ for å¾ªç¯çš„ç›¸åŒå­—èŠ‚ç çš„æ–¹å¼æ¥è¿›è¡Œä¼˜åŒ–

Ranges é»˜è®¤ä¼šè‡ªå¢é•¿ï¼Œæ‰€ä»¥åƒä»¥ä¸‹çš„ä»£ç å°±ä¸ä¼šè¢«æ‰§è¡Œ

```kotlin
for (index in 10..0) {
    println(index)
}
```

å¯ä»¥æ”¹ç”¨ downTo å‡½æ•°æ¥å°†ä¹‹æ”¹ä¸ºé€’å‡

```kotlin
for (index in 10 downTo 0) {
    println(index)
}
```

å¯ä»¥åœ¨ ranges ä¸­ä½¿ç”¨ step æ¥å®šä¹‰æ¯æ¬¡å¾ªç¯é€’å¢æˆ–é€’å¢çš„é•¿åº¦ï¼š

```kotlin
for (index in 1..8 step 2){
    println(index)
}
for (index in 8 downTo 1 step 2) {
    println(index)
}
```

ä»¥ä¸Šå£°æ˜çš„éƒ½æ˜¯é—­åŒºé—´ï¼Œå¦‚æœæƒ³å£°æ˜çš„æ˜¯å¼€åŒºé—´ï¼Œå¯ä»¥ä½¿ç”¨ until å‡½æ•°ï¼š

```kotlin
for (index in 0 until 4){
    println(index)
}
```

æ‰©å±•å‡½æ•° `reversed()` å¯ç”¨äºè¿”å›å°†åŒºé—´åè½¬åçš„åºåˆ—

```kotlin
val rangeTo = 1.rangeTo(3)
for (i in rangeTo) {
    println(i) //1  2  3
}
for (i in rangeTo.reversed()) {
    println(i) //3  2  1
}
```

# ä¸ƒã€ä¿®é¥°ç¬¦

## 1ã€final å’Œ  open

kotlin ä¸­çš„ç±»å’Œæ–¹æ³•é»˜è®¤éƒ½æ˜¯ final çš„ï¼Œå³ä¸å¯ç»§æ‰¿çš„ï¼Œå¦‚æœæƒ³å…è®¸åˆ›å»ºä¸€ä¸ªç±»çš„å­ç±»ï¼Œéœ€è¦ä½¿ç”¨ open ä¿®é¥°ç¬¦æ¥æ ‡è¯†è¿™ä¸ªç±»ï¼Œæ­¤å¤–ï¼Œä¹Ÿéœ€è¦ä¸ºæ¯ä¸€ä¸ªå¸Œæœ›è¢«é‡å†™çš„å±æ€§å’Œæ–¹æ³•æ·»åŠ  open ä¿®é¥°ç¬¦

```kotlin
open class View {
    open fun click() {

    }
	//ä¸èƒ½åœ¨å­ç±»ä¸­è¢«é‡å†™
    fun longClick() {

    }
}

class Button : View() {
    override fun click() {
        super.click()
    }
}
```

å¦‚æœé‡å†™äº†ä¸€ä¸ªåŸºç±»æˆ–è€…æ¥å£çš„æˆå‘˜ï¼Œé‡å†™äº†çš„æˆå‘˜åŒæ ·é»˜è®¤æ˜¯ open çš„ã€‚ä¾‹å¦‚ï¼Œå¦‚æœ Button ç±»æ˜¯ open çš„ï¼Œåˆ™å…¶å­ç±»ä¹Ÿå¯ä»¥é‡å†™å…¶ click() æ–¹æ³•

```kotlin
open class Button : View() {
    override fun click() {
        super.click()
    }
}

class CompatButton : Button() {
    override fun click() {
        super.click()
    }
}
```

å¦‚æœæƒ³è¦ç±»çš„å­ç±»é‡å†™è¯¥æ–¹æ³•çš„å®ç°ï¼Œå¯ä»¥æ˜¾å¼åœ°å°†é‡å†™çš„æˆå‘˜æ ‡è®°ä¸º final

```kotlin
open class Button : View() {
    override final fun click() {
        super.click()
    }
}
```

## 2ã€public

public ä¿®é¥°ç¬¦æ˜¯é™åˆ¶çº§æœ€ä½çš„ä¿®é¥°ç¬¦ï¼Œæ˜¯é»˜è®¤çš„ä¿®é¥°ç¬¦ã€‚å¦‚æœä¸€ä¸ªå®šä¹‰ä¸º public  çš„æˆå‘˜è¢«åŒ…å«åœ¨ä¸€ä¸ª private  ä¿®é¥°çš„ç±»ä¸­ï¼Œé‚£ä¹ˆè¿™ä¸ªæˆå‘˜åœ¨è¿™ä¸ªç±»ä»¥å¤–ä¹Ÿæ˜¯ä¸å¯è§çš„

## 3ã€protected

protected ä¿®é¥°ç¬¦åªèƒ½è¢«ç”¨åœ¨ç±»æˆ–è€…æ¥å£ä¸­çš„æˆå‘˜ä¸Šã€‚åœ¨ Java ä¸­ï¼Œå¯ä»¥ä»åŒä¸€ä¸ªåŒ…ä¸­è®¿é—®ä¸€ä¸ª protected çš„æˆå‘˜ï¼Œä½†å¯¹äº kotlin æ¥è¯´ï¼Œprotected æˆå‘˜åªåœ¨è¯¥ç±»å’Œå®ƒçš„å­ç±»ä¸­å¯è§ã€‚æ­¤å¤–ï¼Œprotected ä¸é€‚ç”¨äºé¡¶å±‚å£°æ˜

## 4ã€internal

ä¸€ä¸ªå®šä¹‰ä¸º internal çš„åŒ…æˆå‘˜ï¼Œå¯¹å…¶æ‰€åœ¨çš„æ•´ä¸ª module å¯è§ï¼Œä½†å¯¹äºå…¶å®ƒ module è€Œè¨€å°±æ˜¯ä¸å¯è§çš„äº†ã€‚ä¾‹å¦‚ï¼Œå‡è®¾æˆ‘ä»¬æƒ³è¦å‘å¸ƒä¸€ä¸ªå¼€æºåº“ï¼Œåº“ä¸­åŒ…å«æŸä¸ªç±»ï¼Œæˆ‘ä»¬å¸Œæœ›è¿™ä¸ªç±»å¯¹äºåº“æœ¬èº«æ˜¯å…¨å±€å¯è§çš„ï¼Œä½†å¯¹äºå¤–éƒ¨ä½¿ç”¨è€…æ¥è¯´å®ƒä¸èƒ½è¢«å¼•ç”¨åˆ°ï¼Œæ­¤æ—¶å°±å¯ä»¥é€‰æ‹©å°†å…¶å£°æ˜ä¸º internal çš„æ¥å®ç°è¿™ä¸ªç›®çš„

> æ ¹æ® Jetbrains çš„å®šä¹‰ï¼Œä¸€ä¸ª module  åº”è¯¥æ˜¯ä¸€ä¸ªå•ç‹¬çš„åŠŸèƒ½æ€§çš„å•ä½ï¼Œå¯ä»¥çœ‹åšæ˜¯ä¸€èµ·ç¼–è¯‘çš„ kotlin æ–‡ä»¶çš„é›†åˆï¼Œå®ƒåº”è¯¥æ˜¯å¯ä»¥è¢«å•ç‹¬ç¼–è¯‘ã€è¿è¡Œã€æµ‹è¯•ã€debug çš„ã€‚ç›¸å½“äºåœ¨ Android Studio ä¸­ä¸»å·¥ç¨‹å¼•ç”¨çš„ moduleï¼ŒEclipse ä¸­åœ¨ä¸€ä¸ª workspace ä¸­çš„ä¸åŒçš„ project

## 5ã€private

private  ä¿®é¥°ç¬¦æ˜¯é™åˆ¶çº§æœ€é«˜çš„ä¿®é¥°ç¬¦ï¼Œkotlin å…è®¸åœ¨é¡¶å±‚å£°æ˜ä¸­ä½¿ç”¨ private å¯è§æ€§ï¼ŒåŒ…æ‹¬ç±»ã€å‡½æ•°å’Œå±æ€§ï¼Œè¿™è¡¨ç¤ºåªåœ¨è‡ªå·±æ‰€åœ¨çš„æ–‡ä»¶ä¸­å¯è§ï¼Œæ‰€ä»¥å¦‚æœå°†ä¸€ä¸ªç±»å£°æ˜ä¸º privateï¼Œå°±ä¸èƒ½åœ¨å®šä¹‰è¿™ä¸ªç±»ä¹‹å¤–çš„åœ°æ–¹ä¸­ä½¿ç”¨å®ƒã€‚æ­¤å¤–ï¼Œå¦‚æœåœ¨ä¸€ä¸ªç±»é‡Œé¢ä½¿ç”¨äº† private  ä¿®é¥°ç¬¦ï¼Œé‚£è®¿é—®æƒé™å°±è¢«é™åˆ¶åœ¨è¿™ä¸ªç±»é‡Œé¢ï¼Œç»§æ‰¿è¿™ä¸ªç±»çš„å­ç±»ä¹Ÿä¸èƒ½ä½¿ç”¨å®ƒã€‚æ‰€ä»¥å¦‚æœç±»ã€å¯¹è±¡ã€æ¥å£ç­‰è¢«å®šä¹‰ä¸º privateï¼Œé‚£ä¹ˆå®ƒä»¬åªå¯¹è¢«å®šä¹‰æ‰€åœ¨çš„æ–‡ä»¶å¯è§ã€‚å¦‚æœè¢«å®šä¹‰åœ¨äº†ç±»æˆ–è€…æ¥å£ä¸­ï¼Œé‚£å®ƒä»¬åªå¯¹è¿™ä¸ªç±»æˆ–è€…æ¥å£å¯è§

## 6ã€æ€»ç»“

| ä¿®é¥°ç¬¦         | ç±»æˆå‘˜       | é¡¶å±‚å£°æ˜     |
| -------------- | ------------ | ------------ |
| publicï¼ˆé»˜è®¤ï¼‰ | æ‰€æœ‰åœ°æ–¹å¯è§ | æ‰€æœ‰åœ°æ–¹å¯è§ |
| internal       | æ¨¡å—ä¸­å¯è§   | æ¨¡å—ä¸­å¯è§   |
| protected      | å­ç±»ä¸­å¯è§   |              |
| private        | ç±»ä¸­å¯è§     | æ–‡ä»¶ä¸­å¯è§   |

# å…«ã€ç©ºå®‰å…¨

## 1ã€å¯ç©ºæ€§

åœ¨ kotlin ä¸­ï¼Œç±»å‹ç³»ç»Ÿå°†ä¸€ä¸ªå¼•ç”¨åˆ†ä¸ºå¯ä»¥å®¹çº³  null ï¼ˆå¯ç©ºå¼•ç”¨ï¼‰æˆ–è€…ä¸èƒ½å®¹çº³ nullï¼ˆéç©ºå¼•ç”¨ï¼‰ä¸¤ç§ç±»å‹ã€‚ ä¾‹å¦‚ï¼ŒString ç±»å‹çš„å¸¸è§„å˜é‡ä¸èƒ½æŒ‡å‘ null 

```kotlin
var name: String = "leavesC"
//ç¼–è¯‘é”™è¯¯
//name = null
```

å¦‚æœå¸Œæœ›ä¸€ä¸ªå˜é‡å¯ä»¥å‚¨å­˜ null å¼•ç”¨ï¼Œéœ€è¦æ˜¾å¼åœ°åœ¨ç±»å‹åç§°åé¢åŠ ä¸Šé—®å·

```kotlin
var name: String? = "leavesC"
name = null
```

é—®å·å¯ä»¥åŠ åœ¨ä»»ä½•ç±»å‹çš„åé¢æ¥è¡¨ç¤ºè¿™ä¸ªç±»å‹çš„å˜é‡å¯ä»¥å­˜å‚¨ null å¼•ç”¨ï¼š`Int?ã€Doubld? ã€Long?` ç­‰

kotlin å¯¹å¯ç©ºç±»å‹çš„æ˜¾å¼æ”¯æŒæœ‰åŠ©äºé˜²æ­¢ **NullPointerException** å¯¼è‡´çš„å¼‚å¸¸é—®é¢˜ï¼Œç¼–è¯‘å™¨ä¸å…è®¸ä¸å¯¹å¯ç©ºå˜é‡åš null æ£€æŸ¥å°±ç›´æ¥è°ƒç”¨å…¶å±æ€§ã€‚è¿™ä¸ªå¼ºåˆ¶è§„å®šä½¿å¾—å¼€å‘è€…å¿…é¡»åœ¨ç¼–ç åˆæœŸå°±è€ƒè™‘å¥½å˜é‡çš„å¯èµ‹å€¼èŒƒå›´å¹¶ä¸ºå…¶å„ä¸ªæƒ…å†µåšå¥½åˆ†æ”¯å¤„ç†

```kotlin
fun check(name: String?): Boolean {
    //errorï¼Œç¼–è¯‘å™¨ä¸å…è®¸ä¸å¯¹ name åš null æ£€æŸ¥å°±ç›´æ¥è°ƒç”¨å…¶å±æ€§
    return name.isNotEmpty()
}
```

æ­£ç¡®çš„åšæ³•æ˜¯æ˜¾å¼åœ°è¿›è¡Œ null æ£€æŸ¥

```kotlin
fun check(name: String?): Boolean {
    if (name != null) {
        return name.isNotEmpty()
    }
    return false
}
```

## 2ã€å®‰å…¨è°ƒç”¨è¿ç®—ç¬¦ï¼š?.

å®‰å…¨è°ƒç”¨è¿ç®—ç¬¦ï¼š`?.` å…è®¸æŠŠä¸€æ¬¡ null æ£€æŸ¥å’Œä¸€æ¬¡æ–¹æ³•è°ƒç”¨åˆå¹¶ä¸ºä¸€ä¸ªæ“ä½œï¼Œå¦‚æœå˜é‡å€¼éç©ºï¼Œåˆ™æ–¹æ³•æˆ–å±æ€§ä¼šè¢«è°ƒç”¨ï¼Œå¦åˆ™ç›´æ¥è¿”å› null

ä¾‹å¦‚ï¼Œä»¥ä¸‹ä¸¤ç§å†™æ³•æ˜¯å®Œå…¨ç­‰åŒçš„ï¼š

```kotlin
fun check(name: String?) {
    if (name != null) {
        println(name.toUpperCase())
    } else {
        println(null)
    }
}

fun check(name: String?) {
    println(name?.toUpperCase())
}
```

## 3ã€Elvis è¿ç®—ç¬¦ï¼š?:

Elvis è¿ç®—ç¬¦ï¼š`?:` ç”¨äºæ›¿ä»£ `?.` ç›´æ¥è¿”å›é»˜è®¤å€¼ null çš„æƒ…å†µï¼ŒElvis è¿ç®—ç¬¦æ¥æ”¶ä¸¤ä¸ªè¿ç®—æ•°ï¼Œå¦‚æœç¬¬ä¸€ä¸ªè¿ç®—æ•°ä¸ä¸º null ï¼Œè¿ç®—ç»“æœå°±æ˜¯å…¶è¿ç®—ç»“æœå€¼ï¼Œå¦‚æœç¬¬ä¸€ä¸ªè¿ç®—æ•°ä¸º null ï¼Œè¿ç®—ç»“æœå°±æ˜¯ç¬¬äºŒä¸ªè¿ç®—æ•°

ä¾‹å¦‚ï¼Œä»¥ä¸‹ä¸¤ç§å†™æ³•æ˜¯å®Œå…¨ç­‰åŒçš„ï¼š

```kotlin
fun check(name: String?) {
    if (name != null) {
        println(name)
    } else {
        println("default")
    }
}

fun check(name: String?) {
    println(name ?: "default")
}
```

## 4ã€å®‰å…¨è½¬æ¢è¿ç®—ç¬¦ï¼šas?

å®‰å…¨è½¬æ¢è¿ç®—ç¬¦ï¼š`as?` ç”¨äºæŠŠå€¼è½¬æ¢ä¸ºæŒ‡å®šçš„ç±»å‹ï¼Œå¦‚æœå€¼ä¸é€‚åˆè¯¥ç±»å‹åˆ™è¿”å› null

```kotlin
fun check(any: Any?) {
    val result = any as? String
    println(result ?: println("is not String"))
}
```

## 5ã€éç©ºæ–­è¨€ï¼š!!

éç©ºæ–­è¨€ç”¨äºæŠŠä»»ä½•å€¼è½¬æ¢ä¸ºéç©ºç±»å‹ï¼Œå¦‚æœå¯¹ null å€¼åšéç©ºæ–­è¨€ï¼Œåˆ™ä¼šæŠ›å‡ºå¼‚å¸¸

```kotlin
fun main() {
    var name: String? = "leavesC"
    check(name) //7

    name = null
    check(name) //kotlinNullPointerException
}

fun check(name: String?) {
    println(name!!.length)
}
```

## 6ã€å¯ç©ºç±»å‹çš„æ‰©å±•

ä¸ºå¯ç©ºç±»å‹å®šä¹‰æ‰©å±•å‡½æ•°æ˜¯ä¸€ç§æ›´å¼ºå¤§çš„å¤„ç† null å€¼çš„æ–¹å¼ï¼Œå¯ä»¥å…è®¸æ¥æ”¶è€…ä¸º null çš„è°ƒç”¨ï¼Œå¹¶åœ¨è¯¥å‡½æ•°ä¸­å¤„ç† null ï¼Œè€Œä¸æ˜¯åœ¨ç¡®ä¿å˜é‡ä¸ä¸º null ä¹‹åå†è°ƒç”¨å®ƒçš„æ–¹æ³•

ä¾‹å¦‚ï¼Œå¦‚ä¸‹æ–¹æ³•å¯ä»¥è¢«æ­£å¸¸è°ƒç”¨è€Œä¸ä¼šå‘ç”Ÿç©ºæŒ‡é’ˆå¼‚å¸¸

```kotlin
val name: String? = null
println(name.isNullOrEmpty()) //true
```

`isNullOrEmpty()` çš„æ–¹æ³•ç­¾åå¦‚ä¸‹æ‰€ç¤ºï¼Œå¯ä»¥çœ‹åˆ°è¿™æ˜¯ä¸ºå¯ç©ºç±»å‹ **CharSequence?** å®šä¹‰çš„æ‰©å±•å‡½æ•°ï¼Œæ–¹æ³•ä¸­å·²ç»å¤„ç†äº†æ–¹æ³•è°ƒç”¨è€…ä¸º null çš„æƒ…å†µ

```kotlin
@kotlin.internal.InlineOnly
public inline fun CharSequence?.isNullOrEmpty(): Boolean {
    contract {
        returns(false) implies (this@isNullOrEmpty != null)
    }
    return this == null || this.length == 0
}
```

## 7ã€å¹³å°ç±»å‹

å¹³å°ç±»å‹æ˜¯ kotlin å¯¹ java æ‰€ä½œçš„ä¸€ç§å¹³è¡¡æ€§è®¾è®¡ã€‚kotlin å°†å¯¹è±¡çš„ç±»å‹åˆ†ä¸ºäº†å¯ç©ºç±»å‹å’Œä¸å¯ç©ºç±»å‹ä¸¤ç§ï¼Œä½† java å¹³å°çš„ä¸€åˆ‡å¯¹è±¡ç±»å‹å‡ä¸ºå¯ç©ºçš„ï¼Œå½“åœ¨ kotlin ä¸­å¼•ç”¨ java å˜é‡æ—¶ï¼Œå¦‚æœå°†æ‰€æœ‰å˜é‡å‡å½’ä¸ºå¯ç©ºç±»å‹ï¼Œæœ€ç»ˆå°†å¤šå‡ºè®¸å¤š null æ£€æŸ¥ï¼›å¦‚æœå‡çœ‹æˆä¸å¯ç©ºç±»å‹ï¼Œé‚£ä¹ˆå°±å¾ˆå®¹æ˜“å°±å†™å‡ºå¿½ç•¥äº†NPE é£é™©çš„ä»£ç ã€‚ä¸ºäº†å¹³è¡¡ä¸¤è€…ï¼Œkotlin å¼•å…¥äº†å¹³å°ç±»å‹ï¼Œå³å½“åœ¨ kotlin ä¸­å¼•ç”¨ java å˜é‡å€¼æ—¶ï¼Œæ—¢å¯ä»¥å°†ä¹‹çœ‹æˆå¯ç©ºç±»å‹ï¼Œä¹Ÿå¯ä»¥å°†ä¹‹çœ‹æˆä¸å¯ç©ºç±»å‹ï¼Œç”±å¼€å‘è€…è‡ªå·±æ¥å†³å®šæ˜¯å¦è¿›è¡Œ null æ£€æŸ¥

# ä¹ã€ç±»å‹çš„æ£€æŸ¥ä¸è½¬æ¢

## 1ã€ç±»å‹æ£€æŸ¥

**is ä¸ !is** æ“ä½œç¬¦ç”¨äºåœ¨è¿è¡Œæ—¶æ£€æŸ¥å¯¹è±¡æ˜¯å¦ç¬¦åˆç»™å®šç±»å‹ï¼š

```kotlin
fun main() {
    val strValue = "leavesC"
    parserType(strValue) //value is String , length : 7
    val intValue = 100
    parserType(intValue) //value is Int , toLong : 100
    val doubleValue = 100.22
    parserType(doubleValue) //value !is Long
    val longValue = 200L
    parserType(longValue) //unknown
}

fun parserType(value: Any) {
    when (value) {
        is String -> println("value is String , length : ${value.length}")
        is Int -> println("value is Int , toLong : ${value.toLong()}")
        !is Long -> println("value !is Long")
        else -> println("unknown")
    }
}
```

åŒæ—¶ï¼Œis æ“ä½œç¬¦ä¹Ÿé™„å¸¦äº†ä¸€ä¸ªæ™ºèƒ½è½¬æ¢åŠŸèƒ½ã€‚åœ¨è®¸å¤šæƒ…å†µä¸‹ï¼Œä¸éœ€è¦åœ¨ kotlin ä¸­ä½¿ç”¨æ˜¾å¼è½¬æ¢æ“ä½œç¬¦ï¼Œå› ä¸ºç¼–è¯‘å™¨è·Ÿè¸ªä¸å¯å˜å€¼çš„ is æ£€æŸ¥ä»¥åŠæ˜¾å¼è½¬æ¢ï¼Œå¹¶åœ¨éœ€è¦æ—¶è‡ªåŠ¨æ’å…¥å®‰å…¨çš„è½¬æ¢

ä¾‹å¦‚ï¼Œåœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œå½“åˆ¤æ–­ value ä¸º String ç±»å‹é€šè¿‡æ—¶ï¼Œå°±å¯ä»¥ç›´æ¥å°† value å½“åš String ç±»å‹å˜é‡å¹¶è°ƒç”¨å…¶å†…éƒ¨å±æ€§ï¼Œè¿™ä¸ªè¿‡ç¨‹å°±å«åšæ™ºèƒ½è½¬æ¢

ç¼–è¯‘å™¨ä¼šæŒ‡å®šæ ¹æ®ä¸Šä¸‹æ–‡ç¯å¢ƒï¼Œå°†å˜é‡æ™ºèƒ½è½¬æ¢ä¸ºåˆé€‚çš„ç±»å‹

```kotlin
if (value !is String) return
//å¦‚æœ value é String ç±»å‹æ—¶ç›´æ¥è¢« return äº†ï¼Œæ‰€ä»¥æ­¤å¤„å¯ä»¥ç›´æ¥è®¿é—®å…¶ length å±æ€§
println(value.length)

// || å³ä¾§çš„ value è¢«è‡ªåŠ¨éšå¼è½¬æ¢ä¸ºå­—ç¬¦ä¸²ï¼Œæ‰€ä»¥å¯ä»¥ç›´æ¥è®¿é—®å…¶ length å±æ€§
if (value !is String || value.length > 0) {

}

// && å³ä¾§çš„ value è¢«è‡ªåŠ¨éšå¼è½¬æ¢ä¸ºå­—ç¬¦ä¸²ï¼Œæ‰€ä»¥å¯ä»¥ç›´æ¥è®¿é—®å…¶ length å±æ€§
if (value is String && value.length > 0) {

}
```

## 2ã€ä¸å®‰å…¨çš„è½¬æ¢æ“ä½œç¬¦

å¦‚æœè½¬æ¢æ˜¯ä¸å¯èƒ½çš„ï¼Œè½¬æ¢æ“ä½œç¬¦ `as` ä¼šæŠ›å‡ºä¸€ä¸ªå¼‚å¸¸ã€‚å› æ­¤ï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸ºä¸å®‰å…¨çš„è½¬æ¢æ“ä½œç¬¦

```kotlin
fun main() {
    parserType("leavesC") //value is String , length is 7
    parserType(10) //ä¼šæŠ›å‡ºå¼‚å¸¸ ClassCastException
}

fun parserType(value: Any) {
    val tempValue = value as String
    println("value is String , length is ${tempValue.length}")
}
```

éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œnull ä¸èƒ½è½¬æ¢ä¸º String å˜é‡ï¼Œå› ä¸ºè¯¥ç±»å‹**ä¸æ˜¯å¯ç©ºçš„**

å› æ­¤å¦‚ä¸‹è½¬æ¢ä¼šæŠ›å‡ºå¼‚å¸¸

```kotlin
val x = null
val y: String = x as String //ä¼šæŠ›å‡ºå¼‚å¸¸ TypeCastException
```

ä¸ºäº†åŒ¹é…å®‰å…¨ï¼Œå¯ä»¥è½¬æ¢çš„ç±»å‹å£°æ˜ä¸ºå¯ç©ºç±»å‹

```kotlin
val x = null
val y: String? = x as String?
```

## 3ã€å®‰å…¨çš„è½¬æ¢æ“ä½œç¬¦

å¯ä»¥ä½¿ç”¨å®‰å…¨è½¬æ¢æ“ä½œç¬¦ as? æ¥é¿å…åœ¨è½¬æ¢æ—¶æŠ›å‡ºå¼‚å¸¸ï¼Œå®ƒåœ¨å¤±è´¥æ—¶è¿”å› null

```kotlin
val x = null
val y: String? = x as? String
```

å°½ç®¡ä»¥ä¸Šä¾‹å­ as? çš„å³è¾¹æ˜¯ä¸€ä¸ªéç©ºç±»å‹çš„ Stringï¼Œä½†æ˜¯å…¶è½¬æ¢çš„ç»“æœæ˜¯å¯ç©ºçš„

# åã€ç±»

## 1ã€åŸºæœ¬æ¦‚å¿µ

ç±»çš„æ¦‚å¿µå°±æ˜¯æŠŠæ•°æ®å’Œå¤„ç†æ•°æ®çš„ä»£ç å°è£…æˆä¸€ä¸ªå•ä¸€çš„å®ä½“ã€‚åœ¨ Java ä¸­ï¼Œæ•°æ®å­˜å‚¨åœ¨ä¸€ä¸ªç§æœ‰å­—æ®µä¸­ï¼Œé€šè¿‡æä¾›è®¿é—®å™¨æ–¹æ³•ï¼š**getter å’Œ setter** æ¥è®¿é—®æˆ–è€…ä¿®æ”¹æ•°æ®

åœ¨ Java ä¸­ä»¥ä¸‹çš„ç¤ºä¾‹ä»£ç æ˜¯å¾ˆå¸¸è§çš„ï¼ŒPoint ç±»åŒ…å«å¾ˆå¤šé‡å¤çš„ä»£ç ï¼šé€šè¿‡æ„é€ å‡½æ•°æŠŠå‚æ•°èµ‹å€¼ç»™æœ‰ç€ç›¸åŒåç§°çš„å­—æ®µï¼Œé€šè¿‡ getter æ¥è·å–å±æ€§å€¼

```java
public final class Point {

   private final int x;
   
   private final int y;
   
   public Point(int x, int y) {
      this.x = x;
      this.y = y;
   }

   public final int getX() {
      return this.x;
   }

   public final int getY() {
      return this.y;
   }
   
}
```

ä½¿ç”¨ kotlin æ¥å£°æ˜ Point ç±»åˆ™åªéœ€è¦ä¸€è¡Œä»£ç ï¼Œä¸¤è€…å®Œå…¨ç­‰åŒ

```kotlin
class Point(val x: Int, val y: Int)
```

kotlin ä¹Ÿä½¿ç”¨å…³é”®å­— **class** æ¥å£°æ˜ç±»ï¼Œç±»å£°æ˜ç”±ç±»åã€ç±»å¤´ï¼ˆæŒ‡å®šå…¶ç±»å‹å‚æ•°ã€ä¸»æ„é€ å‡½æ•°ç­‰ï¼‰ä»¥åŠç”±èŠ±æ‹¬å·åŒ…å›´çš„ç±»ä½“æ„æˆï¼Œç±»å¤´ä¸ç±»ä½“éƒ½æ˜¯å¯é€‰çš„ï¼Œå¦‚æœä¸€ä¸ªç±»æ²¡æœ‰ç±»ä½“ï¼Œå¯ä»¥çœç•¥èŠ±æ‹¬å·ã€‚æ­¤å¤–ï¼Œkotlin ä¸­ç±»é»˜è®¤æ˜¯ **publishï¼ˆå…¬æœ‰çš„ï¼‰ ä¸” final ï¼ˆä¸å¯ç»§æ‰¿ï¼‰çš„**

kotlin åŒºåˆ†äº†**ä¸»æ„é€ æ–¹æ³•ï¼ˆåœ¨ç±»ä½“å¤–éƒ¨å£°æ˜ï¼‰å’Œæ¬¡æ„é€ æ–¹æ³•ï¼ˆåœ¨ç±»ä½“å†…éƒ¨å£°æ˜ï¼‰**ï¼Œä¸€ä¸ªç±»å¯ä»¥æœ‰ä¸€ä¸ªä¸»æ„é€ å‡½æ•°å’Œå¤šä¸ªæ¬¡æ„é€ å‡½æ•°ï¼Œæ­¤å¤–ä¹Ÿå…è®¸åœ¨åˆå§‹åŒ–ä»£ç å—ä¸­ `init` æ·»åŠ é¢å¤–çš„åˆå§‹åŒ–é€»è¾‘

## 2ã€ä¸»æ„é€ å‡½æ•°

ä¸»æ„é€ å‡½æ•°æ˜¯ç±»å¤´çš„ä¸€éƒ¨åˆ†ï¼Œè·Ÿåœ¨ç±»åï¼ˆå’Œå¯é€‰çš„ç±»å‹å‚æ•°ï¼‰åï¼Œä¸»æ„é€ å‡½æ•°çš„å‚æ•°å¯ä»¥æ˜¯å¯å˜çš„ï¼ˆvarï¼‰æˆ–åªè¯»çš„ï¼ˆvalï¼‰

```kotlin
class Point constructor(val x: Int, val y: Int) {

}
```

å¦‚æœä¸»æ„é€ å‡½æ•°æ²¡æœ‰ä»»ä½•æ³¨è§£æˆ–è€…å¯è§æ€§ä¿®é¥°ç¬¦ï¼Œå¯ä»¥çœç•¥ constructor å…³é”®å­—

```kotlin
class Point(val x: Int, val y: Int) {

}

//å¦‚æœä¸åŒ…å«ç±»ä½“ï¼Œåˆ™å¯ä»¥çœç•¥èŠ±æ‹¬å·
class Point(val x: Int, val y: Int)
```

å¦‚æœæ„é€ å‡½æ•°æœ‰æ³¨è§£æˆ–å¯è§æ€§ä¿®é¥°ç¬¦ï¼Œåˆ™ constructor å…³é”®å­—æ˜¯å¿…éœ€çš„ï¼Œå¹¶ä¸”è¿™äº›ä¿®é¥°ç¬¦åœ¨å®ƒå‰é¢

```kotlin
class Point public @Inject constructor(val x: Int, val y: Int) {

}
```

ä¸»æ„é€ å‡½æ•°ä¸èƒ½åŒ…å«ä»»ä½•çš„ä»£ç ï¼Œåˆå§‹åŒ–çš„ä»£ç å¯ä»¥æ”¾åˆ°ä»¥ init å…³é”®å­—ä½œä¸ºå‰ç¼€çš„åˆå§‹åŒ–å—ï¼ˆinitializer blocksï¼‰ä¸­ï¼Œåˆå§‹åŒ–å—åŒ…å«äº†åœ¨ç±»è¢«åˆ›å»ºæ—¶æ‰§è¡Œçš„ä»£ç ï¼Œä¸»æ„é€ å‡½æ•°çš„å‚æ•°å¯ä»¥åœ¨åˆå§‹åŒ–å—ä¸­ä½¿ç”¨ã€‚å¦‚æœéœ€è¦çš„è¯ï¼Œä¹Ÿå¯ä»¥åœ¨ä¸€ä¸ªç±»ä¸­å£°æ˜å¤šä¸ªåˆå§‹åŒ–è¯­å¥å—ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œæ„é€ å‡½æ•°çš„å‚æ•°å¦‚æœç”¨ val/var è¿›è¡Œä¿®é¥°ï¼Œåˆ™ç›¸å½“äºåœ¨ç±»å†…éƒ¨å£°æ˜äº†ä¸€ä¸ªåŒåçš„å…¨å±€å±æ€§ã€‚å¦‚æœä¸åŠ  val/var è¿›è¡Œä¿®é¥°ï¼Œåˆ™æ„é€ å‡½æ•°åªèƒ½åœ¨ init å‡½æ•°å—å’Œå…¨å±€å±æ€§åˆå§‹åŒ–æ—¶è¿›è¡Œå¼•ç”¨

æ­¤å¤–ï¼Œè¦åˆ›å»ºä¸€ä¸ªç±»çš„å®ä¾‹ä¸éœ€è¦ä½¿ç”¨ Java ä¸­çš„ new å…³é”®å­—ï¼Œåƒæ™®é€šå‡½æ•°ä¸€æ ·è°ƒç”¨æ„é€ å‡½æ•°å³å¯

```kotlin
class Point(val x: Int, val y: Int) {

    init {
        println("initializer blocks , x value is: $x , y value is: $y")
    }

}

fun main() {
    Point(1, 2) // initializer blocks , x value is: 1 , y value is: 2
}
```

ä¸»æ„é€ å‡½æ•°çš„å‚æ•°ä¹Ÿå¯ä»¥åœ¨ç±»ä½“å†…å£°æ˜çš„å±æ€§åˆå§‹åŒ–å™¨ä¸­ä½¿ç”¨

```kotlin
class Point(val x: Int, val y: Int) {

    private val localX = x + 1

    private val localY = y + 1

    init {
        println("initializer blocks , x value is: $x , y value is: $y")
        println("initializer blocks , localX value is: $localX , localY value is: $localY")
    }

}

fun main() {
    Point(1, 2)
    //initializer blocks , x value is: 1 , y value is: 2
    //initializer blocks , localX value is: 2 , localY value is: 3
}
```

## 3ã€æ¬¡æ„é€ å‡½æ•°

ç±»ä¹Ÿå¯ä»¥å£°æ˜åŒ…å«å‰ç¼€ constructor çš„æ¬¡æ„é€ å‡½æ•°ã€‚å¦‚æœç±»æœ‰ä¸€ä¸ªä¸»æ„é€ å‡½æ•°ï¼Œæ¯ä¸ªæ¬¡æ„é€ å‡½æ•°éƒ½éœ€è¦ç›´æ¥å§”æ‰˜ç»™ä¸»æ„é€ å‡½æ•°æˆ–è€…å§”æ‰˜ç»™å¦ä¸€ä¸ªæ¬¡æ„é€ å‡½æ•°ä»¥æ­¤è¿›è¡Œé—´æ¥å§”æ‰˜ï¼Œç”¨ this å…³é”®å­—æ¥è¿›è¡ŒæŒ‡å®šå³å¯

```kotlin
class Point(val x: Int, val y: Int) {

    private val localX = x + 1

    private val localY = y + 1

    init {
        println("initializer blocks , x value is: $x , y value is: $y")
        println("initializer blocks , localX value is: $localX , localY value is: $localY")
    }

    constructor(base: Int) : this(base + 1, base + 1) {
        println("constructor(base: Int)")
    }

    constructor(base: Long) : this(base.toInt()) {
        println("constructor(base: Long)")
    }

}

fun main() {
    Point(100)
    //initializer blocks , x value is: 101 , y value is: 101
    //initializer blocks , localX value is: 102 , localY value is: 102
    //constructor(base: Int)
    Point(100L)
    //initializer blocks , x value is: 101 , y value is: 101
    //initializer blocks , localX value is: 102 , localY value is: 102
    //constructor(base: Int)
    //constructor(base: Long)
}
```

åˆå§‹åŒ–å—ä¸­çš„ä»£ç å®é™…ä¸Šä¼šæˆä¸ºä¸»æ„é€ å‡½æ•°çš„ä¸€éƒ¨åˆ†ï¼Œå§”æ‰˜ç»™ä¸»æ„é€ å‡½æ•°ä¼šä½œä¸ºæ¬¡æ„é€ å‡½æ•°çš„ç¬¬ä¸€æ¡è¯­å¥ï¼Œå› æ­¤æ‰€æœ‰åˆå§‹åŒ–å—ä¸­çš„ä»£ç éƒ½ä¼šåœ¨æ¬¡æ„é€ å‡½æ•°ä½“ä¹‹å‰æ‰§è¡Œã€‚å³ä½¿è¯¥ç±»æ²¡æœ‰ä¸»æ„é€ å‡½æ•°ï¼Œè¿™ç§å§”æ‰˜ä»ä¼šéšå¼å‘ç”Ÿï¼Œå¹¶ä¸”ä»ä¼šæ‰§è¡Œåˆå§‹åŒ–å—ã€‚å¦‚æœä¸€ä¸ªéæŠ½è±¡ç±»æ²¡æœ‰å£°æ˜ä»»ä½•ï¼ˆä¸»æˆ–æ¬¡ï¼‰æ„é€ å‡½æ•°ï¼Œä¼šé»˜è®¤ç”Ÿæˆä¸€ä¸ªä¸å¸¦å‚æ•°çš„å…¬æœ‰ä¸»æ„é€ å‡½æ•°

## 4ã€å±æ€§

åœ¨ Java ä¸­ï¼Œå­—æ®µå’Œå…¶è®¿é—®å™¨çš„ç»„åˆè¢«ç§°ä½œå±æ€§ã€‚åœ¨ kotlin ä¸­ï¼Œå±æ€§æ˜¯å¤´ç­‰çš„è¯­è¨€ç‰¹æ€§ï¼Œå®Œå…¨æ›¿ä»£äº†å­—æ®µå’Œè®¿é—®å™¨æ–¹æ³•ã€‚åœ¨ç±»ä¸­å£°æ˜ä¸€ä¸ªå±æ€§å’Œå£°æ˜ä¸€ä¸ªå˜é‡ä¸€æ ·æ˜¯ä½¿ç”¨ val å’Œ var å…³é”®å­—ã€‚val å˜é‡åªæœ‰ä¸€ä¸ª getter ï¼Œvar å˜é‡æ—¢æœ‰ getter ä¹Ÿæœ‰ setter

```kotlin
fun main() {
    val user = User()
    println(user.name)
    user.age = 200
}

class User() {

    val name: String = "leavesC"

    var age: Int = 25

}
```

## 5ã€è‡ªå®šä¹‰è®¿é—®å™¨

è®¿é—®å™¨çš„é»˜è®¤å®ç°é€»è¾‘å¾ˆç®€å•ï¼šåˆ›å»ºä¸€ä¸ªå­˜å‚¨å€¼çš„å­—æ®µï¼Œä»¥åŠè¿”å›å±æ€§å€¼çš„ getter å’Œæ›´æ–°å±æ€§å€¼çš„ setterã€‚å¦‚æœéœ€è¦çš„è¯ï¼Œä¹Ÿå¯ä»¥è‡ªå®šä¹‰è®¿é—®å™¨

ä¾‹å¦‚ï¼Œä»¥ä¸‹å°±å£°æ˜äº†ä¸‰ä¸ªå¸¦è‡ªå®šä¹‰è®¿é—®å™¨çš„å±æ€§

```kotlin
class Point(val x: Int, val y: Int) {

    val isEquals1: Boolean
        get() {
            return x == y
        }

    val isEquals2
        get() = x == y

    var isEquals3 = false
        get() = x > y
        set(value) {
            field = !value
        }

}
```

å¦‚æœä»…éœ€è¦æ”¹å˜ä¸€ä¸ªè®¿é—®å™¨çš„å¯è§æ€§æˆ–è€…ä¸ºå…¶æ·»åŠ æ³¨è§£ï¼Œé‚£ä¹ˆå¯ä»¥å®šä¹‰è®¿é—®å™¨è€Œä¸å®šä¹‰å…¶å®ç°

```kotlin
fun main() {
    val point = Point(10, 10)
    println(point.isEquals1)
    //ä»¥ä¸‹ä»£ç ä¼šæŠ¥é”™
    //point.isEquals1 = true
}

class Point(val x: Int, val y: Int) {

    var isEquals1: Boolean = false
        get() {
            return x == y
        }
        private set
    
}
```

## 6ã€å»¶è¿Ÿåˆå§‹åŒ–

ä¸€èˆ¬åœ°ï¼Œéç©ºç±»å‹çš„å±æ€§å¿…é¡»åœ¨æ„é€ å‡½æ•°ä¸­åˆå§‹åŒ–ï¼Œä½†åƒä½¿ç”¨äº† Dagger2 è¿™ç§ä¾èµ–æ³¨å…¥æ¡†æ¶çš„é¡¹ç›®æ¥è¯´å°±ååˆ†çš„ä¸æ–¹ä¾¿äº†ï¼Œä¸ºäº†åº”å¯¹è¿™ç§æƒ…å†µï¼Œå¯ä»¥ç”¨ lateinit ä¿®é¥°ç¬¦æ¥æ ‡è®°è¯¥å±æ€§ï¼Œç”¨äºå‘Šè¯‰ç¼–è¯‘å™¨è¯¥å±æ€§ä¼šåœ¨ç¨åçš„æ—¶é—´è¢«åˆå§‹åŒ–

ç”¨ lateinit ä¿®é¥°çš„å±æ€§æˆ–å˜é‡å¿…é¡»ä¸ºéç©ºç±»å‹ï¼Œå¹¶ä¸”ä¸èƒ½æ˜¯åŸç”Ÿç±»å‹

```kotlin
class Point(val x: Int, val y: Int)

class Example {

    lateinit var point: Point

    var point2: Point

    constructor() {
        point2 = Point(10, 20)
    }
    
}
```

å¦‚æœè®¿é—®äº†ä¸€ä¸ªæœªç»è¿‡åˆå§‹åŒ–çš„ lateinit å˜é‡ï¼Œåˆ™ä¼šæŠ›å‡ºä¸€ä¸ªåŒ…å«å…·ä½“åŸå› ï¼ˆè¯¥å˜é‡æœªåˆå§‹åŒ–ï¼‰çš„å¼‚å¸¸ä¿¡æ¯

```kotlin
Exception in thread "main" kotlin.UninitializedPropertyAccessException: lateinit property point has not been initialized
```

# åä¸€ã€ç±»çš„åˆ†ç±»

## 1ã€æŠ½è±¡ç±»

å£°æ˜ä¸º abstract çš„ç±»å†…éƒ¨å¯ä»¥åŒ…å«æ²¡æœ‰å®ç°ä½“çš„æˆå‘˜æ–¹æ³•ï¼Œä¸”è¯¥æˆå‘˜æ–¹æ³•ä¹Ÿç”¨ abstract æ ‡è®°ï¼Œè¿™ç§ç±»ç§°ä¸ºæŠ½è±¡ç±»ï¼Œæ²¡æœ‰å®ç°ä½“çš„æ–¹æ³•å°±ç§°ä¸ºæŠ½è±¡æ–¹æ³•

æ­¤å¤–ï¼Œæˆ‘ä»¬å¹¶ä¸éœ€è¦ç”¨ open æ ‡æ³¨ä¸€ä¸ªæŠ½è±¡ç±»æˆ–è€…æŠ½è±¡æ–¹æ³•ï¼Œå› ä¸ºè¿™æ˜¯é»˜è®¤å£°æ˜çš„

```kotlin
abstract class BaseClass {
    abstract fun fun1()
}

class Derived : BaseClass() {
    override fun fun1() {
        
    }
}
```

## 2ã€æ•°æ®ç±»

æ•°æ®ç±»æ˜¯ä¸€ç§éå¸¸å¼ºå¤§çš„ç±»ï¼Œå¯ä»¥é¿å…é‡å¤åˆ›å»º Java ä¸­çš„ç”¨äºä¿å­˜çŠ¶æ€ä½†åˆæ“ä½œéå¸¸ç®€å•çš„ POJO çš„æ¨¡ç‰ˆä»£ç ï¼Œå®ƒä»¬é€šå¸¸åªæä¾›äº†ç”¨äºè®¿é—®å®ƒä»¬å±æ€§çš„ç®€å•çš„ getter å’Œ setter

å®šä¹‰ä¸€ä¸ªæ–°çš„æ•°æ®ç±»éå¸¸ç®€å•ï¼Œä¾‹å¦‚

```kotlin
data class Point(val x: Int, val y: Int)
```

æ•°æ®ç±»é»˜è®¤åœ°ä¸ºä¸»æ„é€ å‡½æ•°ä¸­å£°æ˜çš„æ‰€æœ‰å±æ€§ç”Ÿæˆäº†å¦‚ä¸‹å‡ ä¸ªæ–¹æ³•

- getterã€setterï¼ˆéœ€è¦æ˜¯ varï¼‰
- componentN()ã€‚æŒ‰ä¸»æ„é€ å‡½æ•°çš„å±æ€§å£°æ˜é¡ºåºè¿›è¡Œå¯¹åº”
- copy() 
- toString()
- hashCode()
- equals()

ä¸ºäº†ç¡®ä¿ç”Ÿæˆçš„ä»£ç çš„ä¸€è‡´æ€§ä»¥åŠæœ‰æ„ä¹‰çš„è¡Œä¸ºï¼Œæ•°æ®ç±»å¿…é¡»æ»¡è¶³ä»¥ä¸‹è¦æ±‚ï¼š

- ä¸»æ„é€ å‡½æ•°éœ€è¦åŒ…å«ä¸€ä¸ªå‚æ•°
- ä¸»æ„é€ å‡½æ•°çš„æ‰€æœ‰å‚æ•°éœ€è¦æ ‡è®°ä¸º val æˆ– var
- æ•°æ®ç±»ä¸èƒ½æ˜¯æŠ½è±¡ã€å¼€æ”¾ã€å¯†å°æˆ–è€…å†…éƒ¨çš„

å¯ä»¥åˆ©ç”¨ IDEA æ¥åç¼–è¯‘æŸ¥çœ‹ Point ç±»çš„ Java å®ç°ï¼Œäº†è§£å…¶å†…éƒ¨å®ç°

```java
public final class Point {
   private final int x;
   private final int y;

   public final int getX() {
      return this.x;
   }

   public final int getY() {
      return this.y;
   }

   public Point(int x, int y) {
      this.x = x;
      this.y = y;
   }

   public final int component1() {
      return this.x;
   }

   public final int component2() {
      return this.y;
   }

   @NotNull
   public final Point copy(int x, int y) {
      return new Point(x, y);
   }

   // $FF: synthetic method
   // $FF: bridge method
   @NotNull
   public static Point copy$default(Point var0, int var1, int var2, int var3, Object var4) {
      if ((var3 & 1) != 0) {
         var1 = var0.x;
      }

      if ((var3 & 2) != 0) {
         var2 = var0.y;
      }

      return var0.copy(var1, var2);
   }

   public String toString() {
      return "Point(x=" + this.x + ", y=" + this.y + ")";
   }

   public int hashCode() {
      return this.x * 31 + this.y;
   }

   public boolean equals(Object var1) {
      if (this != var1) {
         if (var1 instanceof Point) {
            Point var2 = (Point)var1;
            if (this.x == var2.x && this.y == var2.y) {
               return true;
            }
         }

         return false;
      } else {
         return true;
      }
   }
}
```

é€šè¿‡æ•°æ®ç±»å¯ä»¥ç®€åŒ–å¾ˆå¤šçš„é€šç”¨æ“ä½œï¼Œå¯ä»¥å¾ˆæ–¹ä¾¿åœ°è¿›è¡Œï¼šæ ¼å¼åŒ–è¾“å‡ºå˜é‡å€¼ã€æ˜ å°„å¯¹è±¡åˆ°å˜é‡ã€å¯¹æ¯”å˜é‡ä¹‹é—´çš„ç›¸ç­‰æ€§ã€å¤åˆ¶å˜é‡ç­‰æ“ä½œ

```kotlin
fun main() {
    val point1 = Point(10, 20)
    val point2 = Point(10, 20)
    println("point1 toString() : $point1") //point1 toString() : Point(x=10, y=20)
    println("point2 toString() : $point2") //point2 toString() : Point(x=10, y=20)

    val (x, y) = point1
    println("point1 x is $x,point1 y is $y") //point1 x is 10,point1 y is 20

    //åœ¨ kotlin ä¸­ï¼Œâ€œ == â€ ç›¸å½“äº Java çš„ equals æ–¹æ³•
    //è€Œ â€œ === â€ ç›¸å½“äº Java çš„ â€œ == â€ æ–¹æ³•
    println("point1 == point2 : ${point1 == point2}") //point1 == point2 : true
    println("point1 === point2 : ${point1 === point2}") //point1 === point2 : false

    val point3 = point1.copy(y = 30)
    println("point3 toString() : $point3") //point3 toString() : Point(x=10, y=30)
}
```

éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œæ•°æ®ç±»çš„ `toString()ã€equals()ã€hashCode()ã€copy()` ç­‰æ–¹æ³•åªè€ƒè™‘ä¸»æ„é€ å‡½æ•°ä¸­å£°æ˜çš„å±æ€§ï¼Œå› æ­¤åœ¨æ¯”è¾ƒä¸¤ä¸ªæ•°æ®ç±»å¯¹è±¡çš„æ—¶å€™å¯èƒ½ä¼šæœ‰ä¸€äº›æ„æƒ³ä¸åˆ°çš„ç»“æœ

```kotlin
data class Point(val x: Int) {

    var y: Int = 0

}

fun main() {
    val point1 = Point(10)
    point1.y = 10

    val point2 = Point(10)
    point2.y = 20

    println("point1 == point2 : ${point1 == point2}") //point1 == point2 : true
    println("point1 === point2 : ${point1 === point2}") //point1 === point2 : false
}
```

## 3ã€å¯†å°ç±»

Sealed ç±»ï¼ˆå¯†å°ç±»ï¼‰ç”¨äºå¯¹ç±»å¯èƒ½åˆ›å»ºçš„å­ç±»è¿›è¡Œé™åˆ¶ï¼Œç”¨ Sealed ä¿®é¥°çš„ç±»çš„**ç›´æ¥å­ç±»**åªå…è®¸è¢«å®šä¹‰åœ¨ Sealed ç±»æ‰€åœ¨çš„æ–‡ä»¶ä¸­ï¼ˆå¯†å°ç±»çš„é—´æ¥ç»§æ‰¿è€…å¯ä»¥å®šä¹‰åœ¨å…¶ä»–æ–‡ä»¶ä¸­ï¼‰ï¼Œè¿™æœ‰åŠ©äºå¸®åŠ©å¼€å‘è€…æŒæ¡çˆ¶ç±»ä¸å­ç±»ä¹‹é—´çš„å˜åŠ¨å…³ç³»ï¼Œé¿å…ç”±äºä»£ç æ›´è¿­å¯¼è‡´çš„æ½œåœ¨ bugï¼Œä¸”å¯†å°ç±»çš„æ„é€ å‡½æ•°åªèƒ½æ˜¯ private çš„

ä¾‹å¦‚ï¼Œå¯¹äº View ç±»ï¼Œå…¶å­ç±»åªèƒ½å®šä¹‰åœ¨ä¸ä¹‹åŒä¸€ä¸ªæ–‡ä»¶é‡Œï¼ŒSealed ä¿®é¥°ç¬¦ä¿®é¥°çš„ç±»ä¹Ÿéšå«è¡¨ç¤ºè¯¥ç±»ä¸º open ç±»ï¼Œå› æ­¤æ— éœ€å†æ˜¾å¼åœ°æ·»åŠ  open ä¿®é¥°ç¬¦

```kotlin
sealed class View {

    fun click() {

    }

}

class Button : View() {

}

class TextView : View() {

}
```

å› ä¸º Sealed ç±»çš„å­ç±»å¯¹äºç¼–è¯‘å™¨æ¥è¯´æ˜¯å¯æ§çš„ï¼Œæ‰€ä»¥å¦‚æœåœ¨ when è¡¨è¾¾å¼ä¸­å¤„ç†äº†æ‰€æœ‰ Sealed ç±»çš„å­ç±»ï¼Œé‚£å°±ä¸éœ€è¦å†æä¾› else é»˜è®¤åˆ†æ”¯ã€‚å³ä½¿ä»¥åç”±äºä¸šåŠ¡å˜åŠ¨åˆæ–°å¢äº† View å­ç±»ï¼Œç¼–è¯‘å™¨ä¹Ÿä¼šæ£€æµ‹åˆ° check æ–¹æ³•ç¼ºå°‘åˆ†æ”¯æ£€æŸ¥åæŠ¥é”™ï¼Œæ‰€ä»¥è¯´ check æ–¹æ³•æ˜¯ç±»å‹å®‰å…¨çš„

```kotlin
fun check(view: View): Boolean {
    when (view) {
        is Button -> {
            println("is Button")
            return true
        }
        is TextView -> {
            println("is TextView")
            return true
        }
    }
}
```

## 4ã€æšä¸¾ç±»

kotlin ä¹Ÿæä¾›äº†æšä¸¾çš„å®ç°ï¼Œç›¸æ¯” Java éœ€è¦å¤šä½¿ç”¨ class å…³é”®å­—æ¥å£°æ˜æšä¸¾

```kotlin
enum class Day {
    SUNDAY, MONDAY, TUESDAY, WEDNESDAY, THURSDAY, FRIDAY, SATURDAY
}
```

æšä¸¾å¯ä»¥å£°æ˜ä¸€äº›å‚æ•°

```kotlin
enum class Day(val index: Int) {
    SUNDAY(0), MONDAY(1), TUESDAY(2), WEDNESDAY(3), THURSDAY(4), FRIDAY(5), SATURDAY(6)
}
```

æ­¤å¤–ï¼Œæšä¸¾ä¹Ÿå¯ä»¥å®ç°æ¥å£

```kotlin
interface OnChangedListener {

    fun onChanged()

}

enum class Day(val index: Int) : OnChangedListener {
    SUNDAY(0) {
        override fun onChanged() {

        }
    },
    MONDAY(1) {
        override fun onChanged() {
            
        }
    }
}
```

æšä¸¾ä¹ŸåŒ…å«æœ‰ä¸€äº›å…±æœ‰å‡½æ•°

```kotlin
fun main() {
    val day = Day.FRIDAY
    //è·å–å€¼
    val value = day.index  //5
    //é€šè¿‡ String è·å–ç›¸åº”çš„æšä¸¾å€¼
    val value1 = Day.valueOf("SUNDAY") //SUNDAY
    //è·å–åŒ…å«æ‰€æœ‰æšä¸¾å€¼çš„æ•°ç»„
    val value2 = Day.values()
    //è·å–æšä¸¾å
    val value3 = Day.SUNDAY.name //SUNDAY
    //è·å–æšä¸¾å£°æ˜çš„ä½ç½®
    val value4 = Day.TUESDAY.ordinal //2
}
```

## 5ã€åµŒå¥—ç±»

åœ¨ kotlin ä¸­åœ¨ç±»é‡Œé¢å†å®šä¹‰çš„ç±»é»˜è®¤æ˜¯åµŒå¥—ç±»ï¼Œæ­¤æ—¶åµŒå¥—ç±»ä¸ä¼šåŒ…å«å¯¹å¤–éƒ¨ç±»çš„éšå¼å¼•ç”¨

```kotlin
class Outer {

    private val bar = 1

    class Nested {
        fun foo1() = 2
        //é”™è¯¯
        //fun foo2() = bar
    }
}

fun main() {
    val demo = Outer.Nested().foo1()
}
```

ä»¥ä¸Šä»£ç é€šè¿‡ IDEA åç¼–è¯‘åå¯ä»¥çœ‹åˆ°å…¶å†…éƒ¨çš„ Java å®ç°æ–¹å¼

å¯ä»¥çœ‹åˆ° Nested å…¶å®å°±æ˜¯ä¸€ä¸ªé™æ€ç±»ï¼Œå› æ­¤ foo2() ä¸èƒ½è®¿é—®å¤–éƒ¨ç±»çš„éé™æ€æˆå‘˜ï¼Œä¹Ÿä¸ç”¨å…ˆå£°æ˜ Outer å˜é‡å†æŒ‡å‘ Nested ç±»ï¼Œè€Œæ˜¯ç›´æ¥é€šè¿‡ Outer  ç±»æŒ‡å‘ Nested ç±»

```kotlin
public final class Outer {
   private final int bar = 1;

   public static final class Nested {
      public final int foo1() {
         return 2;
      }
   }
}

public final class MainkotlinKt {
   public static final void main(@NotNull String[] args) {
      Intrinsics.checkParameterIsNotNull(args, "args");
      int demo = (new Outer.Nested()).foo1();
   }
}
```

## 6ã€å†…éƒ¨ç±»

å¦‚æœéœ€è¦å»è®¿é—®å¤–éƒ¨ç±»çš„æˆå‘˜ï¼Œéœ€è¦ç”¨ inner ä¿®é¥°ç¬¦æ¥æ ‡æ³¨è¢«åµŒå¥—çš„ç±»ï¼Œè¿™ç§°ä¸ºå†…éƒ¨ç±»ã€‚å†…éƒ¨ç±»ä¼šéšå¼æŒæœ‰å¯¹å¤–éƒ¨ç±»çš„å¼•ç”¨

```kotlin
class Outer {

    private val bar = 1

    inner class Nested {
        fun foo1() = 2
        fun foo2() = bar
    }
}

fun main() {
    val demo = Outer().Nested().foo2()
}
```

å†æ¥çœ‹å…¶å†…éƒ¨çš„ Java å®ç°æ–¹å¼

ä½¿ç”¨ inner æ¥å£°æ˜ Nested ç±»åï¼Œå°±ç›¸å½“äºå°†ä¹‹å£°æ˜ä¸ºéé™æ€å†…éƒ¨ç±»ï¼Œå› æ­¤ foo2() èƒ½è®¿é—®å…¶å¤–éƒ¨ç±»çš„éé™æ€æˆå‘˜ï¼Œåœ¨å£°æ˜ Nested å˜é‡å‰ä¹Ÿéœ€è¦é€šè¿‡ Outer å˜é‡æ¥æŒ‡å‘å…¶å†…éƒ¨çš„ Nested ç±»

```kotlin
public final class Outer {
   private final int bar = 1;

   public final class Nested {
      public final int foo1() {
         return 2;
      }

      public final int foo2() {
         return Outer.this.bar;
      }
   }
}

public final class MainkotlinKt {
   public static final void main(@NotNull String[] args) {
      Intrinsics.checkParameterIsNotNull(args, "args");
      int demo = (new Outer().new Nested()).foo2();
   }
}
```

| ç±»Aåœ¨ç±»Bä¸­å£°æ˜               | åœ¨Javaä¸­       | åœ¨kotlinä¸­    |
| ---------------------------- | -------------- | ------------- |
| åµŒå¥—ç±»ï¼ˆä¸å­˜å‚¨å¤–éƒ¨ç±»çš„å¼•ç”¨ï¼‰ | static class A | class A       |
| å†…éƒ¨ç±»ï¼ˆå­˜å‚¨å¤–éƒ¨ç±»çš„å¼•ç”¨ï¼‰   | class A        | inner class A |

## 7ã€åŒ¿åå†…éƒ¨ç±»

å¯ä»¥ä½¿ç”¨**å¯¹è±¡è¡¨è¾¾å¼**æ¥åˆ›å»ºåŒ¿åå†…éƒ¨ç±»å®ä¾‹

```kotlin
interface OnClickListener {

    fun onClick()

}

class View {

    fun setClickListener(clickListener: OnClickListener) {

    }

}

fun main() {
    val view = View()
    view.setClickListener(object : OnClickListener {
        override fun onClick() {

        }

    })
}
```

## 8ã€å†…è”ç±»

åœ¨æœ‰äº›æ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦å¯¹åŸç”Ÿç±»å‹è¿›è¡ŒåŒ…è£…ä»¥ä¾¿æå‡ç¨‹åºçš„å¥å£®æ€§ã€‚ä¾‹å¦‚ï¼Œå¯¹äº `sendEmail` æ–¹æ³•çš„å…¥å‚å‚æ•°è€Œè¨€ï¼Œæˆ‘ä»¬æ— æ³•ä¸¥æ ¼é™åˆ¶å…¥å‚å‚æ•°çš„å«ä¹‰ç±»å‹ï¼Œæœ‰çš„å¼€å‘è€…å¯èƒ½ä¼šå°† delay ç†è§£ä¸ºä»¥æ¯«ç§’ä¸ºå•ä½ï¼Œæœ‰çš„å¼€å‘è€…å¯èƒ½åˆä¼šç†è§£ä¸ºä»¥åˆ†é’Ÿä¸ºå•ä½

```kotlin
fun sendEmail(delay: Long) {
    println(delay)
}
```

ä¸ºäº†æå‡ç¨‹åºçš„å¥å£®æ€§ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡å£°æ˜ä¸€ä¸ªåŒ…è£…ç±»æ¥ä½œä¸ºå‚æ•°ç±»å‹ï¼š

```kotlin
fun sendEmail(delay: Time) {
    println(delay.second)
}

class Time(val second: Long)

class Minute(private val count: Int) {

    fun toTime(): Time {
        return Time(count * 60L)
    }

}

fun main() {
    sendEmail(Minute(10).toTime())
}
```

è¿™æ ·ï¼Œåœ¨ä»£ç æºå¤´ä¸Šå°±é™åˆ¶äº†å¼€å‘è€…èƒ½å¤Ÿä¼ å…¥çš„å‚æ•°ç±»å‹ï¼Œå¼€å‘è€…é€šè¿‡ç±»åå°±èƒ½ç›´æ¥è¡¨è¾¾å‡ºè‡ªå·±å¸Œæœ›çš„æ—¶é—´å¤§å°ã€‚ç„¶è€Œè¿™ç§æ–¹å¼ç”±äºé¢å¤–çš„å †å†…å­˜åˆ†é…é—®é¢˜ï¼Œå°±å¼•å…¥äº†è¿è¡Œæ—¶çš„æ€§èƒ½å¼€é”€ï¼Œæ–°çš„åŒ…è£…ç±»ç›¸å¯¹åŸç”Ÿç±»å‹æ‰€éœ€è¦çš„æ€§èƒ½æ¶ˆè€—è¦å¤§å¾—å¤šï¼Œå¯æ˜¯æ­¤æ—¶åˆéœ€è¦è€ƒè™‘ç¨‹åºçš„å¥å£®æ€§å’Œå¯è¯»æ€§ï¼Œæ‰€ä»¥åŒ…è£…ç±»ä¹Ÿæ˜¯éœ€è¦çš„

å†…è”ç±»ï¼ˆInlineClassï¼‰å°±æ˜¯ä¸ºäº†è§£å†³è¿™ä¸¤è€…çš„çŸ›ç›¾è€Œè¯ç”Ÿçš„ã€‚ä¸Šè¿°ä»£ç å¯ä»¥æ”¹ä¸ºä»¥ä¸‹æ–¹å¼æ¥å®ç°

```kotlin
fun sendEmail(delay: Time) {
    println(delay.second)
}

inline class Time(val second: Long)

inline class Minute(private val count: Int) {

    fun toTime(): Time {
        return Time(count * 60L)
    }

}

fun main() {
    sendEmail(Minute(10).toTime())
}
```

ä½¿ç”¨ inline ä¿®é¥°çš„ç±»å°±ç§°ä¸ºå†…è”ç±»ï¼Œå†…è”ç±»å¿…é¡»å«æœ‰å”¯ä¸€çš„ä¸€ä¸ªå±æ€§åœ¨ä¸»æ„é€ å‡½æ•°ä¸­åˆå§‹åŒ–ï¼Œåœ¨è¿è¡Œæ—¶å°†ä½¿ç”¨è¿™ä¸ªå”¯ä¸€å±æ€§æ¥è¡¨ç¤ºå†…è”ç±»çš„å®ä¾‹ï¼Œä»è€Œé¿å…äº†åŒ…è£…ç±»åœ¨è¿è¡Œæ—¶çš„é¢å¤–å¼€é”€

ä¾‹å¦‚ï¼Œé€šè¿‡æŸ¥çœ‹å­—èŠ‚ç å¯ä»¥çœ‹åˆ°`sendEmail` æ–¹æ³•ä¼šè¢«è§£é‡Šä¸ºä¸€ä¸ªä»¥ long ç±»å‹ä½œä¸ºå…¥å‚ç±»å‹çš„å‡½æ•°ï¼Œå¹¶ä¸åŒ…å«ä»»ä½•å¯¹è±¡

```java
public static final void sendEmail_G1aXmDY/* $FF was: sendEmail-G1aXmDY*/(long delay) {
  boolean var4 = false;
  System.out.println(delay);
}
```

# åäºŒã€æ¥å£

## 1ã€æŠ½è±¡æ–¹æ³•ä¸é»˜è®¤æ–¹æ³•

kotlin ä¸­çš„æ¥å£ä¸ Java 8 ä¸­çš„ç±»ä¼¼ï¼Œå¯ä»¥åŒ…å«æŠ½è±¡æ–¹æ³•çš„å®šä¹‰ä»¥åŠéæŠ½è±¡æ–¹æ³•çš„å®ç°ï¼Œä¸éœ€è¦ä½¿ç”¨ default å…³é”®å­—æ¥æ ‡æ³¨æœ‰é»˜è®¤å®ç°çš„éæŠ½è±¡æ–¹æ³•ï¼Œä½†åœ¨å®ç°æ¥å£çš„æŠ½è±¡æ–¹æ³•æ—¶éœ€è¦ä½¿ç”¨ override è¿›è¡Œæ ‡æ³¨

```kotlin
fun main() {
    val view = View()
    view.click()
    view.longClick()
}

class View : Clickable {
    
    override fun click() {
        println("clicked")
    }

}

interface Clickable {
    fun click()
    fun longClick() = println("longClicked")
}
```

å¦‚æœä¸€ä¸ªç±»å®ç°äº†å¤šä¸ªæ¥å£ï¼Œè€Œæ¥å£åŒ…å«å¸¦æœ‰é»˜è®¤å®ç°ä¸”ç­¾åç›¸åŒçš„æ–¹æ³•ï¼Œæ­¤æ—¶ç¼–è¯‘å™¨å°±ä¼šè¦æ±‚å¼€å‘è€…å¿…é¡»æ˜¾å¼åœ°å®ç°è¯¥æ–¹æ³•ï¼Œå¯ä»¥é€‰æ‹©åœ¨è¯¥æ–¹æ³•ä¸­è°ƒç”¨ä¸åŒæ¥å£çš„ç›¸åº”å®ç°

```kotlin
class View : Clickable, Clickable2 {

    override fun click() {
        println("clicked")
    }

    override fun longClick() {
        super<Clickable>.longClick()
        super<Clickable2>.longClick()
    }
}

interface Clickable {
    fun click()
    fun longClick() = println("longClicked")
}

interface Clickable2 {
    fun click()
    fun longClick() = println("longClicked2")
}
```

## 2ã€æŠ½è±¡å±æ€§

æ¥å£ä¸­å¯ä»¥åŒ…å«æŠ½è±¡å±æ€§å£°æ˜ï¼Œæ¥å£ä¸å®šä¹‰è¯¥æŠ½è±¡å±æ€§æ˜¯åº”è¯¥å­˜å‚¨åˆ°ä¸€ä¸ªæ”¯æŒå­—æ®µè¿˜æ˜¯é€šè¿‡ getter æ¥è·å–ï¼Œæ¥å£æœ¬èº«å¹¶ä¸åŒ…å«ä»»ä½•çŠ¶æ€ï¼Œå› æ­¤åªæœ‰å®ç°è¿™ä¸ªæ¥å£çš„ç±»åœ¨éœ€è¦çš„æƒ…å†µä¸‹ä¼šå­˜å‚¨è¿™ä¸ªå€¼

çœ‹ä»¥ä¸‹ä¾‹å­ï¼ŒButton ç±»å’Œ TextView ç±»éƒ½å®ç°äº† Clickable æ¥å£ï¼Œå¹¶éƒ½æä¾›äº†å–å¾— statusValue å€¼çš„æ–¹å¼

Button ç±»æä¾›äº†ä¸€ä¸ªè‡ªå®šä¹‰çš„ getter ç”¨äºåœ¨æ¯æ¬¡è®¿é—®æ—¶é‡æ–°è·å– statusValue å€¼ï¼Œå› æ­¤åœ¨å¤šæ¬¡è·å–å±æ€§å€¼æ—¶å…¶å€¼å¯èƒ½éƒ½ä¼šä¸ä¸€è‡´ï¼Œå› ä¸ºæ¯æ¬¡ getRandom() æ–¹æ³•éƒ½ä¼šè¢«è°ƒç”¨

TextView ç±»ä¸­çš„ statusValue å±æ€§æœ‰ä¸€ä¸ªæ”¯æŒå­—æ®µæ¥å­˜å‚¨åœ¨ç±»åˆå§‹åŒ–æ—¶å¾—åˆ°çš„æ•°æ®ï¼Œå› æ­¤å…¶å€¼åœ¨åˆå§‹åŒ–åæ˜¯ä¸ä¼šå†æ¬¡è·å–å€¼ï¼Œå³ TextView ç±»ä¸­çš„ getRandom() åªä¼šè¢«è°ƒç”¨ä¸€æ¬¡

```kotlin
fun main() {
    val button = Button()
    println(button.statusValue)
    val textView = TextView()
    println(textView.statusValue)
}

class Button : Clickable {

    override val statusValue: Int
        get() = getRandom()

    private fun getRandom() = Random().nextInt(10)

}

class TextView : Clickable {

    override val statusValue: Int = getRandom()

    private fun getRandom() = Random().nextInt(10)

}

interface Clickable {

    val statusValue: Int

}
```

é™¤äº†å¯ä»¥å£°æ˜æŠ½è±¡å±æ€§å¤–ï¼Œæ¥å£è¿˜å¯ä»¥åŒ…å«å…·æœ‰ getter å’Œ setter çš„å±æ€§ï¼Œåªè¦å®ƒä»¬æ²¡æœ‰å¼•ç”¨ä¸€ä¸ªæ”¯æŒå­—æ®µï¼ˆæ”¯æŒå­—æ®µéœ€è¦åœ¨æ¥å£ä¸­å­˜å‚¨çŠ¶æ€ï¼Œè€Œè¿™æ˜¯ä¸å…è®¸çš„ï¼‰

```kotlin
interface Clickable {

    val statusValue: Int

    val check: Boolean
        get() = statusValue > 10
    
}
```

# åä¸‰ã€SAM æ¥å£

å¯¹äºä»¥ä¸‹ä¾‹å­ï¼Œåœ¨ Kotlin 1.4 ä¹‹å‰ç¬¬äºŒç§å†™æ³•æ˜¯ä¸æ”¯æŒçš„ï¼Œæˆ‘ä»¬å¿…é¡»å®Œå…¨å®ç° SelfRunnable æ‰å¯ä»¥è°ƒç”¨ `setRunnable` æ–¹æ³•

```kotlin
/**
 * @Author: leavesCZY
 * @Githubï¼šhttps://github.com/leavesCZY
 */
interface SelfRunnable {

    fun run()

}

fun setRunnable(selfRunnable: SelfRunnable) {
    selfRunnable.run()
}

fun main() {
    setRunnable(object : SelfRunnable {
        override fun run() {
            println("hello,leavesC")
        }
    })
    //é”™è¯¯ï¼ŒKotlin 1.4 ä¹‹å‰ä¸æ”¯æŒ
//    setRunnable {
//        println("hello,leavesC")
//    }
}
```

è€Œåœ¨ Kotlin 1.4 ä¹‹åï¼ŒKotlin å¼€å§‹æ”¯æŒ **SAM è½¬æ¢**ã€‚åªæœ‰ä¸€ä¸ªæŠ½è±¡æ–¹æ³•çš„æ¥å£ç§°ä¸º**å‡½æ•°å¼æ¥å£**æˆ– **SAMï¼ˆå•ä¸€æŠ½è±¡æ–¹æ³•ï¼‰æ¥å£**ï¼Œå‡½æ•°å¼æ¥å£å¯ä»¥æœ‰å¤šä¸ªéæŠ½è±¡æˆå‘˜ï¼Œä½†åªèƒ½æœ‰ä¸€ä¸ªæŠ½è±¡æˆå‘˜ã€‚SAM è½¬æ¢å³ `Single Abstract Method Conversions`ï¼Œå¯¹äºåªæœ‰å•ä¸ªéé»˜è®¤æŠ½è±¡æ–¹æ³•çš„æ¥å£ï¼Œå¯ä»¥ç›´æ¥ç”¨ Lambda æ¥è¡¨ç¤ºï¼Œå‰ææ˜¯ Lambda æ‰€è¡¨ç¤ºçš„å‡½æ•°ç±»å‹èƒ½å¤Ÿè·Ÿæ¥å£ä¸­çš„æ–¹æ³•ç­¾åç›¸åŒ¹é…

æ‰€ä»¥ï¼Œåœ¨ Kotlin 1.4 ä¹‹åï¼Œå°±æ”¯æŒç›´æ¥ä»¥ Lambda çš„æ–¹å¼æ¥å£°æ˜ SelfRunnable çš„å®ç°ç±»ï¼Œä»è€Œä½¿å¾—åœ¨æ–¹æ³•è°ƒç”¨ä¸Šå¯ä»¥æ›´åŠ ç®€æ´ï¼Œä½†è¿™ä¹Ÿè¦æ±‚ interface åŒæ—¶ä½¿ç”¨ fun å…³é”®å­—ä¿®é¥°

```kotlin
/**
 * @Author: leavesCZY
 * @Githubï¼šhttps://github.com/leavesCZY
 */
fun interface SelfRunnable {

    fun run()

}

fun setRunnable(selfRunnable: SelfRunnable) {
    selfRunnable.run()
}

fun main() {
    setRunnable {
        println("hello,leavesC")
    }
}
```

# åå››ã€ç»§æ‰¿

åœ¨ kotlin ä¸­æ‰€æœ‰ç±»éƒ½æœ‰ä¸€ä¸ªå…±åŒçš„è¶…ç±» **Any** ï¼Œå¯¹äºæ²¡æœ‰è¶…ç±»å£°æ˜çš„ç±»æ¥è¯´å®ƒå°±æ˜¯é»˜è®¤è¶…ç±»ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œ Any  å¹¶ä¸æ˜¯  **java.lang.Object**  ï¼Œå®ƒé™¤äº†  **equals()  ã€ hashCode()  ä¸ toString()**  å¤–æ²¡æœ‰å…¶ä»–å±æ€§æˆ–è€…å‡½æ•°

è¦å£°æ˜ä¸€ä¸ªæ˜¾å¼çš„è¶…ç±»ï¼Œéœ€è¦æŠŠçˆ¶ç±»åæ”¾åˆ°ç±»å¤´çš„å†’å·ä¹‹å

```kotlin
open class Base()

class SubClass() : Base()
```

å½“ä¸­ï¼Œç±»ä¸Šçš„ open æ ‡æ³¨ä¸ Java ä¸­çš„ final å«ä¹‰ç›¸åï¼Œç”¨äºå…è®¸å…¶å®ƒç±»ä»è¿™ä¸ªç±»ç»§æ‰¿ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œkotlin ä¸­æ‰€æœ‰çš„ç±»éƒ½æ˜¯ final

å¦‚æœæ´¾ç”Ÿç±»æœ‰ä¸€ä¸ªä¸»æ„é€ å‡½æ•°ï¼Œå…¶åŸºç±»å‹å¿…é¡»ç›´æ¥æˆ–é—´æ¥è°ƒç”¨åŸºç±»çš„ä¸»æ„é€ å‡½æ•°

```kotlin
open class Base(val str: String)

class SubClass(val strValue: String) : Base(strValue)

class SubClass2 : Base {

    constructor(strValue: String) : super(strValue)

    constructor(intValue: Int) : super(intValue.toString())

    constructor(doubValue: Double) : this(doubValue.toString())

}
```

## 1ã€è¦†ç›–æ–¹æ³•

ä¸ Java ä¸åŒï¼Œkotlin éœ€è¦æ˜¾å¼æ ‡æ³¨å¯è¦†ç›–çš„æˆå‘˜å’Œè¦†ç›–åçš„æˆå‘˜ï¼š

```kotlin
open class Base() {
    open fun fun1() {

    }

    fun fun2() {
        
    }
}

class SubClass() : Base() {
    override fun fun1() {
        super.fun1()
    }
}
```

ç”¨ open æ ‡æ³¨çš„å‡½æ•°æ‰å¯ä»¥è¢«å­ç±»é‡è½½ï¼Œå­ç±»ç”¨ override è¡¨ç¤ºè¯¥å‡½æ•°æ˜¯è¦å¯¹çˆ¶ç±»çš„åŒç­¾åå‡½æ•°è¿›è¡Œè¦†ç›–ã€‚æ ‡è®°ä¸º override çš„æˆå‘˜æœ¬èº«ä¹Ÿæ˜¯å¼€æ”¾çš„ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå®ƒå¯ä»¥è¢«å­ç±»è¦†ç›–ã€‚å¦‚æœæƒ³ç¦æ­¢å†æ¬¡è¦†ç›–ï¼Œå¯ä»¥ä½¿ç”¨ final å…³é”®å­—æ ‡è®°
å¦‚æœçˆ¶ç±»æ²¡æœ‰ä½¿ç”¨ open å¯¹å‡½æ•°è¿›è¡Œæ ‡æ³¨ï¼Œåˆ™å­ç±»ä¸å…è®¸å®šä¹‰ç›¸åŒç­¾åçš„å‡½æ•°ã€‚å¯¹äºä¸€ä¸ª final ç±»ï¼ˆæ²¡æœ‰ç”¨ open æ ‡æ³¨çš„ç±»ï¼‰æ¥è¯´ï¼Œä½¿ç”¨ open æ ‡è®°å±æ€§å’Œæ–¹æ³•æ˜¯æ— æ„ä¹‰çš„

## 2ã€å±æ€§è¦†ç›–

å±æ€§è¦†ç›–ä¸æ–¹æ³•è¦†ç›–ç±»ä¼¼ã€‚åœ¨è¶…ç±»ä¸­å£°æ˜ä¸º open çš„å±æ€§ï¼Œå¦‚æœè¦è¿›è¡Œè¦†ç›–åˆ™å¿…é¡»åœ¨æ´¾ç”Ÿç±»ä¸­é‡æ–°å£°æ˜ä¸”ä»¥ override å¼€å¤´ï¼Œå¹¶ä¸”å®ƒä»¬å¿…é¡»å…·æœ‰å…¼å®¹çš„ç±»å‹

æ¯ä¸ªå£°æ˜çš„å±æ€§å¯ä»¥ç”±å…·æœ‰åˆå§‹åŒ–å™¨çš„å±æ€§æˆ–è€…å…·æœ‰ getter æ–¹æ³•çš„å±æ€§è¦†ç›–

```kotlin
open class Base {
    open val x = 10

    open val y: Int
        get() {
            return 100
        }
}

class SubClass : Base() {
    override val x = 100

    override var y = 200
}

fun main() {
    val base = Base()
    println(base.x) //10
    println(base.y) //100

    val base1: Base = SubClass()
    println(base1.x) //100
    println(base1.y) //200

    val subClass = SubClass()
    println(subClass.x) //100
    println(subClass.y) //200
}
```

æ­¤å¤–ï¼Œä¹Ÿå¯ä»¥ç”¨ä¸€ä¸ª var å±æ€§è¦†ç›–ä¸€ä¸ª val å±æ€§ï¼Œä½†åä¹‹åˆ™ä¸è¡Œã€‚å› ä¸ºä¸€ä¸ª val å±æ€§æœ¬è´¨ä¸Šå£°æ˜äº†ä¸€ä¸ª getter æ–¹æ³•ï¼Œè€Œå°†å…¶è¦†ç›–ä¸º var åªæ˜¯åœ¨å­ç±»ä¸­é¢å¤–å£°æ˜ä¸€ä¸ª setter æ–¹æ³•

å¯ä»¥åœ¨ä¸»æ„é€ å‡½æ•°ä¸­ä½¿ç”¨  override  å…³é”®å­—ä½œä¸ºå±æ€§å£°æ˜çš„ä¸€éƒ¨åˆ†

```kotlin
open class Base {
    open val str: String = "Base"
}

class SubClass(override val str: String) : Base()

fun main() {
    val base = Base()
    println(base.str) //Base

    val subClass = SubClass("leavesC")
    println(subClass.str) //leavesC
}
```

## 3ã€è°ƒç”¨è¶…ç±»å®ç°

æ´¾ç”Ÿç±»å¯ä»¥é€šè¿‡ super å…³é”®å­—è°ƒç”¨å…¶è¶…ç±»çš„å‡½æ•°ä¸å±æ€§è®¿é—®å™¨çš„å®ç°

```kotlin
open class BaseClass {
    open fun fun1() {
        println("BaseClass fun1")
    }
}

class SubClass : BaseClass() {

    override fun fun1() {
        super.fun1()
    }

}
```

å¯¹äºå†…éƒ¨ç±»æ¥è¯´ï¼Œå…¶æœ¬èº«å°±å¯ä»¥ç›´æ¥è°ƒç”¨è°ƒç”¨å¤–éƒ¨ç±»çš„å‡½æ•°

```kotlin
open class BaseClass2 {
    private fun fun1() {
        println("BaseClass fun1")
    }

    inner class InnerClass {
        fun fun2() {
            fun1()
        }
    }

}
```

ä½†å¦‚æœæƒ³è¦åœ¨ä¸€ä¸ªå†…éƒ¨ç±»ä¸­è®¿é—®å¤–éƒ¨ç±»çš„è¶…ç±»ï¼Œåˆ™éœ€è¦é€šè¿‡ç”±å¤–éƒ¨ç±»åé™å®šçš„ super å…³é”®å­—æ¥å®ç°

```kotlin
open class BaseClass {
    open fun fun1() {
        println("BaseClass fun1")
    }
}

class SubClass : BaseClass() {

    override fun fun1() {
        println("SubClass fun1")
    }

    inner class InnerClass {

        fun fun2() {
            super@SubClass.fun1()
        }

    }

}

fun main() {
    val subClass = SubClass()
    val innerClass = subClass.InnerClass()
    //BaseClass fun1
    innerClass.fun2()
}
```

å¦‚æœä¸€ä¸ªç±»ä»å®ƒçš„ç›´æ¥è¶…ç±»å’Œå®ç°çš„æ¥å£ä¸­ç»§æ‰¿äº†ç›¸åŒæˆå‘˜çš„å¤šä¸ªå®ç°ï¼Œ åˆ™å¿…é¡»è¦†ç›–è¿™ä¸ªæˆå‘˜å¹¶æä¾›å…¶è‡ªå·±çš„å®ç°æ¥æ¶ˆé™¤æ­§ä¹‰

ä¸ºäº†è¡¨ç¤ºé‡‡ç”¨ä»å“ªä¸ªè¶…ç±»å‹ç»§æ‰¿çš„å®ç°ï¼Œä½¿ç”¨ç”±å°–æ‹¬å·ä¸­è¶…ç±»å‹åé™å®šçš„ super æ¥æŒ‡å®šï¼Œå¦‚  super< BaseClass >

```kotlin
open class BaseClass {
    open fun fun1() {
        println("BaseClass fun1")
    }
}

interface BaseInterface {
    //æ¥å£æˆå‘˜é»˜è®¤å°±æ˜¯ open çš„
    fun fun1() {
        println("BaseInterface fun1")
    }
}

class SubClass() : BaseClass(), BaseInterface {
    override fun fun1() {
        //è°ƒç”¨ SubClass çš„ fun1() å‡½æ•°
        super<BaseClass>.fun1()
        //è°ƒç”¨ BaseInterface çš„ fun1() å‡½æ•°
        super<BaseInterface>.fun1()
    }
}
```

# åäº”ã€é›†åˆ

## 1ã€åªè¯»é›†åˆä¸å¯å˜é›†åˆ

kotlin çš„é›†åˆè®¾è®¡å’Œ Java ä¸åŒçš„å¦ä¸€é¡¹ç‰¹æ€§æ˜¯ï¼škotlin æŠŠè®¿é—®æ•°æ®çš„æ¥å£å’Œä¿®æ”¹é›†åˆæ•°æ®çš„æ¥å£åˆ†å¼€äº†ï¼Œ`kotlin.collections.Collection` æ¥å£æä¾›äº†**éå†é›†åˆå…ƒç´ ã€è·å–é›†åˆå¤§å°ã€åˆ¤æ–­é›†åˆæ˜¯å¦åŒ…å«æŸå…ƒç´ **ç­‰æ“ä½œï¼Œä½†è¿™ä¸ªæ¥å£æ²¡æœ‰æä¾›**æ·»åŠ å’Œç§»é™¤å…ƒç´ **çš„æ–¹æ³•ã€‚`kotlin.collections.MutableCollection` æ¥å£ç»§æ‰¿äº `kotlin.collections.Collection` æ¥å£ï¼Œæ‰©å±•å‡ºäº†ç”¨äº**æ·»åŠ ã€ç§»é™¤ã€æ¸…ç©ºå…ƒç´ **çš„æ–¹æ³•

å°±åƒ kotlin å¯¹ `val` å’Œ `var` çš„åŒºåˆ†ä¸€æ ·ï¼Œåªè¯»é›†åˆæ¥å£ä¸å¯å˜é›†åˆæ¥å£çš„åˆ†ç¦»èƒ½æé«˜å¯¹ä»£ç çš„å¯æ§æ€§ï¼Œå¦‚æœå‡½æ•°æ¥æ”¶ `Collection` ä½œä¸ºå½¢å‚ï¼Œé‚£ä¹ˆå°±å¯ä»¥çŸ¥é“è¯¥å‡½æ•°ä¸ä¼šä¿®æ”¹é›†åˆï¼Œè€Œåªæ˜¯å¯¹æ•°æ®è¿›è¡Œè¯»å–

ä»¥ä¸‹æ˜¯ç”¨æ¥åˆ›å»ºä¸åŒç±»å‹é›†åˆçš„å‡½æ•°

| é›†åˆå…ƒç´  | åªè¯»   | å¯å˜                                              |
| -------- | ------ | ------------------------------------------------- |
| List     | listOf | mutableListOfã€arrayListOf                        |
| Set      | setOf  | mutableSetOfã€hashSetOfã€linkedSetOfã€sortedSetOf |
| Map      | mapOf  | mutableMapOfã€hashMapOfã€linkedMapOfã€sortedMapOf |

```kotlin
val list = listOf(10, 20, 30, 40)
//ä¸åŒ…å« add æ–¹æ³•
//list.add(100)
println(list.size)
println(list.contains(20))

val mutableList = mutableListOf("leavesC", "leavesc", "å¶")
mutableList.add("Ye")
println(mutableList.size)
println(mutableList.contains("leavesC"))
```

## 2ã€é›†åˆä¸ Java

å› ä¸º Java å¹¶ä¸ä¼šåŒºåˆ†åªè¯»é›†åˆä¸å¯å˜é›†åˆï¼Œå³ä½¿ kotlin ä¸­æŠŠé›†åˆå£°æ˜ä¸ºåªè¯»çš„ï¼Œ Java ä»£ç ä¹Ÿå¯ä»¥ä¿®æ”¹è¿™ä¸ªé›†åˆï¼Œè€Œ Java ä»£ç ä¸­çš„é›†åˆå¯¹ kotlin æ¥è¯´ä¹Ÿæ˜¯å¯å˜æ€§æœªçŸ¥çš„ï¼Œkotlin ä»£ç å¯ä»¥å°†ä¹‹è§†ä¸ºåªè¯»çš„æˆ–è€…å¯å˜çš„ï¼ŒåŒ…å«çš„å…ƒç´ ä¹Ÿæ˜¯å¯ä»¥ä¸º null æˆ–è€…ä¸ä¸º null çš„

ä¾‹å¦‚ï¼Œåœ¨ Java ä»£ç ä¸­ names è¿™ä¹ˆä¸€ä¸ª List< String > ç±»å‹çš„å˜é‡

```java
public class JavaMain {

    public static List<String> names = new ArrayList<>();

    static {
        names.add("leavesC");
        names.add("Ye");
    }

}
```

åœ¨ kotlin ä¸­å¯ä»¥ç”¨ä»¥ä¸‹å››ç§æ–¹å¼æ¥å¼•ç”¨å˜é‡ names 

```kotlin
val list1: List<String?> = JavaMain.names

val list2: List<String> = JavaMain.names

val list3: MutableList<String> = JavaMain.names

val list4: MutableList<String?> = JavaMain.names
```

## 3ã€åªè¯»é›†åˆçš„å¯å˜æ€§

åªè¯»é›†åˆä¸ä¸€å®šå°±æ˜¯ä¸å¯å˜çš„ã€‚ä¾‹å¦‚ï¼Œå‡è®¾å­˜åœ¨ä¸€ä¸ªæ‹¥æœ‰åªè¯»ç±»å‹æ¥å£çš„å¯¹è±¡ï¼Œè¯¥å¯¹è±¡å­˜åœ¨ä¸¤ä¸ªä¸åŒçš„å¼•ç”¨ï¼Œä¸€ä¸ªåªè¯»ï¼Œä¸€ä¸ªå¯å˜ï¼Œå½“å¯å˜å¼•ç”¨ä¿®æ”¹äº†è¯¥å¯¹è±¡åï¼Œè¿™å¯¹åªè¯»å¼•ç”¨æ¥è¯´å°±ç›¸å½“äºâ€œåªè¯»é›†åˆè¢«ä¿®æ”¹äº†â€ï¼Œå› æ­¤åªè¯»é›†åˆå¹¶ä¸æ€»æ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚å¦‚æœéœ€è¦åœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸‹å¤„ç†æ•°æ®ï¼Œéœ€è¦ä¿è¯æ­£ç¡®åœ°åŒæ­¥äº†å¯¹æ•°æ®çš„è®¿é—®ï¼Œæˆ–è€…ä½¿ç”¨æ”¯æŒå¹¶å‘è®¿é—®çš„æ•°æ®ç»“æ„

ä¾‹å¦‚ï¼Œlist1 å’Œ list1 å¼•ç”¨åˆ°åŒä¸€ä¸ªé›†åˆå¯¹è±¡ï¼Œ list3 å¯¹é›†åˆçš„ä¿®æ”¹åŒæ—¶ä¼šå½±å“åˆ° list1

```kotlin
val list1: List<String> = JavaMain.names
val list3: MutableList<String> = JavaMain.names
list1.forEach { it -> println(it) } //leavesC Ye
list3.forEach { it -> println(it) } //leavesC Ye
for (index in list3.indices) {
    list3[index] = list3[index].toUpperCase()
}
list1.forEach { it -> println(it) } //LEAVESC YE
```

## 4ã€é›†åˆä¸å¯ç©ºæ€§

é›†åˆçš„å¯ç©ºæ€§å¯ä»¥åˆ†ä¸ºä¸‰ç§ï¼š

1. å¯ä»¥åŒ…å«ä¸º null çš„é›†åˆå…ƒç´ 
2. é›†åˆæœ¬èº«å¯ä»¥ä¸º null
3. é›†åˆæœ¬èº«å¯ä»¥ä¸º nullï¼Œä¸”å¯ä»¥åŒ…å«ä¸º null çš„é›†åˆå…ƒç´ 

ä¾‹å¦‚ï¼ŒintList1 å¯ä»¥åŒ…å«ä¸º null çš„é›†åˆå…ƒç´ ï¼Œä½†é›†åˆæœ¬èº«ä¸èƒ½æŒ‡å‘ nullï¼›intList2 ä¸å¯ä»¥åŒ…å«ä¸º null çš„é›†åˆå…ƒç´ ï¼Œä½†é›†åˆæœ¬èº«å¯ä»¥æŒ‡å‘ nullï¼›intList3 å¯ä»¥åŒ…å«ä¸º null çš„é›†åˆå…ƒç´ ï¼Œä¸”é›†åˆæœ¬èº«èƒ½æŒ‡å‘ null

```kotlin
//List<Int?> æ˜¯èƒ½æŒæœ‰ Int? ç±»å‹å€¼çš„åˆ—è¡¨
val intList1: List<Int?> = listOf(10, 20, 30, 40, null)
//List<Int>? æ˜¯å¯ä»¥ä¸º null çš„åˆ—è¡¨
var intList2: List<Int>? = listOf(10, 20, 30, 40)
intList2 = null
//List<Int?>? æ˜¯å¯ä»¥ä¸º null çš„åˆ—è¡¨ï¼Œä¸”èƒ½æŒæœ‰ Int? ç±»å‹å€¼
var intList3: List<Int?>? = listOf(10, 20, 30, 40, null)
intList3 = null
```

# åå…­ã€æ‰©å±•å‡½æ•°å’Œæ‰©å±•å±æ€§

## 1ã€æ‰©å±•å‡½æ•°

æ‰©å±•å‡½æ•°ç”¨äºä¸ºä¸€ä¸ªç±»å¢åŠ ä¸€ç§æ–°çš„è¡Œä¸ºï¼Œè¿™æ˜¯ä¸ºç¼ºå°‘æœ‰ç”¨å‡½æ•°çš„ç±»è¿›è¡Œæ‰©å±•çš„é€”å¾„ã€‚æ‰©å±•å‡½æ•°çš„ç”¨é€”å°±ç±»ä¼¼äºåœ¨ Java ä¸­å®ç°çš„é™æ€å·¥å…·æ–¹æ³•ã€‚è€Œåœ¨ kotlin ä¸­ä½¿ç”¨æ‰©å±•å‡½æ•°çš„ä¸€ä¸ªä¼˜åŠ¿å°±æ˜¯æˆ‘ä»¬ä¸éœ€è¦åœ¨è°ƒç”¨æ–¹æ³•çš„æ—¶å€™æŠŠæ•´ä¸ªå¯¹è±¡å½“ä½œå‚æ•°ä¼ å…¥ï¼Œæ‰©å±•å‡½æ•°è¡¨ç°å¾—å°±åƒæ˜¯å±äºè¿™ä¸ªç±»æœ¬èº«çš„ä¸€æ ·ï¼Œå¯ä»¥ä½¿ç”¨ this å…³é”®å­—å¹¶ç›´æ¥è°ƒç”¨å…¶æ‰€æœ‰ public æ–¹æ³•

æ‰©å±•å‡½æ•°å¹¶ä¸å…è®¸ä½ æ‰“ç ´å®ƒçš„å°è£…æ€§ï¼Œå’Œåœ¨ç±»å†…éƒ¨å®šä¹‰çš„æ–¹æ³•ä¸åŒçš„æ˜¯ï¼Œæ‰©å±•å‡½æ•°ä¸èƒ½è®¿é—®ç§æœ‰çš„æˆ–æ˜¯å—ä¿æŠ¤çš„æˆå‘˜

```kotlin
//ä¸º String ç±»å£°æ˜ä¸€ä¸ªæ‰©å±•å‡½æ•° lastChar() ï¼Œç”¨äºè¿”å›å­—ç¬¦ä¸²çš„æœ€åä¸€ä¸ªå­—ç¬¦
//getæ–¹æ³•æ˜¯ String ç±»çš„å†…éƒ¨æ–¹æ³•ï¼Œlength æ˜¯ String ç±»çš„å†…éƒ¨æˆå‘˜å˜é‡ï¼Œåœ¨æ­¤å¤„å¯ä»¥ç›´æ¥è°ƒç”¨
fun String.lastChar() = get(length - 1)

//ä¸º Int ç±»å£°æ˜ä¸€ä¸ªæ‰©å±•å‡½æ•° doubleValue() ï¼Œç”¨äºè¿”å›å…¶ä¸¤å€å€¼
//this å…³é”®å­—ä»£è¡¨äº† Int å€¼æœ¬èº«
fun Int.doubleValue() = this * 2
```

ä¹‹åï¼Œæˆ‘ä»¬å°±å¯ä»¥åƒè°ƒç”¨ç±»æœ¬èº«å†…éƒ¨å£°æ˜çš„æ–¹æ³•ä¸€æ ·ï¼Œç›´æ¥è°ƒç”¨æ‰©å±•å‡½æ•°

```kotlin
fun main() {
    val name = "leavesC"
    println("$name lastChar is: " + name.lastChar())

    val age = 24
    println("$age doubleValue is: " + age.doubleValue())
}
```

å¦‚æœéœ€è¦å£°æ˜ä¸€ä¸ªé™æ€çš„æ‰©å±•å‡½æ•°ï¼Œåˆ™å¿…é¡»å°†å…¶å®šä¹‰åœ¨ä¼´ç”Ÿå¯¹è±¡ä¸Šï¼Œè¿™æ ·å°±å¯ä»¥åœ¨æ²¡æœ‰ Namer å®ä¾‹çš„æƒ…å†µä¸‹è°ƒç”¨å…¶æ‰©å±•å‡½æ•°ï¼Œå°±å¦‚åŒåœ¨è°ƒç”¨ Java çš„é™æ€å‡½æ•°ä¸€æ ·

```kotlin
class Namer {

    companion object {

        val defaultName = "mike"

    }

}

fun Namer.Companion.getName(): String {
    return defaultName
}

fun main() {
    Namer.getName()
}
```

éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¦‚æœæ‰©å±•å‡½æ•°å£°æ˜äº class å†…éƒ¨ï¼Œåˆ™è¯¥æ‰©å±•å‡½æ•°åªèƒ½è¯¥ç±»å’Œå…¶å­ç±»å†…éƒ¨è°ƒç”¨ï¼Œå› ä¸ºæ­¤æ—¶ç›¸å½“äºå£°æ˜äº†ä¸€ä¸ªéé™æ€å‡½æ•°ï¼Œå¤–éƒ¨æ— æ³•å¼•ç”¨åˆ°ã€‚æ‰€ä»¥ä¸€èˆ¬éƒ½æ˜¯å°†æ‰©å±•å‡½æ•°å£°æ˜ä¸ºå…¨å±€å‡½æ•°

## 2ã€æ‰©å±•å±æ€§

æ‰©å±•å‡½æ•°ä¹Ÿå¯ä»¥ç”¨äºå±æ€§

```kotlin
//æ‰©å±•å‡½æ•°ä¹Ÿå¯ä»¥ç”¨äºå±æ€§
//ä¸º String ç±»æ–°å¢ä¸€ä¸ªå±æ€§å€¼ customLen
var String.customLen: Int
    get() = length
    set(value) {
        println("set")
    }

fun main() {
    val name = "leavesC"
    println(name.customLen)
    name.customLen = 10
    println(name.customLen)
    //7
    //set
    //7
}
```

## 3ã€ä¸å¯é‡å†™çš„æ‰©å±•å‡½æ•°

çœ‹ä»¥ä¸‹ä¾‹å­ï¼Œå­ç±» Button é‡å†™äº†çˆ¶ç±» View çš„ click() å‡½æ•°ï¼Œæ­¤æ—¶å¦‚æœå£°æ˜ä¸€ä¸ª View å˜é‡ï¼Œå¹¶èµ‹å€¼ä¸º Button ç±»å‹çš„å¯¹è±¡ï¼Œè°ƒç”¨çš„ click() å‡½æ•°å°†æ˜¯ Button ç±»é‡å†™çš„æ–¹æ³•

```kotlin
fun main() {
    val view: View = Button()
    view.click() //Button clicked
}

open class View {
    open fun click() = println("View clicked")
}

class Button : View() {
    override fun click() = println("Button clicked")
}
```

å¯¹äºæ‰©å±•å‡½æ•°æ¥è¯´ï¼Œä¸ä»¥ä¸Šçš„ä¾‹å­å´ä¸ä¸€æ ·ã€‚å¦‚æœåŸºç±»å’Œå­ç±»éƒ½åˆ†åˆ«å®šä¹‰äº†ä¸€ä¸ªåŒåçš„æ‰©å±•å‡½æ•°ï¼Œæ­¤æ—¶è¦è°ƒç”¨å“ªä¸ªæ‰©å±•å‡½æ•°æ˜¯ç”±å˜é‡çš„é™æ€ç±»å‹æ¥å†³å®šçš„ï¼Œè€Œéè¿™ä¸ªå˜é‡çš„è¿è¡Œæ—¶ç±»å‹

```kotlin
fun main() {
    val view: View = Button()
    view.longClick() //View longClicked
}

open class View {
    open fun click() = println("View clicked")
}

class Button : View() {
    override fun click() = println("Button clicked")
}

fun View.longClick() = println("View longClicked")

fun Button.longClick() = println("Button longClicked")
```

æ­¤å¤–ï¼Œå¦‚æœä¸€ä¸ªç±»çš„æˆå‘˜å‡½æ•°å’Œæ‰©å±•å‡½æ•°æœ‰ç›¸åŒçš„ç­¾åï¼Œ**æˆå‘˜å‡½æ•°ä¼šè¢«ä¼˜å…ˆä½¿ç”¨**

æ‰©å±•å‡½æ•°å¹¶ä¸æ˜¯çœŸæ­£åœ°ä¿®æ”¹äº†åŸæ¥çš„ç±»ï¼Œå…¶åº•å±‚å…¶å®æ˜¯ä»¥é™æ€å¯¼å…¥çš„æ–¹å¼æ¥å®ç°çš„ã€‚æ‰©å±•å‡½æ•°å¯ä»¥è¢«å£°æ˜åœ¨ä»»ä½•ä¸€ä¸ªæ–‡ä»¶ä¸­ï¼Œå› æ­¤æœ‰ä¸ªé€šç”¨çš„å®è·µæ˜¯æŠŠä¸€ç³»åˆ—æœ‰å…³çš„å‡½æ•°æ”¾åœ¨ä¸€ä¸ªæ–°å»ºçš„æ–‡ä»¶é‡Œ

éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œæ‰©å±•å‡½æ•°ä¸ä¼šè‡ªåŠ¨åœ°åœ¨æ•´ä¸ªé¡¹ç›®èŒƒå›´å†…ç”Ÿæ•ˆï¼Œå¦‚æœéœ€è¦ä½¿ç”¨åˆ°æ‰©å±•å‡½æ•°ï¼Œéœ€è¦è¿›è¡Œå¯¼å…¥

## 4ã€å¯ç©ºæ¥æ”¶è€…

å¯ä»¥ä¸ºå¯ç©ºçš„æ¥æ”¶è€…ç±»å‹å®šä¹‰æ‰©å±•ï¼Œå³ä½¿æ¥å—è€…ä¸º nullï¼Œä½¿å¾—å¼€å‘è€…åœ¨è°ƒç”¨æ‰©å±•å‡½æ•°å‰ä¸å¿…è¿›è¡Œåˆ¤ç©ºæ“ä½œï¼Œä¸”å¯ä»¥é€šè¿‡ `this == null` æ¥æ£€æŸ¥æ¥æ”¶è€…æ˜¯å¦ä¸ºç©º

```kotlin
fun main() {
    var name: String? = null
    name.check() //this == null
    name = "leavesC"
    name.check() //this != null
}

fun String?.check() {
    if (this == null) {
        println("this == null")
        return
    }
    println("this != null")
}
```

# åä¸ƒã€Lambda è¡¨è¾¾å¼

Lambda è¡¨è¾¾å¼æœ¬è´¨ä¸Šå°±æ˜¯å¯ä»¥ä¼ é€’ç»™å…¶å®ƒå‡½æ•°çš„ä¸€å°æ®µä»£ç ï¼Œé€šè¿‡ Lambda è¡¨è¾¾å¼å¯ä»¥æŠŠé€šç”¨çš„ä»£ç ç»“æ„æŠ½å–æˆåº“å‡½æ•°ï¼Œä¹Ÿå¯ä»¥æŠŠ Lambda è¡¨è¾¾å¼å­˜å‚¨åœ¨ä¸€ä¸ªå˜é‡ä¸­ï¼ŒæŠŠè¿™ä¸ªå˜é‡å½“åšæ™®é€šå‡½æ•°å¯¹å¾…

```kotlin
//ç”±äºå­˜åœ¨ç±»å‹æ¨å¯¼ï¼Œæ‰€ä»¥ä»¥ä¸‹ä¸‰ç§å£°æ˜æ–¹å¼éƒ½æ˜¯å®Œå…¨ç›¸åŒçš„
val plus1: (Int, Int) -> Int = { x: Int, y: Int -> x + y }
val plus2: (Int, Int) -> Int = { x, y -> x + y }
val plus3 = { x: Int, y: Int -> x + y }
println(plus3(1, 2))
```

1. ä¸€ä¸ª Lambda è¡¨è¾¾å¼å§‹ç»ˆç”¨èŠ±æ‹¬å·åŒ…å›´ï¼Œé€šè¿‡ç®­å¤´æŠŠå®å‚åˆ—è¡¨å’Œå‡½æ•°ä½“åˆ†å¼€
2. å¦‚æœ Lambda å£°æ˜äº†å‡½æ•°ç±»å‹ï¼Œé‚£ä¹ˆå°±å¯ä»¥çœç•¥å‡½æ•°ä½“çš„ç±»å‹å£°æ˜
3. å¦‚æœ Lambda å£°æ˜äº†å‚æ•°ç±»å‹ï¼Œä¸”è¿”å›å€¼æ”¯æŒç±»å‹æ¨å¯¼ï¼Œé‚£ä¹ˆå°±å¯ä»¥çœç•¥å‡½æ•°ç±»å‹å£°æ˜

è™½ç„¶è¯´å€¾å‘äºå°½é‡é¿å…è®© Lambda è¡¨è¾¾å¼å¼•ç”¨å¤–éƒ¨å˜é‡ä»¥é¿å…å‰¯ä½œç”¨ï¼Œä½†æœ‰äº›æƒ…å†µä¸‹è®© Lambda å¼•ç”¨å¤–éƒ¨å˜é‡ä¹Ÿå¯ä»¥ç®€åŒ–è®¡ç®—ç»“æ„ã€‚è®¿é—®äº†å¤–éƒ¨ç¯å¢ƒå˜é‡çš„ Lambda è¡¨è¾¾å¼ç§°ä¹‹ä¸ºé—­åŒ…ï¼Œé—­åŒ…å¯ä»¥è¢«å½“åšå‚æ•°ä¼ é€’æˆ–è€…ç›´æ¥ä½¿ç”¨ã€‚ä¸ Java ä¸åŒï¼Œkotlin ä¸­çš„é—­åŒ…ä¸ä»…å¯ä»¥è®¿é—®å¤–éƒ¨å˜é‡ä¹Ÿå¯ä»¥å¯¹å…¶è¿›è¡Œä¿®æ”¹

ä¾‹å¦‚ï¼Œå‡è®¾æˆ‘ä»¬éœ€è¦ä¸€ä¸ªè®¡ç®—æ€»å’Œçš„æ–¹æ³•ï¼Œæ¯æ¬¡è°ƒç”¨å‡½æ•°æ—¶éƒ½è¿”å›å½“å‰çš„æ€»å’Œå¤§å°ã€‚æ–¹æ³•å¤–éƒ¨ä¸æä¾›ä¿å­˜å½“å‰æ€»å’Œçš„å˜é‡ï¼Œç”± Lambda è¡¨è¾¾å¼å†…éƒ¨è¿›è¡Œå­˜å‚¨

```kotlin
fun main() {
    val sum = sumFunc()
    println(sum(10)) //10
    println(sum(20)) //30
    println(sum(30)) //60
}

fun sumFunc(): (Int) -> Int {
    var base = 0
    return fun(va: Int): Int {
        base += va
        return base
    }
}
```

æ­¤å¤–ï¼Œkotlin ä¹Ÿæ”¯æŒä¸€ç§è‡ªåŠ¨è¿è¡Œçš„è¯­æ³•

```kotlin
{ va1: Int, va2: Int -> println(va1 + va2) }(10, 20)
```

Lambda è¡¨è¾¾å¼æœ€å¸¸è§çš„ç”¨é€”å°±æ˜¯å’Œé›†åˆä¸€èµ·å·¥ä½œï¼Œçœ‹ä»¥ä¸‹ä¾‹å­

è¦ä»ä¸€ä¸ªäººå‘˜åˆ—è¡¨ä¸­å–å‡ºå¹´é¾„æœ€å¤§çš„ä¸€ä½

```kotlin
data class Person(val name: String, val age: Int)

fun main() {
    val people = listOf(Person("leavesC", 24), Person("Ye", 22))
    println(people.maxBy { it.age }) //Person(name=leavesC, age=24)
}
```

å½“ä¸­ï¼Œåº“å‡½æ•° maxBy å¯ä»¥åœ¨ä»»ä½•é›†åˆä¸Šè°ƒç”¨ï¼Œå…¶éœ€è¦ä¸€ä¸ªå®å‚ï¼šä¸€ä¸ªå‡½æ•°ï¼Œç”¨äºæŒ‡å®šè¦ç”¨æ¥è¿›è¡Œæ¯”è¾ƒçš„å‡½æ•°ã€‚èŠ±æ‹¬å·ä¸­çš„ä»£ç  `{ it.age }` å°±æ˜¯å®ç°äº†è¿™ä¸ªé€»è¾‘çš„ Lambda è¡¨è¾¾å¼

ä¸Šè¿° maxBy å‡½æ•°çš„å®å‚æ˜¯ç®€åŒ–åçš„å†™æ³•ï¼Œè¿™é‡Œæ¥çœ‹ä¸‹ maxBy å‡½æ•°çš„ç®€åŒ–è¿‡ç¨‹

æœ€åŸå§‹çš„è¯­æ³•å£°æ˜åº”è¯¥æ˜¯è¿™æ ·çš„ï¼Œç”¨æ‹¬å·åŒ…è£¹ç€ Lambda è¡¨è¾¾å¼

```kotlin
println(people.maxBy({ p: Person -> p.age }))
```

kotlin æœ‰ä¸€ç§è¯­æ³•çº¦å®šï¼Œå¦‚æœ Lambda è¡¨è¾¾å¼æ˜¯å‡½æ•°è°ƒç”¨çš„æœ€åä¸€ä¸ªå®å‚ï¼Œå¯ä»¥å°†ä¹‹æ”¾åˆ°æ‹¬å·çš„å¤–è¾¹

```kotlin
 println(people.maxBy() { p: Person -> p.age })
```

å½“ Lamdba è¡¨è¾¾å¼æ˜¯å‡½æ•°å”¯ä¸€çš„å®å‚æ—¶ï¼Œå¯ä»¥å»æ‰è°ƒç”¨ä»£ç ä¸­çš„ç©ºæ‹¬å·å¯¹

```kotlin
 println(people.maxBy { p: Person -> p.age })
```

å½“ Lambda è¡¨è¾¾å¼çš„å‚æ•°ç±»å‹æ˜¯å¯ä»¥è¢«æ¨å¯¼å‡ºæ¥æ—¶å°±å¯ä»¥çœç•¥å£°æ˜å‚æ•°ç±»å‹

```kotlin
println(people.maxBy { p -> p.age })
```

å¦‚æœå½“å‰ä¸Šä¸‹æ–‡æœŸå¾…çš„æ˜¯åªæœ‰ä¸€ä¸ªå‚æ•°çš„ Lambda è¡¨è¾¾å¼ä¸”å‚æ•°ç±»å‹å¯ä»¥è¢«æ¨æ–­å‡ºæ¥ï¼Œå°±ä¼šä¸ºè¯¥å‚æ•°ç”Ÿæˆä¸€ä¸ªé»˜è®¤åç§°ï¼šit

```kotlin
 println(people.maxBy { it.age })
```

kotlin å’Œ Java çš„ä¸€ä¸ªæ˜¾è‘—åŒºåˆ«å°±æ˜¯ï¼Œåœ¨ kotlin ä¸­å‡½æ•°å†…éƒ¨çš„ Lambda è¡¨è¾¾å¼ä¸ä¼šä»…é™äºè®¿é—®å‡½æ•°çš„å‚æ•°ä»¥åŠ final å˜é‡ï¼Œåœ¨ Lambda å†…éƒ¨ä¹Ÿå¯ä»¥è®¿é—®å¹¶ä¿®æ”¹é final å˜é‡

ä» Lambda å†…éƒ¨è®¿é—®å¤–éƒ¨å˜é‡ï¼Œæˆ‘ä»¬ç§°è¿™äº›å˜é‡è¢« Lambda æ•æ‰ã€‚å½“æ•æ‰ final å˜é‡æ—¶ï¼Œå˜é‡å€¼å’Œä½¿ç”¨è¿™ä¸ªå€¼çš„ Lambda ä»£ç ä¸€èµ·å­˜å‚¨ï¼Œå¯¹é final å˜é‡æ¥è¯´ï¼Œå…¶å€¼è¢«å°è£…åœ¨ä¸€ä¸ªç‰¹æ®Šçš„åŒ…è£…å™¨ä¸­ï¼Œå¯¹è¿™ä¸ªåŒ…è£…å™¨çš„å¼•ç”¨ä¼šå’Œ Lambda ä»£ç ä¸€èµ·å­˜å‚¨

```kotlin
var number = 0
val list = listOf(10, 20, 30, 40)
list.forEach {
    if (it > 20) {
        number++
    }
}
println(number) //2
```

æˆå‘˜å¼•ç”¨ç”¨äºåˆ›å»ºä¸€ä¸ªè°ƒç”¨å•ä¸ªæ–¹æ³•æˆ–è€…è®¿é—®å•ä¸ªå±æ€§çš„å‡½æ•°å€¼ï¼Œé€šè¿‡åŒå†’å·æŠŠç±»åç§°å’Œè¦å¼•ç”¨çš„æˆå‘˜ï¼ˆä¸€ä¸ªæ–¹æ³•æˆ–è€…ä¸€ä¸ªå±æ€§ï¼‰åç§°åˆ†éš”å¼€

æˆå‘˜å¼•ç”¨çš„ä¸€ä¸ªç”¨é€”å°±æ˜¯ï¼šå¦‚æœè¦å½“åšå‚æ•°ä¼ é€’çš„ä»£ç å—å·²ç»è¢«å®šä¹‰æˆäº†å‡½æ•°ï¼Œæ­¤æ—¶ä¸å¿…ä¸“é—¨åˆ›å»ºä¸€ä¸ªè°ƒç”¨è¯¥å‡½æ•°çš„ Lambda è¡¨è¾¾å¼ï¼Œå¯ä»¥ç›´æ¥é€šè¿‡æˆå‘˜å¼•ç”¨çš„æ–¹å¼æ¥ä¼ é€’è¯¥å‡½æ•°ï¼ˆä¹Ÿå¯ä»¥ä¼ é€’å±æ€§ï¼‰ã€‚æ­¤å¤–ï¼Œæˆå‘˜å¼•ç”¨å¯¹æ‰©å±•å‡½æ•°ä¸€æ ·é€‚ç”¨

```kotlin
data class Person(val name: String, val age: Int) {

    val myAge = age

    fun getPersonAge() = age
}

fun Person.filterAge() = age

fun main() {
    val people = listOf(Person("leavesC", 24), Person("Ye", 22))
    println(people.maxBy { it.age })    //Person(name=leavesC, age=24)
    println(people.maxBy(Person::age))  //Person(name=leavesC, age=24)
    println(people.maxBy(Person::myAge))  //Person(name=leavesC, age=24)
    println(people.maxBy(Person::getPersonAge))  //Person(name=leavesC, age=24)
    println(people.maxBy(Person::filterAge))  //Person(name=leavesC, age=24)
}
```

ä¸ç®¡å¼•ç”¨çš„æ˜¯å‡½æ•°è¿˜æ˜¯å±æ€§ï¼Œéƒ½ä¸è¦åœ¨æˆå‘˜å¼•ç”¨çš„åç§°åé¢åŠ æ‹¬å·

æ­¤å¤–ï¼Œè¿˜å¯ä»¥å¼•ç”¨é¡¶å±‚å‡½æ•°

```kotlin
fun test() {
    println("test")
}

fun main() {
    val t = ::test
}
```

ä¹Ÿå¯ä»¥ç”¨æ„é€ æ–¹æ³•å¼•ç”¨å­˜å‚¨æˆ–è€…å»¶æœŸæ‰§è¡Œåˆ›å»ºç±»å®ä¾‹çš„åŠ¨ä½œ

```kotlin
data class Person(val name: String, val age: Int)

fun main() {
    val createPerson = ::Person
    val person = createPerson("leavesC", 24)
    println(person)
}
```

# åå…«ã€æ ‡å‡†åº“ä¸­çš„æ‰©å±•å‡½æ•°

kotlin æ ‡å‡†åº“ä¸­æä¾›äº†å‡ ä¸ªæ¯”è¾ƒå®ç”¨çš„æ‰©å±•å‡½æ•°ï¼Œå®šä¹‰åœ¨ Standard æ–‡ä»¶ä¸‹

## 1ã€run

run å‡½æ•°æ¥æ”¶ä¸€ä¸ªå‡½æ•°å‚æ•°å¹¶ä»¥è¯¥å‡½æ•°çš„è¿”å›å€¼ä½œä¸º run å‡½æ•°çš„è¿”å›å€¼

```kotlin
@kotlin.internal.InlineOnly
public inline fun <T, R> T.run(block: T.() -> R): R {
    contract {
        callsInPlace(block, InvocationKind.EXACTLY_ONCE)
    }
    return block()
}
```

ç”¨ä¾‹

```kotlin
fun main() {
    var nickName = "leavesC"
    nickName = nickName.run {
        if (isNotEmpty()) {
            this
        } else {
            ""
        }
    }
    println(nickName)
}
```

## 2ã€with

with å‡½æ•°å¹¶ä¸æ˜¯æ‰©å±•å‡½æ•°ï¼Œä¸è¿‡ç”±äºä½œç”¨ç›¸è¿‘ï¼Œæ­¤å¤„å°±ä¸€èµ·ä»‹ç»äº†ã€‚with å‡½æ•°çš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯æ¥å—è€…å¯¹è±¡ receiverï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯åœ¨ receiver å¯¹è±¡ç±»å‹ä¸Šå®šä¹‰çš„æ‰©å±•å‡½æ•°ï¼Œæ‰€ä»¥å¯ä»¥åœ¨å‡½æ•°å†…éƒ¨ç›´æ¥è°ƒç”¨ receiver å…¶å…¬å¼€çš„æ–¹æ³•å’Œå±æ€§

```kotlin
@kotlin.internal.InlineOnly
public inline fun <T, R> with(receiver: T, block: T.() -> R): R {
    contract {
        callsInPlace(block, InvocationKind.EXACTLY_ONCE)
    }
    return receiver.block()
}
```

with å‡½æ•°ç”¨äºå¯¹åŒä¸€ä¸ªå¯¹è±¡æ‰§è¡Œå¤šæ¬¡æ“ä½œè€Œä¸éœ€è¦åå¤æŠŠå¯¹è±¡çš„åç§°å†™å‡ºæ¥

ä¾‹å¦‚ï¼Œä¸ºäº†æ„å»ºä¸€ä¸ªåŒ…å«æŒ‡å®šå†…å®¹çš„å­—ç¬¦ä¸²ï¼Œéœ€è¦å…ˆåå¦‚ä¸‹è°ƒç”¨

```kotlin
fun main() {
    val result = StringBuilder()
    result.append("leavesC")
    result.append("\n")
    for (letter in 'A'..'Z') {
        result.append(letter)
    }
    println(result.toString())
 }
```

æ”¹ä¸ºé€šè¿‡ with å‡½æ•°æ¥æ„å»ºçš„è¯ä¼šä»£ç ä¼šç®€æ´è®¸å¤š

```kotlin
val result = with(StringBuilder()) {
    append("leavesC")
    append("\n")
    for (letter in 'A'..'Z') {
        append(letter)
    }
    toString()
}
println(result)
```

with å‡½æ•°æ˜¯ä¸€ä¸ªæ¥å—ä¸¤ä¸ªå‚æ•°çš„å‡½æ•°ï¼Œåœ¨è¿™ä¸ªä¾‹å­ä¸­å°±æ˜¯ä¸€ä¸ª StringBuilder å’Œä¸€ä¸ª Lambda è¡¨è¾¾å¼ï¼Œè¿™é‡Œåˆ©ç”¨äº†æŠŠ Lambda è¡¨è¾¾å¼æ”¾åœ¨æ‹¬å·å¤–çš„çº¦å®š

with å‡½æ•°çš„è¿”å›å€¼æ˜¯æ‰§è¡Œ Lambda è¡¨è¾¾å¼çš„ç»“æœï¼Œè¯¥ç»“æœå°±æ˜¯ Lambda ä¸­çš„æœ€åä¸€ä¸ªè¡¨è¾¾å¼çš„è¿”å›å€¼ï¼Œå› æ­¤å¦‚æœå°†ä»£ç ä¿®æ”¹ä¸ºå¦‚ä¸‹æ‰€ç¤ºçš„è¯ï¼Œå› ä¸º println() æ–¹æ³•æ— è¿”å›å€¼ï¼Œæ‰€ä»¥æ‰“å°å‡ºæ¥çš„å†…å®¹å°†æ˜¯ kotlin.Unit

```kotlin
val result = with(StringBuilder()) {
    append("leavesC")
    append("\n")
    for (letter in 'A'..'Z') {
        append(letter)
    }
    println("Hello")
}
println(result)  //kotin.Unit
```

## 3ã€apply

apply å‡½æ•°è¢«å£°æ˜ä¸ºç±»å‹ T çš„æ‰©å±•å‡½æ•°ï¼Œå®ƒçš„æ¥æ”¶è€…æ˜¯ä½œä¸ºå®å‚çš„ Lambda çš„æ¥å—è€…ï¼Œæœ€ç»ˆå‡½æ•°è¿”å› this å³å¯¹è±¡æœ¬èº«

```kotlin
@kotlin.internal.InlineOnly
public inline fun <T> T.apply(block: T.() -> Unit): T {
    contract {
        callsInPlace(block, InvocationKind.EXACTLY_ONCE)
    }
    block()
    return this
}
```

æ‰€ä»¥apply å‡½æ•°å’Œ with å‡½æ•°çš„å”¯ä¸€åŒºåˆ«åœ¨äºï¼šapply å‡½æ•°å§‹ç»ˆä¼šè¿”å›ä½œä¸ºå®å‚ä¼ é€’ç»™å®ƒçš„å¯¹è±¡

```kotlin
val result = StringBuilder().apply {
    append("leavesC")
    append("\n")
    for (letter in 'A'..'Z') {
        append(letter)
    }
    toString()
}
println(result)
println(result.javaClass) //class java.lang.StringBuilder
```

## 4ã€also

also å‡½æ•°æ¥æ”¶ä¸€ä¸ªå‡½æ•°ç±»å‹çš„å‚æ•°ï¼Œè¯¥å‚æ•°åˆä»¥æ¥æ”¶è€…æœ¬èº«ä½œä¸ºå‚æ•°ï¼Œæœ€ç»ˆè¿”å›æ¥æ”¶è€…å¯¹è±¡æœ¬èº«

```kotlin
@kotlin.internal.InlineOnly
@SinceKotlin("1.1")
public inline fun <T> T.also(block: (T) -> Unit): T {
    contract {
        callsInPlace(block, InvocationKind.EXACTLY_ONCE)
    }
    block(this)
    return this
}
```

ç”¨ä¾‹

```kotlin
fun main() {
    val nickName = "leavesC"
    val also = nickName.also {
        it.length
    }
    println(also) //leavesC
}
```

## 5ã€let 

let å‡½æ•°æ¥æ”¶ä¸€ä¸ªå‡½æ•°ç±»å‹çš„å‚æ•°ï¼Œè¯¥å‚æ•°åˆä»¥æ¥æ”¶è€…æœ¬èº«ä½œä¸ºå‚æ•°ï¼Œæœ€ç»ˆè¿”å›å‡½æ•°çš„æ±‚å€¼ç»“æœ

```kotlin
@kotlin.internal.InlineOnly
public inline fun <T, R> T.let(block: (T) -> R): R {
    contract {
        callsInPlace(block, InvocationKind.EXACTLY_ONCE)
    }
    return block(this)
}
```

ç”¨ä¾‹

```kotlin
fun main() {
    val nickName = "leavesC"
    val also = nickName.let {
        it.length
    }
    println(also) //7
}
```

## 6ã€takeIf

takeIf æ¥æ”¶ä¸€ä¸ªè¿”å›å€¼ç±»å‹ä¸º bool çš„å‡½æ•°ï¼Œå½“è¯¥å‚æ•°è¿”å›å€¼ä¸º true æ—¶è¿”å›æ¥å—è€…å¯¹è±¡æœ¬èº«ï¼Œå¦åˆ™è¿”å› null

```kotlin
@kotlin.internal.InlineOnly
@SinceKotlin("1.1")
public inline fun <T> T.takeIf(predicate: (T) -> Boolean): T? {
    contract {
        callsInPlace(predicate, InvocationKind.EXACTLY_ONCE)
    }
    return if (predicate(this)) this else null
}
```

ç”¨ä¾‹

```kotlin
fun main() {
    println(check("leavesC")) //7
    println(check(null)) //0
}

fun check(name: String?): Int {
    return name.takeIf { !it.isNullOrBlank() }?.length ?: 0
}
```

## 7ã€takeUnless

takeUnless çš„åˆ¤æ–­æ¡ä»¶ä¸ takeIf ç›¸åï¼Œè¿™é‡Œä¸å†èµ˜è¿°

```kotlin
@kotlin.internal.InlineOnly
@SinceKotlin("1.1")
public inline fun <T> T.takeUnless(predicate: (T) -> Boolean): T? {
    contract {
        callsInPlace(predicate, InvocationKind.EXACTLY_ONCE)
    }
    return if (!predicate(this)) this else null
}
```

# åä¹ã€å‡½æ•°æ“ä½œç¬¦

## 1ã€æ€»æ•°æ“ä½œç¬¦

### 1ã€any

å¦‚æœè‡³å°‘æœ‰ä¸€ä¸ªå…ƒç´ ç¬¦åˆç»™å‡ºçš„åˆ¤æ–­æ¡ä»¶ï¼Œåˆ™è¿”å› true

```kotlin
val list = listOf(1, 3, 5, 7, 9)
println(list.any { it > 13 })  //false
println(list.any { it > 7 })   //true
```

### 2ã€all

å¦‚æœå…¨éƒ¨çš„å…ƒç´ ç¬¦åˆç»™å‡ºçš„åˆ¤æ–­æ¡ä»¶ï¼Œåˆ™è¿”å› true

```kotlin
val list = listOf(1, 3, 5, 7, 9)
println(list.all { it > 13 })  //false
println(list.all { it > 0 })   //true
```

### 3ã€count

è¿”å›ç¬¦åˆç»™å‡ºåˆ¤æ–­æ¡ä»¶çš„å…ƒç´ æ€»æ•°

```kotlin
val list = listOf(1, 3, 5, 7, 9)
println(list.count { it > 7 })  //1
println(list.count { it > 2 })  //4
```

### 4ã€fold

åœ¨ä¸€ä¸ªåˆå§‹å€¼çš„åŸºç¡€ä¸Šä»ç¬¬ä¸€é¡¹åˆ°æœ€åä¸€é¡¹é€šè¿‡ä¸€ä¸ªå‡½æ•°ç´¯è®¡æ‰€æœ‰çš„å…ƒç´ 

```kotlin
fun main() {
    val list = listOf(1, 3, 5, 7, 9)
    println(list.fold(2) { total, next->
        println("$next , $total")
        next + total
    })
}
```

```kotlin
1 , 2
3 , 3
5 , 6
7 , 11
9 , 18
27
```

### 5ã€foldRight

ä¸ fold  ä¸€æ ·ï¼Œä½†é¡ºåºæ˜¯ä»æœ€åä¸€é¡¹åˆ°ç¬¬ä¸€é¡¹

```kotlin
val list = listOf(1, 3, 5, 7, 9)
println(list.foldRight(2) { next, total->
    println("$next , $total")
    next + total
})
```

```kotlin
9 , 2
7 , 11
5 , 18
3 , 23
1 , 26
27
```

### 6ã€forEach

```kotlin
val list = listOf(1, 3, 5, 7, 9)
list.forEach { print(it + 1) } //246810
```

### 7ã€forEachIndexed

ç±»ä¼¼äº forEach ï¼ŒåŒæ—¶å¯ä»¥å¾—åˆ°å…ƒç´ çš„ç´¢å¼•

```kotlin
val list = listOf(1, 3, 5, 7, 9)
list.forEachIndexed { index, value -> println("$index value is $value") }

0 value is 1
1 value is 3
2 value is 5
3 value is 7
4 value is 9
```

### 8ã€max

è¿”å›æœ€å¤§çš„ä¸€é¡¹ï¼Œå¦‚æœæ²¡æœ‰åˆ™è¿”å›null

```kotlin
val list = listOf(1, 3, 5, 7, 9)
println(list.max()) //9
```

### 9ã€maxBy

æ ¹æ®ç»™å®šçš„å‡½æ•°è¿”å›æœ€å¤§çš„ä¸€é¡¹ï¼Œå¦‚æœæ²¡æœ‰åˆ™è¿”å› null

```kotlin
val list = listOf(1, 3, 5, 7, 9)
println(list.maxBy { -it }) //1
```

### 10ã€min

è¿”å›æœ€å°çš„ä¸€é¡¹ï¼Œå¦‚æœæ²¡æœ‰åˆ™è¿”å›null

```kotlin
val list = listOf(1, 3, 5, 7, 9)
println(list.min()) //1
```

### 11ã€minBy

æ ¹æ®ç»™å®šçš„å‡½æ•°è¿”å›æœ€å°çš„ä¸€é¡¹ï¼Œå¦‚æœæ²¡æœ‰åˆ™è¿”å›null

```kotlin
val list = listOf(1, 3, 5, 7, 9)
println(list.minBy { -it }) //9
```

### 12ã€none

å¦‚æœæ²¡æœ‰ä»»ä½•å…ƒç´ ä¸ç»™å®šçš„å‡½æ•°åŒ¹é…ï¼Œåˆ™è¿”å›true

```kotlin
val list = listOf(1, 3, 5, 7, 9)
println(list.none { it > 10 }) //true
```

### 13ã€reduce

ä¸ fold  ä¸€æ ·ï¼Œä½†æ˜¯æ²¡æœ‰ä¸€ä¸ªåˆå§‹å€¼ã€‚é€šè¿‡ä¸€ä¸ªå‡½æ•°ä»ç¬¬ä¸€é¡¹åˆ°æœ€åä¸€é¡¹è¿›è¡Œç´¯è®¡

```kotlin
val list = listOf(1, 3, 5, 7, 9)
println(list.reduce { total, next ->
    println("$next , $total")
    total + next
})
3 , 1
5 , 4
7 , 9
9 , 16
25
```

### 14ã€reduceRight

ä¸ reduce  ä¸€æ ·ï¼Œä½†æ˜¯é¡ºåºæ˜¯ä»æœ€åä¸€é¡¹åˆ°ç¬¬ä¸€é¡¹

```kotlin
val list = listOf(1, 3, 5, 7, 9)
println(list.reduceRight { next, total ->
    println("$next , $total")
    total + next
})

7 , 9
5 , 16
3 , 21
1 , 24
25
```

### 15ã€sumBy

è¿”å›æ‰€æœ‰æ¯ä¸€é¡¹é€šè¿‡å‡½æ•°è½¬æ¢ä¹‹åçš„æ•°æ®çš„æ€»å’Œ

```kotlin
val list = listOf(1, 3, 5, 7, 9)
println(list.sumBy { it + 1 }) //30
```

## 2ã€è¿‡æ»¤æ“ä½œç¬¦

### 1ã€drop

è¿”å›åŒ…å«å»æ‰å‰nä¸ªå…ƒç´ çš„æ‰€æœ‰å…ƒç´ çš„åˆ—è¡¨

```kotlin
val list = listOf(1, 3, 5, 7, 9)
println(list.drop(2)) //[5, 7, 9]
```

### 2ã€dropWhile

è¿”å›ä»ç¬¬ä¸€ä¸ªå¼€å§‹ä¸ç¬¦åˆç»™å®šå‡½æ•°çš„å…ƒç´ èµ·ä¹‹åçš„åˆ—è¡¨

```kotlin
val list = listOf(1, 3, 5, 7, 9, 2)
println(list.dropWhile { it < 4 }) //[5, 7, 9, 2]
```

### 3ã€dropLastWhile

ä»æœ€åä¸€é¡¹å¼€å§‹ï¼Œè¿”å›ä»å¼€å§‹ä¸ç¬¦åˆç»™å®šå‡½æ•°çš„å…ƒç´ èµ·ä¹‹åçš„åˆ—è¡¨

```kotlin
val list = listOf(10, 1, 3, 5, 7, 9)
println(list.dropLastWhile { it > 4 }) //[10, 1, 3]
```

### 4ã€filter

è¿‡æ»¤æ‰€æœ‰ç¬¦åˆç»™å®šå‡½æ•°æ¡ä»¶çš„å…ƒç´ 

```kotlin
val list = listOf(1, 3, 5, 7, 9, 2)
println(list.filter { it < 4 }) //[1, 3, 2]
```

### 5ã€filterNot

è¿‡æ»¤æ‰€æœ‰ä¸ç¬¦åˆç»™å®šå‡½æ•°æ¡ä»¶çš„å…ƒç´ 

```kotlin
val list = listOf(1, 3, 5, 7, 9, 2)
println(list.filterNot { it < 4 }) //[5, 7, 9]
```

### 6ã€filterNotNull

è¿‡æ»¤æ‰€æœ‰å…ƒç´ ä¸­ä¸æ˜¯nullçš„å…ƒç´ 

```kotlin
val list = listOf(1, 3, 5, 7, 9, 2, null)
println(list.filterNotNull()) //[1, 3, 5, 7, 9, 2]
```

### 7ã€slice

è¿‡æ»¤ä¸€ä¸ªlistä¸­æŒ‡å®šindexçš„å…ƒç´ 

```kotlin
val list = listOf(1, 3, 5, 7, 9, 2, null)
println(list.slice(listOf(0, 3))) //[1, 7]
```

### 8ã€take

è¿”å›ä»ç¬¬ä¸€ä¸ªå¼€å§‹çš„nä¸ªå…ƒç´ 

```kotlin
val list = listOf(1, 3, 5, 7, 9, 2, null)
println(list.take(2)) //[1, 3]
```

### 9ã€takeLast

è¿”å›ä»æœ€åä¸€ä¸ªå¼€å§‹çš„nä¸ªå…ƒç´ 

```kotlin
val list = listOf(1, 3, 5, 7, 9, 2, null)
println(list.takeLast(2)) //[2, null]
```

### 10ã€takeWhile

è¿”å›ä»ç¬¬ä¸€ä¸ªå¼€å§‹ç¬¦åˆç»™å®šå‡½æ•°æ¡ä»¶çš„å…ƒç´ ã€‚

```kotlin
val list = listOf(1, 3, 5, -1, 7, 9, 2)
println(list.takeWhile { it > 2 }) //[]
println(list.takeWhile { it > 0 }) //[1, 3, 5]
```

## 3ã€æ˜ å°„æ“ä½œç¬¦

### 1ã€flatMap

éå†æ‰€æœ‰çš„å…ƒç´ ï¼Œä¸ºæ¯ä¸€ä¸ªåˆ›å»ºä¸€ä¸ªé›†åˆï¼Œæœ€åæŠŠæ‰€æœ‰çš„é›†åˆæ”¾åœ¨ä¸€ä¸ªé›†åˆä¸­

```kotlin
val list = listOf(1, 3, 5, -1, 7, 9, 2)
println(list.flatMap { listOf(it, it + 1) }) //[1, 2, 3, 4, 5, 6, -1, 0, 7, 8, 9, 10, 2, 3]
```

### 2ã€groupBy

è¿”å›ä¸€ä¸ªæ ¹æ®ç»™å®šå‡½æ•°åˆ†ç»„åçš„map 

```kotlin
val list = listOf(1, 3, 5, -1, 7, 9, 2)
println(list.groupBy { listOf(it) }) //{[1]=[1], [3]=[3], [5]=[5], [-1]=[-1], [7]=[7], [9]=[9], [2]=[2]}
println(list.groupBy { listOf(it, it + 1) }) //{[1, 2]=[1], [3, 4]=[3], [5, 6]=[5], [-1, 0]=[-1], [7, 8]=[7], [9, 10]=[9], [2, 3]=[2]}
```

### 3ã€map 

è¿”å›ä¸€ä¸ªæ¯ä¸€ä¸ªå…ƒç´ æ ¹æ®ç»™å®šçš„å‡½æ•°è½¬æ¢æ‰€ç»„æˆçš„Listã€‚ 

```kotlin
val list = listOf(1, 3, 5, -1, 7, 9, 2)
println(list.map { listOf(it) }) //[[1], [3], [5], [-1], [7], [9], [2]]
println(list.map { listOf(it, it + 1) }) //[[1, 2], [3, 4], [5, 6], [-1, 0], [7, 8], [9, 10], [2, 3]]
```

### 4ã€mapIndexed 

è¿”å›ä¸€ä¸ªæ¯ä¸€ä¸ªå…ƒç´ æ ¹æ®ç»™å®šçš„åŒ…å«å…ƒç´ indexçš„å‡½æ•°è½¬æ¢æ‰€ç»„æˆçš„List

```kotlin
val list = listOf(1, 3, 5, -1, 7, 9, 2)
println(list.mapIndexed { index, value -> index }) //[0, 1, 2, 3, 4, 5, 6]
println(list.mapIndexed { index, value -> index * value }) //[0, 3, 10, -3, 28, 45, 12]
```

### 5ã€mapNotNull 

è¿”å›ä¸€ä¸ªæ¯ä¸€ä¸ªénullå…ƒç´ æ ¹æ®ç»™å®šçš„å‡½æ•°è½¬æ¢æ‰€ç»„æˆçš„List

```kotlin
val list = listOf(1, 3, 5, -1, 7, 9, null, 2)
println(list.mapNotNull { it }) //[1, 3, 5, -1, 7, 9, 2]
```

## 4ã€å…ƒç´ æ“ä½œç¬¦ 

### 1ã€contains 

å¦‚æœæŒ‡å®šå…ƒç´ å¯ä»¥åœ¨é›†åˆä¸­æ‰¾åˆ°ï¼Œåˆ™è¿”å›true

```kotlin
val list = listOf(1, 3, 5, -1, 7, 9, null, 2)
println(list.contains(3)) //true
println(list.contains(13)) //false
```

### 2ã€elementAt 

è¿”å›ç»™å®šindexå¯¹åº”çš„å…ƒç´ ï¼Œå¦‚æœindexæ•°ç»„è¶Šç•Œåˆ™ä¼šæŠ›å‡º IndexOutOfBoundsException

```kotlin
val list = listOf(1, 3, 5, -1, 7, 9, null, 2)
println(list.elementAt(3)) //-1
println(list.elementAt(6)) //null
```

### 3ã€elementAtOrElse 

è¿”å›ç»™å®šindexå¯¹åº”çš„å…ƒç´ ï¼Œå¦‚æœindexæ•°ç»„è¶Šç•Œåˆ™ä¼šæ ¹æ®ç»™å®šå‡½æ•°è¿”å›é»˜è®¤å€¼

```kotlin
val list = listOf(1, 3, 5, -1, 7, 9, null, 2)
println(list.elementAtOrElse(3, { it * 2 }))  //-1
println(list.elementAtOrElse(16, { it * 2 })) //32
```

### 4ã€elementAtOrNull 

è¿”å›ç»™å®šindexå¯¹åº”çš„å…ƒç´ ï¼Œå¦‚æœindexæ•°ç»„è¶Šç•Œåˆ™ä¼šè¿”å›null

```kotlin
val list = listOf(1, 3, 5, -1, 7, 9, null, 2)
println(list.elementAtOrNull(3))  //-1
println(list.elementAtOrNull(16)) //null
```

### 5ã€first 

è¿”å›ç¬¦åˆç»™å®šå‡½æ•°æ¡ä»¶çš„ç¬¬ä¸€ä¸ªå…ƒç´ 

```kotlin
val list = listOf(1, 3, 5, -1, 7, 9, 2)
println(list.first { it % 3 == 0 })  //3
```

### 6ã€firstOrNull 

è¿”å›ç¬¦åˆç»™å®šå‡½æ•°æ¡ä»¶çš„ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œå¦‚æœæ²¡æœ‰ç¬¦åˆåˆ™è¿”å›null

```kotlin
val list = listOf(1, 3, 5, -1, 7, 9, 2)
println(list.firstOrNull { it % 3 == 0 })  //3
println(list.firstOrNull { it % 8 == 0 })  //null
```

### 7ã€indexOf 

è¿”å›æŒ‡å®šå…ƒç´ çš„ç¬¬ä¸€ä¸ªindexï¼Œå¦‚æœä¸å­˜åœ¨ï¼Œåˆ™è¿”å› -1

```kotlin
val list = listOf(1, 3, 5, -1, 7, 9, 2)
println(list.indexOf(5))  //2
println(list.indexOf(12)) //-1
```

### 8ã€indexOfFirst 

è¿”å›ç¬¬ä¸€ä¸ªç¬¦åˆç»™å®šå‡½æ•°æ¡ä»¶çš„å…ƒç´ çš„indexï¼Œå¦‚æœæ²¡æœ‰ç¬¦åˆåˆ™è¿”å› -1

```kotlin
val list = listOf(1, 3, 5, 1, 7, 9, 2)
println(list.indexOfFirst { it % 2 == 0 })   //6
println(list.indexOfFirst { it % 12 == 0 })  //-1
```

### 9ã€indexOfLast 

è¿”å›æœ€åä¸€ä¸ªç¬¦åˆç»™å®šå‡½æ•°æ¡ä»¶çš„å…ƒç´ çš„indexï¼Œå¦‚æœæ²¡æœ‰ç¬¦åˆåˆ™è¿”å› -1

```kotlin
val list = listOf(1, 3, 5, 6, 7, 9, 2)
println(list.indexOfLast { it % 2 == 0 })   //6
println(list.indexOfLast { it % 12 == 0 })  //-1
```

### 10ã€last 

è¿”å›ç¬¦åˆç»™å®šå‡½æ•°æ¡ä»¶çš„æœ€åä¸€ä¸ªå…ƒç´ 

```kotlin
val list = listOf(1, 3, 5, 6, 7, 9, 2)
println(list.last { it % 2 == 0 })   //2
println(list.last { it % 3 == 0 })   //9
```

### 11ã€lastIndexOf 

è¿”å›æŒ‡å®šå…ƒç´ çš„æœ€åä¸€ä¸ªindexï¼Œå¦‚æœä¸å­˜åœ¨ï¼Œåˆ™è¿”å› -1

```kotlin
val list = listOf(1, 3, 2, 6, 7, 9, 2)
println(list.lastIndexOf(2))    //6
println(list.lastIndexOf(12))   //-1
```

### 12ã€lastOrNull 

è¿”å›ç¬¦åˆç»™å®šå‡½æ•°æ¡ä»¶çš„æœ€åä¸€ä¸ªå…ƒç´ ï¼Œå¦‚æœæ²¡æœ‰ç¬¦åˆåˆ™è¿”å›null

```kotlin
val list = listOf(1, 3, 2, 6, 7, 9, 2)
println(list.lastOrNull { it / 3 == 3 })    //9
println(list.lastOrNull { it == 10 })       //null
```

### 13ã€single 

è¿”å›ç¬¦åˆç»™å®šå‡½æ•°çš„å•ä¸ªå…ƒç´ ï¼Œå¦‚æœæ²¡æœ‰ç¬¦åˆæˆ–è€…è¶…è¿‡ä¸€ä¸ªï¼Œåˆ™æŠ›å‡ºå¼‚å¸¸

```kotlin
val list = listOf(1, 9, 2, 6, 7, 9, 2)
println(list.single { it % 7 == 0 })  //7
println(list.single { it == 2 })      //IllegalArgumentException
```

### 14ã€singleOrNull 

è¿”å›ç¬¦åˆç»™å®šå‡½æ•°çš„å•ä¸ªå…ƒç´ ï¼Œå¦‚æœæ²¡æœ‰ç¬¦åˆæˆ–è€…è¶…è¿‡ä¸€ä¸ªï¼Œåˆ™è¿”å›null

```kotlin
val list = listOf(1, 9, 2, 6, 7, 9, 2)
println(list.singleOrNull { it % 7 == 0 })  //7
println(list.singleOrNull { it == 2 })      //null
```

## 5ã€ç”Ÿäº§æ“ä½œç¬¦ 

### 1ã€partition 

æŠŠä¸€ä¸ªç»™å®šçš„é›†åˆåˆ†å‰²æˆä¸¤ä¸ªï¼Œç¬¬ä¸€ä¸ªé›†åˆæ˜¯ç”±åŸé›†åˆæ¯ä¸€é¡¹å…ƒç´ åŒ¹é…ç»™å®šå‡½æ•°æ¡ ä»¶è¿”å› true çš„å…ƒç´ ç»„æˆï¼Œç¬¬äºŒä¸ªé›†åˆæ˜¯ç”±åŸé›†åˆæ¯ä¸€é¡¹å…ƒç´ åŒ¹é…ç»™å®šå‡½æ•°æ¡ä»¶è¿”å› false çš„å…ƒç´ ç»„æˆ

```kotlin
val list = listOf(1, 9, 2, 6, 7, 9, 2)
val (list1, list2) = list.partition { it % 2 == 0 }
println(list1)  //[2, 6, 2]
println(list2)  //[1, 9, 7, 9]
```

### 2ã€plus 

è¿”å›ä¸€ä¸ªåŒ…å«åŸé›†åˆå’Œç»™å®šé›†åˆä¸­æ‰€æœ‰å…ƒç´ çš„é›†åˆï¼Œå› ä¸ºå‡½æ•°çš„åå­—åŸå› ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ + æ“ä½œç¬¦

```kotlin
val list1 = listOf(1, 9, 2, 6, 7, 9, 2)
val list2 = listOf(1, 2, 4, 6, 8, 10)
println(list1.plus(list2)) //[1, 9, 2, 6, 7, 9, 2, 1, 2, 4, 6, 8, 10]
println(list1 + list2)  //[1, 9, 2, 6, 7, 9, 2, 1, 2, 4, 6, 8, 10]
```

### 3ã€zip 

è¿”å›ç”± pair ç»„æˆçš„Listï¼Œæ¯ä¸ª pair ç”±ä¸¤ä¸ªé›†åˆä¸­ç›¸åŒindexçš„å…ƒç´ ç»„æˆã€‚è¿™ä¸ªè¿”å›çš„Listçš„å¤§å°ç”±æœ€å°çš„é‚£ä¸ªé›†åˆå†³å®š

```kotlin
val list1 = listOf(1, 9, 2, 6, 7, 9, 2)
val list2 = listOf(1, 2, 4, 6, 8, 10)
val list3 = list1.zip(list2)
println(list3.javaClass)
println(list3.get(0).javaClass)
println("${list3.get(0).first} , ${list3.get(0).second}")
list3.forEach { println(it) }
```

```kotlin
class java.util.ArrayList
class kotlin.Pair
1 , 1
(1, 1)
(9, 2)
(2, 4)
(6, 6)
(7, 8)
(9, 10)
```

### 4ã€unzip 

ä»åŒ…å«pairçš„Listä¸­ç”ŸæˆåŒ…å«Listçš„Pair

```kotlin
val list1 = listOf(Pair("leavesC", 1), Pair("leavesC_2", 2), Pair("leavesC_3", 3))
val list2 = list1.unzip()
println(list2.javaClass)
println(list2.first)
println(list2.second)
```

```kotlin
class kotlin.Pair
[leavesC, leavesC_2, leavesC_3]
[1, 2, 3]
```

## 6ã€é¡ºåºæ“ä½œç¬¦ 

### 1ã€reverse 

è¿”å›ä¸€ä¸ªä¸æŒ‡å®šlistç›¸åé¡ºåºçš„list

```kotlin
val list1 = listOf(Pair("leavesC", 1), Pair("leavesC_2", 2), Pair("leavesC_3", 3))
val list2 = list1.reversed()
println(list2)      //[(leavesC_3, 3), (leavesC_2, 2), (leavesC, 1)]
```

### 2ã€sort 

è¿”å›ä¸€ä¸ªè‡ªç„¶æ’åºåçš„list

```kotlin
val list1 = listOf(2, 4, 1, 9, 5, 10)
val list2 = list1.sorted()
println(list2) //[1, 2, 4, 5, 9, 10]

val list3 = listOf("a", "c", "ab", "b", "cdd", "cda")
val list4 = list3.sorted()
println(list4) //[a, ab, b, c, cda, cdd]
```

### 3ã€sortBy 

è¿”å›ä¸€ä¸ªæ ¹æ®æŒ‡å®šå‡½æ•°æ’åºåçš„list 

```kotlin
val list1 = listOf(2, 4, 1, 9, 5, 10)
val list2 = list1.sortedBy { it - 3 }
println(list2) //[1, 2, 4, 5, 9, 10]
```

### 4ã€sortDescending 

è¿”å›ä¸€ä¸ªé™åºæ’åºåçš„List

```kotlin
val list1 = listOf(2, 4, 1, 9, 5, 10)
val list2 = list1.sortedDescending()
println(list2) //[10, 9, 5, 4, 2, 1]
```

### 5ã€sortDescendingBy 

è¿”å›ä¸€ä¸ªæ ¹æ®æŒ‡å®šå‡½æ•°é™åºæ’åºåçš„list

```kotlin
val list1 = listOf(2, 4, 1, 9, 5, 10)
val list2 = list1.sortedByDescending { it % 2 }
println(list2) //[1, 9, 5, 2, 4, 10]
```

# äºŒåã€å¼‚å¸¸

kotlin ä¸­å¼‚å¸¸å¤„ç†çš„åŸºæœ¬å½¢å¼å’Œ Java ç±»ä¼¼

```kotlin
fun compute(index: Int): Boolean {
    if (index !in 0..10) {
        throw IllegalArgumentException("å‚æ•°é”™è¯¯")
    }
    return true
}
```

å’Œ Java ä¸åŒçš„æ˜¯ï¼Œkotlin ä¸­ throw ç»“æ„æ˜¯ä¸€ä¸ªè¡¨è¾¾å¼ï¼Œå¯ä»¥ä½œä¸ºå¦ä¸€ä¸ªè¡¨è¾¾å¼çš„ä¸€éƒ¨åˆ†æ¥ä½¿ç”¨

ä¾‹å¦‚ä¸‹é¢è¿™ä¸ªä¾‹å­ï¼Œå¦‚æœæ¡ä»¶ä¸æ»¡è¶³ï¼Œåˆ™å°†æŠ›å‡ºå¼‚å¸¸ï¼Œä»è€Œå¯¼è‡´ status å˜é‡ä¹Ÿä¸ä¼šåˆå§‹åŒ–

```kotlin
val status = if (index in 0..10) index else throw IllegalArgumentException("å‚æ•°é”™è¯¯")
```

æ­¤å¤–ï¼Œåœ¨ Java ä¸­å¯¹äºå—æ£€å¼‚å¸¸å¿…é¡»æ˜¾å¼åœ°å¤„ç†ï¼Œé€šè¿‡ try/catch è¯­å¥æ•è·å¼‚å¸¸æˆ–è€…æ˜¯æŠ›ç»™å…¶è°ƒç”¨è€…æ¥å¤„ç†ã€‚è€Œ kotlin ä¸åŒºåˆ†å—æ£€å¼‚å¸¸å’Œæœªå—æ£€å¼‚å¸¸ï¼Œä¸ç”¨æŒ‡å®šå‡½æ•°æŠ›å‡ºçš„å¼‚å¸¸ï¼Œå¯ä»¥å¤„ç†ä¹Ÿå¯ä»¥ä¸å¤„ç†å¼‚å¸¸

åœ¨ kotlin ä¸­ ï¼Œtry å…³é”®å­—å¼•å…¥äº†ä¸€ä¸ªè¡¨è¾¾å¼ï¼Œä»è€Œå¯ä»¥æŠŠè¡¨è¾¾å¼çš„å€¼èµ‹ç»™ä¸€ä¸ªå˜é‡ã€‚å¦‚æœä¸€ä¸ª try ä»£ç å—æ‰§è¡Œæ­£å¸¸ï¼Œä»£ç å—ä¸­æœ€åä¸€ä¸ªè¡¨è¾¾å¼å°±æ˜¯ç»“æœï¼Œå¦‚æœæ•è·åˆ°äº†ä¸€ä¸ªå¼‚å¸¸ï¼Œåˆ™ç›¸åº” catch ä»£ç å—ä¸­æœ€åä¸€ä¸ªè¡¨è¾¾å¼å°±æ˜¯ç»“æœ

çœ‹ä»¥ä¸‹ä¾‹å­ï¼Œå¦‚æœ try è¡¨è¾¾å¼åŒ…è£¹çš„è¡¨è¾¾å¼ä¼šæŠ›å‡ºå¼‚å¸¸ï¼Œåˆ™è¿”å›å€¼ä¸º null ï¼Œå¦åˆ™ä¸º true 

```kotlin
fun main() {
    compute(5)   //fun end : true
    compute(100) //fun end : null
}

fun compute(index: Int) {
    val status = try {
        if (index in 0..10) true else throw IllegalArgumentException("å‚æ•°é”™è¯¯")
    } catch (e: Exception) {
        null
    }
    println("fun end : " + status)
}
```

ä½†æ˜¯ï¼Œå¦‚æœåœ¨ catch è¯­å¥ä¸­ä½¿ç”¨ return ç»“æŸäº† compute å‡½æ•°ï¼Œåˆ™æ²¡æœ‰ä»»ä½•è¾“å‡º

```kotlin
fun main() {
    compute(5)   //fun end : true
    compute(100) //æ²¡æœ‰ä»»ä½•è¾“å‡º
}

fun compute(index: Int) {
    val status = try {
        if (index in 0..10) true else throw IllegalArgumentException("å‚æ•°é”™è¯¯")
    } catch (e: Exception) {
        return
    }
    println("fun end : " + status)
}
```

# äºŒåä¸€ã€è¿ç®—ç¬¦é‡è½½

kotlin å…è®¸ä¸ºç±»å‹æä¾›é¢„å®šä¹‰çš„æ“ä½œç¬¦å®ç°ï¼Œè¿™äº›æ“ä½œç¬¦å…·æœ‰å›ºå®šçš„ç¬¦å·è¡¨ç¤ºï¼ˆä¾‹å¦‚ + å’Œ * ï¼‰å’Œå›ºå®šçš„ä¼˜å…ˆçº§ï¼Œé€šè¿‡æ“ä½œç¬¦é‡è½½å¯ä»¥å°†æ“ä½œç¬¦çš„è¡Œä¸ºæ˜ å°„åˆ°æŒ‡å®šçš„æ–¹æ³•ã€‚ä¸ºå®ç°è¿™æ ·çš„æ“ä½œç¬¦ï¼Œéœ€è¦ä¸ºç±»æä¾›ä¸€ä¸ªå›ºå®šåå­—çš„æˆå‘˜å‡½æ•°æˆ–æ‰©å±•å‡½æ•°ï¼Œç›¸åº”çš„é‡è½½æ“ä½œç¬¦çš„å‡½æ•°éœ€è¦ç”¨ operator ä¿®é¥°ç¬¦æ ‡è®°

## 1ã€ä¸€å…ƒæ“ä½œç¬¦

| æ“ä½œç¬¦ |      å‡½æ•°      |
| ------ | :------------: |
| +a     | a.unaryPlus()  |
| -a     | a.unaryMinus() |
| !a     |    a.not()     |
| a++    |    a.inc()     |
| a--    |    a.dec()     |

## 2ã€äºŒå…ƒæ“ä½œç¬¦

| æ“ä½œç¬¦  |       å‡½æ•°       |
| ------- | :--------------: |
| a + b   |    a.plus(b)     |
| a - b   |    a.minus(b)    |
| a * b   |    a.times(b)    |
| a / b   |     a.div(b)     |
| a % b   |     a.rem(b)     |
| a..b    |   a.rangeTo(b)   |
| a in b  |  b.contains(a)   |
| a !in b |  !b.contains(a)  |
| a += b  | a.plusAssign(b)  |
| a -= b  | a.minusAssign(b) |
| a *= b  | a.timesAssign(b) |
| a /= b  |  a.divAssign(b)  |
| a %= b  |  a.remAssign(b)  |

## 3ã€æ•°ç»„æ“ä½œç¬¦

| æ“ä½œç¬¦               |          å‡½æ•°           |
| -------------------- | :---------------------: |
| a[i]                 |        a.get(i)         |
| a[i, j]              |       a.get(i, j)       |
| a[i_1, ..., i_n]     |  a.get(i_1, ..., i_n)   |
| a[i] = b             |       a.set(i, b)       |
| a[i, j] = b          |     a.set(i, j, b)      |
| a[i_1, ..., i_n] = b | a.set(i_1, ..., i_n, b) |

## 4ã€ç­‰äºæ“ä½œç¬¦

| æ“ä½œç¬¦ |             å‡½æ•°              |
| ------ | :---------------------------: |
| a == b |  a?.equals(b) ?: b === null   |
| a != b | !(a?.equals(b) ?: b === null) |

ç›¸ç­‰æ“ä½œç¬¦æœ‰ä¸€ç‚¹ä¸åŒï¼Œä¸ºäº†è¾¾åˆ°æ­£ç¡®åˆé€‚çš„ç›¸ç­‰æ£€æŸ¥åšäº†æ›´å¤æ‚çš„è½¬æ¢ï¼Œå› ä¸ºè¦å¾—åˆ°ä¸€ä¸ªç¡®åˆ‡çš„å‡½æ•°ç»“æ„æ¯”è¾ƒï¼Œä¸ä»…ä»…æ˜¯æŒ‡å®šçš„åç§°

æ–¹æ³•å¿…é¡»è¦å¦‚ä¸‹å‡†ç¡®åœ°è¢«å®ç°ï¼š

```kotlin
operator fun equals(other: Any?): Boolean
```

æ“ä½œç¬¦ ===  å’Œ !==  ç”¨æ¥åšèº«ä»½æ£€æŸ¥ï¼ˆå®ƒä»¬åˆ†åˆ«æ˜¯ Java ä¸­çš„ ==  å’Œ !=  ï¼‰ï¼Œå¹¶ä¸”å®ƒä»¬ä¸èƒ½è¢«é‡è½½

## 5ã€æ¯”è¾ƒæ“ä½œç¬¦

| æ“ä½œç¬¦ |        å‡½æ•°         |
| ------ | :-----------------: |
| a > b  | a.compareTo(b) > 0  |
| a < b  | a.compareTo(b) < 0  |
| a >= b | a.compareTo(b) >= 0 |
| a <= b | a.compareTo(b) <= 0 |

æ‰€æœ‰çš„æ¯”è¾ƒéƒ½è½¬æ¢ä¸ºå¯¹  compareTo  çš„è°ƒç”¨ï¼Œè¿™ä¸ªå‡½æ•°éœ€è¦è¿”å›  Int  å€¼

## 6ã€å‡½æ•°è°ƒç”¨

| æ–¹æ³•             |          è°ƒç”¨           |
| ---------------- | :---------------------: |
| a()              |       a.invoke()        |
| a(i)             |       a.invoke(i)       |
| a(i, j)          |     a.invoke(i, j)      |
| a(i_1, ..., i_n) | a.invoke(i_1, ..., i_n) |

## 7ã€ä¾‹å­

çœ‹å‡ ä¸ªä¾‹å­

```kotlin
data class Point(val x: Int, val y: Int) {

    //+Point
    operator fun unaryPlus() = Point(+x, +y)

    //Point++ / ++Point
    operator fun inc() = Point(x + 1, y + 1)

    //Point + Point
    operator fun plus(point: Point) = Point(x + point.x, y + point.y)

    //Point + Int
    operator fun plus(value: Int) = Point(x + value, y + value)

    //Point[index]
    operator fun get(index: Int): Int {
        return when (index) {
            0 -> x
            1 -> y
            else -> throw IndexOutOfBoundsException("æ— æ•ˆç´¢å¼•")
        }
    }

    //Point(index)
    operator fun invoke(index: Int) = when (index) {
        0 -> x
        1 -> y
        else -> throw IndexOutOfBoundsException("æ— æ•ˆç´¢å¼•")
    }

}
```

```kotlin
fun main() {
    //+Point(x=10, y=-20)  =  Point(x=10, y=-20)
    println("+${Point(10, -20)}  =  ${+Point(10, -20)}")

    //Point(x=10, y=-20)++  =  Point(x=10, y=-20)
    var point = Point(10, -20)
    println("${Point(10, -20)}++  =  ${point++}")

    //++Point(x=10, y=-20)  =  Point(x=11, y=-19)
    point = Point(10, -20)
    println("++${Point(10, -20)}  =  ${++point}")

    //Point(x=10, y=-20) + Point(x=10, y=-20)  =  Point(x=20, y=-40)
    println("${Point(10, -20)} + ${Point(10, -20)}  =  ${Point(10, -20) + Point(10, -20)}")

    //Point(x=10, y=-20) + 5  =  Point(x=15, y=-15)
    println("${Point(10, -20)} + ${5}  =  ${Point(10, -20) + 5}")

    point = Point(10, -20)
    //point[0] value is: 10
    println("point[0] value is: ${point[0]}")
    //point[1] value is: -20
    println("point[1] value is: ${point[1]}")

    //point(0) values is: 10
    println("point(0) values is: ${point(0)}")
}
```

# äºŒåäºŒã€ä¸­ç¼€è°ƒç”¨ä¸è§£æ„å£°æ˜

## 1ã€ä¸­ç¼€è°ƒç”¨

å¯ä»¥ä»¥ä»¥ä¸‹å½¢å¼åˆ›å»ºä¸€ä¸ª Map å˜é‡

```kotlin
fun main() {
    val maps = mapOf(1 to "leavesC", 2 to "ye", 3 to "https://juejin.cn/user/923245496518439")
    maps.forEach { key, value -> println("key is : $key , value is : $value") }
}
```

ä½¿ç”¨ â€œtoâ€ æ¥å£°æ˜ map çš„ key ä¸ value ä¹‹é—´çš„å¯¹åº”å…³ç³»ï¼Œè¿™ç§å½¢å¼çš„å‡½æ•°è°ƒç”¨è¢«ç§°ä¸ºä¸­ç¼€è°ƒç”¨

kotlin æ ‡å‡†åº“ä¸­å¯¹ to å‡½æ•°çš„å£°æ˜å¦‚ä¸‹æ‰€ç¤ºï¼Œå…¶ä½œä¸ºæ‰©å±•å‡½æ•°å­˜åœ¨ï¼Œä¸”æ˜¯ä¸€ä¸ªæ³›å‹å‡½æ•°ï¼Œè¿”å›å€¼ Pair æœ€ç»ˆå†é€šè¿‡è§£æ„å£°æ˜åˆ†åˆ«å°† key å’Œ value ä¼ ç»™ Map

```kotlin
public infix fun <A, B> A.to(that: B): Pair<A, B> = Pair(this, that)
```

ä¸­ç¼€è°ƒç”¨åªèƒ½ä¸åªæœ‰ä¸€ä¸ªå‚æ•°çš„å‡½æ•°ä¸€èµ·ä½¿ç”¨ï¼Œæ— è®ºæ˜¯æ™®é€šçš„å‡½æ•°è¿˜æ˜¯æ‰©å±•å‡½æ•°ã€‚ä¸­ç¼€ç¬¦å·éœ€è¦é€šè¿‡ **infix** ä¿®é¥°ç¬¦æ¥è¿›è¡Œæ ‡è®°

```kotlin
fun main() {
    val pair = 10 test "leavesC"
    val pair2 = 1.2 test 20
    println(pair2.javaClass) //class kotlin.Pair
}

infix fun Any.test(other: Any) = Pair(this, other)
```

å¯¹äº `mapOf` å‡½æ•°æ¥è¯´ï¼Œå®ƒå¯ä»¥æ¥æ”¶ä¸å®šæ•°é‡çš„ `Pair` ç±»å‹å¯¹è±¡ï¼Œå› æ­¤æˆ‘ä»¬ä¹Ÿå¯ä»¥é€šè¿‡è‡ªå®šä¹‰çš„ä¸­ç¼€è°ƒç”¨ç¬¦ `test` æ¥åˆ›å»ºä¸€ä¸ª map å˜é‡

```kotlin
public fun <K, V> mapOf(vararg pairs: Pair<K, V>): Map<K, V> =
    if (pairs.size > 0) pairs.toMap(LinkedHashMap(mapCapacity(pairs.size))) else emptyMap()

 val map = mapOf(10 test "leavesC", 20 test "hello")
```

## 2ã€è§£æ„å£°æ˜

æœ‰æ—¶ä¼šæœ‰æŠŠä¸€ä¸ªå¯¹è±¡æ‹†è§£æˆå¤šä¸ªå˜é‡çš„éœ€æ±‚ï¼Œåœ¨ kotlin ä¸­è¿™ç§è¯­æ³•ç§°ä¸ºè§£æ„å£°æ˜

ä¾‹å¦‚ï¼Œä»¥ä¸‹ä¾‹å­å°† Person å˜é‡ç»“æ„ä¸ºäº†ä¸¤ä¸ªæ–°å˜é‡ï¼šname å’Œ ageï¼Œå¹¶ä¸”å¯ä»¥ç‹¬ç«‹ä½¿ç”¨å®ƒä»¬

```kotlin
data class Person(val name: String, val age: Int)

fun main() {
    val (name, age) = Person("leavesC", 24)
    println("Name: $name , age: $age")
    //Name: leavesC , age: 24
}
```

ä¸€ä¸ªè§£æ„å£°æ˜ä¼šè¢«ç¼–è¯‘æˆä»¥ä¸‹ä»£ç ï¼š

```kotlin
val name = person.component1()
val age = person.component2()
```

å…¶ä¸­çš„ `component1()` å’Œ `component2()` å‡½æ•°æ˜¯åœ¨ kotlin ä¸­å¹¿æ³›ä½¿ç”¨çš„çº¦å®šåŸåˆ™çš„å¦ä¸€ä¸ªä¾‹å­ã€‚ä»»ä½•è¡¨è¾¾å¼éƒ½å¯ä»¥å‡ºç°åœ¨è§£æ„å£°æ˜çš„å³ä¾§ï¼Œåªè¦å¯ä»¥å¯¹å®ƒè°ƒç”¨æ‰€éœ€æ•°é‡çš„ `component` å‡½æ•°å³å¯

éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œ`componentN()` å‡½æ•°éœ€è¦ç”¨ `operator` å…³é”®å­—æ ‡è®°ï¼Œä»¥å…è®¸åœ¨è§£æ„å£°æ˜ä¸­ä½¿ç”¨å®ƒä»¬

å¯¹äºæ•°æ®ç±»æ¥è¯´ï¼Œå…¶è‡ªåŠ¨ç”Ÿæˆäº† `componentN()` å‡½æ•°ï¼Œè€Œå¯¹éæ•°æ®ç±»ï¼Œä¸ºäº†ä½¿ç”¨è§£æ„å£°æ˜ï¼Œéœ€è¦æˆ‘ä»¬è‡ªå·±æ¥æ‰‹åŠ¨å£°æ˜å‡½æ•°

```kotlin
class Point(val x: Int, val y: Int) {
    operator fun component1() = x
    operator fun component2() = y
}

fun main() {
    val point = Point(100, 200)
    val (x, y) = point
    println("x: $x , y: $y")
    //x: 100 , y: 200
}
```

å¦‚æœæˆ‘ä»¬éœ€è¦ä»ä¸€ä¸ªå‡½æ•°è¿”å›ä¸¤ä¸ªæˆ–è€…æ›´å¤šçš„å€¼ï¼Œè¿™æ—¶å€™ä½¿ç”¨è§£æ„å£°æ˜å°±ä¼šæ¯”è¾ƒæ–¹ä¾¿äº†

è¿™é‡Œä½¿ç”¨çš„æ˜¯æ ‡å‡†ç±» Pair æ¥åŒ…è£…è¦ä¼ é€’çš„æ•°æ®ï¼Œå½“ç„¶ï¼Œä¹Ÿå¯ä»¥è‡ªå®šä¹‰æ•°æ®ç±»

```kotlin
fun computer(): Pair<String, Int> {
    //å„ç§è®¡ç®—
    return Pair("leavesC", 24)
}

fun main() {
    val (name, age) = computer()
    println("Name: $name , age: $age")
}
```

æ­¤å¤–ï¼Œè§£æ„å£°æ˜ä¹Ÿå¯ä»¥ç”¨åœ¨ for å¾ªç¯ä¸­

```kotlin
val list = listOf(Person("leavesC", 24), Person("leavesC", 25))
for ((name, age) in list) {
    println("Name: $name , age: $age")
}
```

å¯¹äºéå† map åŒæ ·é€‚ç”¨

```kotlin
val map = mapOf("leavesC" to 24, "ye" to 25)
for ((name, age) in map) {
    println("Name: $name , age: $age")
}
```

åŒæ ·ä¹Ÿé€‚ç”¨äº lambda è¡¨è¾¾å¼

```kotlin
val map = mapOf("leavesC" to 24, "ye" to 25)
map.mapKeys { (key, value) -> println("key : $key , value : $value") }
```

å¦‚æœåœ¨è§£æ„å£°æ˜ä¸­ä¸éœ€è¦æŸä¸ªå˜é‡ï¼Œé‚£ä¹ˆå¯ä»¥ç”¨ä¸‹åˆ’çº¿å–ä»£å…¶åç§°ï¼Œæ­¤æ—¶ä¸ä¼šè°ƒç”¨ç›¸åº”çš„ `componentN()` æ“ä½œç¬¦å‡½æ•°

```kotlin
val map = mapOf("leavesC" to 24, "ye" to 25)
for ((_, age) in map) {
    println("age: $age")
}
```

# äºŒåä¸‰ã€Object å…³é”®å­—

## 1ã€å¯¹è±¡å£°æ˜

åœ¨ kotlin çš„ä¸–ç•Œä¸­ï¼Œå¯ä»¥é€šè¿‡**å¯¹è±¡å£°æ˜**è¿™ä¸€åŠŸèƒ½æ¥å®ç° Java ä¸­çš„å•ä¾‹æ¨¡å¼ï¼Œå°†ç±»å£°æ˜ä¸è¯¥ç±»çš„å•ä¸€å®ä¾‹å£°æ˜ç»“åˆåˆ°ä¸€èµ·ã€‚ä¸ç±»ä¸€æ ·ï¼Œä¸€ä¸ªå¯¹è±¡å£°æ˜å¯ä»¥åŒ…å«å±æ€§ã€æ–¹æ³•ã€åˆå§‹åŒ–è¯­å¥å—ç­‰çš„å£°æ˜ï¼Œä¸”å¯ä»¥ç»§æ‰¿ç±»å’Œå®ç°æ¥å£ï¼Œå”¯ä¸€ä¸è¢«å…è®¸çš„æ˜¯æ„é€ æ–¹æ³•

ä¸æ™®é€šç±»çš„å®ä¾‹ä¸åŒï¼Œå¯¹è±¡å£°æ˜åœ¨å®šä¹‰çš„æ—¶å€™å°±è¢«ç«‹å³åˆ›å»ºäº†ï¼Œä¸éœ€è¦åœ¨ä»£ç çš„å…¶å®ƒåœ°æ–¹è°ƒç”¨æ„é€ æ–¹æ³•ï¼Œå› æ­¤ä¸ºå¯¹è±¡å£°æ˜å®šä¹‰æ„é€ æ–¹æ³•æ˜¯æ²¡æœ‰æ„ä¹‰çš„

```kotlin
interface Fly {

    fun fly()

}

open class Eat {

    fun eat() {
        println("eat")
    }

}

object Animal : Eat(), Fly {

    override fun fly() {
        println("fly")
    }

}

fun main() {
    Animal.fly()
    Animal.eat()
}
```

kotlin ä¸­çš„å¯¹è±¡å£°æ˜è¢«ç¼–è¯‘æˆäº†é€šè¿‡é™æ€å­—æ®µæ¥æŒæœ‰å®ƒçš„å•ä¸€å®ä¾‹çš„ç±»ï¼Œè¿™ä¸ªå­—æ®µåå­—å§‹ç»ˆéƒ½æ˜¯ INSTANCE

ä¾‹å¦‚ï¼Œå¯¹äº kotlin ä¸­çš„å¦‚ä¸‹ä¸¤ä¸ªå¯¹è±¡å£°æ˜

```kotlin
class Test {

    object SingleClass {
        val names = arrayListOf<String>()
    }

    object SingleClass2 {
        val names = arrayListOf<String>()
    }

}
```

åœ¨ Java ä»£ç ä¸­æ¥è®¿é—®è¿™ä¸¤ä¸ªå¯¹è±¡

```java
public static void main(String[] args) {
    Test.SingleClass.INSTANCE.getNames();
    Test.SingleClass2.INSTANCE.getNames();
}
```

## 2ã€ä¼´ç”Ÿå¯¹è±¡

å¦‚æœéœ€è¦ä¸€ä¸ªå¯ä»¥åœ¨æ²¡æœ‰ç±»å®ä¾‹çš„æƒ…å†µä¸‹è°ƒç”¨ä½†æ˜¯éœ€è¦è®¿é—®ç±»å†…éƒ¨çš„å‡½æ•°ï¼ˆç±»ä¼¼äº Java ä¸­çš„é™æ€å˜é‡/é™æ€å‡½æ•°ï¼‰ï¼Œå¯ä»¥å°†å…¶å†™æˆé‚£ä¸ªç±»ä¸­çš„å¯¹è±¡å£°æ˜çš„æˆå‘˜

é€šè¿‡å…³é”®å­— companion ï¼Œå°±å¯ä»¥è·å¾—é€šè¿‡å®¹å™¨ç±»åç§°æ¥è®¿é—®è¿™ä¸ªå¯¹è±¡çš„æ–¹æ³•å’Œå±æ€§çš„èƒ½åŠ›ï¼Œä¸å†éœ€è¦æ˜¾å¼åœ°æŒ‡æ˜å¯¹è±¡çš„åç§°

```kotlin
class Test {

    companion object {

        const val NAME = ""

        fun testFun() {

        }
    }

}

fun main() {
    Test.NAME
    Test.testFun()
}
```

### 1ã€å·¥å‚æ¨¡å¼

å¯ä»¥åˆ©ç”¨ä¼´ç”Ÿå¯¹è±¡æ¥å®ç°å·¥å‚æ¨¡å¼

```kotlin
private class User private constructor(val name: String) {

    companion object {
        fun newById(id: Int) = User(id.toString())

        fun newByDouble(double: Double) = User(double.toString())
    }

}

fun main() {
    //æ„é€ å‡½æ•°ç§æœ‰ï¼Œæ— æ³•åˆ›å»º
    //val user1 = User("leavesC")
    val user2 = User.newById(10)
    val user3 = User.newByDouble(1.3)
}
```

### 2ã€æŒ‡å®šåç§°

ä¼´ç”Ÿå¯¹è±¡æ—¢å¯ä»¥ä¸ºå…¶æŒ‡å®šåå­—ï¼Œä¹Ÿå¯ä»¥ç›´æ¥ä½¿ç”¨å…¶é»˜è®¤å Companionï¼Œåœ¨å¼•ç”¨ä¼´ç”Ÿå¯¹è±¡æ—¶ï¼Œå¯ä»¥è‡ªç”±é€‰æ‹©æ˜¯å¦è¦åœ¨ç±»åååŠ ä¸Šä¼´ç”Ÿå¯¹è±¡å

å¦‚æœä½¿ç”¨çš„æ˜¯å…¶é»˜è®¤å Companionï¼ˆæ²¡æœ‰è‡ªå®šä¹‰åç§°ï¼‰ï¼Œåˆ™ä»¥ä¸‹ä¸¤ç§å¼•ç”¨æ–¹å¼éƒ½æ˜¯ç­‰ä»·çš„

```kotlin
val user2 = User.Companion.newById(10)
val user3 = User.newByDouble(1.3)
```

å¦‚æœä¸ºä¼´ç”Ÿå¯¹è±¡å£°æ˜äº†è‡ªå®šä¹‰åç§°ï¼Œå¼•ç”¨æ–¹å¼ç­‰åŒ

```kotlin
private class User private constructor(val name: String) {

    companion object UserLoader {
        fun newById(id: Int) = User(id.toString())

        fun newByDouble(double: Double) = User(double.toString())
    }

}

fun main() {
    //æ„é€ å‡½æ•°ç§æœ‰ï¼Œæ— æ³•åˆ›å»º
    //val user1 = User("leavesC")
    val user2 = User.UserLoader.newById(10)
    val user3 = User.newByDouble(1.3)
}
```

### 3ã€å®ç°æ¥å£

ä¼´ç”Ÿå¯¹è±¡ä¹Ÿå¯ä»¥å®ç°æ¥å£ï¼Œä¸”å¯ä»¥ç›´æ¥å°†åŒ…å«å®ƒçš„ç±»çš„åå­—å½“åšå®ç°äº†è¯¥æ¥å£çš„å¯¹è±¡å®ä¾‹æ¥ä½¿ç”¨

```kotlin
private class User private constructor(val name: String) {

    companion object UserLoader : Runnable {

        override fun run() {

        }
    }

}

fun newThread(runnable: Runnable) = Thread(runnable)

fun main() {
    //User ä¼šç›´æ¥è¢«å½“åš Runnable çš„å®ä¾‹
    val thread = newThread(User)
    val thread2 = newThread(User.UserLoader)
}
```

## 3ã€å¯¹è±¡è¡¨è¾¾å¼

object èƒ½ç”¨æ¥å£°æ˜åŒ¿åå¯¹è±¡ï¼Œå¯ç”¨äºæ›¿ä»£ Java ä¸­çš„åŒ¿åå†…éƒ¨ç±»ï¼Œä¸”å¯¹è±¡è¡¨è¾¾å¼ä¸­çš„ä»£ç å¯ä»¥è®¿é—®å¹¶ä¿®æ”¹å…¶å¤–éƒ¨çš„é final å‹çš„å˜é‡

```kotlin
fun newThread(runnable: Runnable) = Thread(runnable)

fun main() {
    var count = 0
    val thread = newThread(object : Runnable {
        override fun run() {
            count++
        }
    })
}
```

# äºŒåå››ã€å§”æ‰˜

## 1ã€å§”æ‰˜æ¨¡å¼

å§”æ‰˜æ¨¡å¼æ˜¯ä¸€ç§åŸºæœ¬çš„è®¾è®¡æ¨¡å¼ï¼Œè¯¥æ¨¡å¼ä¸‹æœ‰ä¸¤ä¸ªå¯¹è±¡å‚ä¸å¤„ç†åŒä¸€ä¸ªè¯·æ±‚ï¼Œæ¥å—è¯·æ±‚çš„å¯¹è±¡å°†è¯·æ±‚å§”æ‰˜ç»™å¦ä¸€ä¸ªå¯¹è±¡æ¥å¤„ç†ã€‚kotlin åŸç”Ÿæ”¯æŒå§”æ‰˜æ¨¡å¼ï¼Œå¯ä»¥é›¶æ ·æ¿ä»£ç æ¥å®ç°ï¼Œé€šè¿‡å…³é”®å­— by å®ç°å§”æ‰˜

```kotlin
interface Printer {

    fun print()
    
}

class DefaultPrinter : Printer {

    override fun print() {
         println("DefaultPrinter print")
    }

}

class CustomPrinter(val printer: Printer) : Printer by printer

fun main() {
    val printer = CustomPrinter(DefaultPrinter())
    printer.print() //DefaultPrinter print
}
```

CustomPrinter çš„ by å­å¥è¡¨ç¤ºå°†ä¼šåœ¨ CustomPrinter ä¸­å­˜å‚¨ printer å˜é‡ï¼Œå¹¶ä¸”ç¼–è¯‘å™¨å°†ä¸º CustomPrinter éšå¼ç”Ÿæˆ Printer æ¥å£çš„æ‰€æœ‰æŠ½è±¡æ–¹æ³•ï¼Œå¹¶å°†è¿™äº›æ–¹æ³•çš„è°ƒç”¨æ“ä½œè½¬å‘ç»™ printer 

æ­¤å¤–ï¼ŒCustomPrinter ä¹Ÿå¯ä»¥å†³å®šè‡ªå·±å®ç°éƒ¨åˆ†æ–¹æ³•æˆ–å…¨éƒ¨è‡ªå·±å®ç°ï¼Œä½†é‡å†™çš„æˆå‘˜ä¸ä¼šåœ¨å§”æ‰˜å¯¹è±¡çš„æˆå‘˜ä¸­è°ƒç”¨ ï¼Œå§”æ‰˜å¯¹è±¡çš„æˆå‘˜åªèƒ½è®¿é—®å…¶è‡ªèº«å¯¹æ¥å£æˆå‘˜å®ç°

```kotlin
interface Printer {

    val message: String

    fun print()

    fun reprint()

}

class DefaultPrinter : Printer {

    override val message: String = "DefaultPrinter message"

    override fun print() {
        println(message)
    }

    override fun reprint() {
        println("DefaultPrinter reprint")
    }

}

class CustomPrinter(val printer: Printer) : Printer by printer {

    override val message: String = "CustomPrinter message"

    override fun reprint() {
        println("CustomPrinter reprint")
    }

}

fun main() {
    val printer = CustomPrinter(DefaultPrinter())
    printer.print() //DefaultPrinter message
    printer.reprint() //CustomPrinter reprint
}
```

## 2ã€å±æ€§å§”æ‰˜

kotlin æ”¯æŒé€šè¿‡å§”æ‰˜å±æ€§å°†å¯¹ä¸€ä¸ªå±æ€§çš„è®¿é—®æ“ä½œå§”æ‰˜ç»™å¦å¤–ä¸€ä¸ªå¯¹è±¡æ¥å®Œæˆï¼Œå¯¹åº”çš„è¯­æ³•æ ¼å¼æ˜¯ï¼š

```kotlin
val/var <å±æ€§å>: <ç±»å‹> by <è¡¨è¾¾å¼>
```

**å±æ€§çš„å§”æ‰˜**ä¸å¿…å®ç°ä»»ä½•çš„æ¥å£ï¼Œä½†éœ€è¦æä¾›ä¸€ä¸ª **getValue()** æ–¹æ³•ä¸ **setValue()**ï¼ˆå¯¹äº var å±æ€§ï¼‰ï¼Œå¯¹ä¸€ä¸ªå±æ€§çš„ get å’Œ set æ“ä½œä¼šè¢«å§”æ‰˜ç»™**å±æ€§çš„å§”æ‰˜**çš„è¿™ä¸¤ä¸ªæ–¹æ³•

```kotlin
class Delegate {
    //ç¬¬ä¸€ä¸ªå‚æ•°è¡¨ç¤ºè¢«å§”æ‰˜çš„å¯¹è±¡ã€ç¬¬äºŒä¸ªå‚æ•°è¡¨ç¤ºè¢«å§”æ‰˜å¯¹è±¡è‡ªèº«çš„æè¿°
    operator fun getValue(thisRef: Any?, property: KProperty<*>): String {
    }
	//ç¬¬ä¸€ä¸ªå‚æ•°è¡¨ç¤ºè¢«å§”æ‰˜çš„å¯¹è±¡ã€ç¬¬äºŒä¸ªå‚æ•°è¡¨ç¤ºè¢«å§”æ‰˜å¯¹è±¡è‡ªèº«çš„æè¿°ï¼Œç¬¬ä¸‰ä¸ªå‚æ•°æ˜¯å°†è¦èµ‹äºˆçš„å€¼
    operator fun setValue(thisRef: Any?, property: KProperty<*>, value: String) {
    }
}
```

çœ‹ä»¥ä¸‹çš„å°ä¾‹å­ï¼Œé€šè¿‡è¾“å‡ºå€¼å°±å¯ä»¥çœ‹å‡ºå„ä¸ªæ–¹æ³•çš„è°ƒç”¨æ—¶æœº

```kotlin
package test

import kotlin.reflect.KProperty

class Delegate {

    private var message: String? = null

    operator fun getValue(thisRef: Any?, property: KProperty<*>): String {
        println("${thisRef?.javaClass?.name}, thank you for delegating '${property.name}' to me!")
        return message ?: "null value"
    }

    operator fun setValue(thisRef: Any?, property: KProperty<*>, value: String) {
        println("$value has been assigned to '${property.name}' in ${thisRef?.javaClass?.name}.")
        message = value
    }
}

class Example {
    var strValue: String by Delegate()
}

fun main() {
    val example = Example()
    println(example.strValue)
    example.strValue = "leaveC"
    println(example.strValue)
//    test.Example, thank you for delegating 'strValue' to me!
//    null value
//    leaveC has been assigned to 'strValue' in test.Example.
//    test.Example, thank you for delegating 'strValue' to me!
//    leaveC
}
```

## 3ã€å»¶è¿Ÿå±æ€§

**lazy()** æ˜¯æ¥å—ä¸€ä¸ª lambda å¹¶è¿”å›ä¸€ä¸ª **Lazy < T >** å®ä¾‹çš„å‡½æ•°ï¼Œè¿”å›çš„å®ä¾‹å¯ä»¥ä½œä¸ºå®ç°å»¶è¿Ÿå±æ€§çš„å§”æ‰˜ï¼Œç¬¬ä¸€æ¬¡è°ƒç”¨ **get()** ä¼šæ‰§è¡Œå·²ä¼ é€’ç»™ **lazy()** å‡½æ•°çš„ lambda è¡¨è¾¾å¼å¹¶è®°å½•ç»“æœï¼Œ åç»­è°ƒç”¨ **get()** åªæ˜¯è¿”å›è®°å½•çš„ç»“æœ

```kotlin
class Example {

    val lazyValue1: String by lazy {
        println("lazyValue1 computed!")
        "Hello"
    }

    val lazyValue2: String by lazy(LazyThreadSafetyMode.SYNCHRONIZED) {
        println("lazyValue2 computed!")
        computeLazyValue()
    }

    private fun computeLazyValue() = "leavesC"

}

fun main() {
    val example = Example()
    println(example.lazyValue1) //lazyValue1 computed!     Hello
    println(example.lazyValue1) //Hello
    println(example.lazyValue2) //lazyValue2 computed! leavesC
}
```

é»˜è®¤æƒ…å†µä¸‹ï¼Œå¯¹äº lazy å±æ€§çš„æ±‚å€¼æ˜¯å¸¦åŒæ­¥é”çš„ï¼ˆsynchronizedï¼‰ï¼Œå³å¸¦æœ‰ **LazyThreadSafetyMode.SYNCHRONIZED** å‚æ•°ï¼Œæ­¤æ—¶è¯¥å€¼åªå…è®¸åŒä¸€æ—¶åˆ»åªèƒ½æœ‰ä¸€ä¸ªçº¿ç¨‹å¯¹å…¶è¿›è¡Œåˆå§‹åŒ–ï¼Œå¹¶ä¸”æ‰€æœ‰çº¿ç¨‹ä¼šçœ‹åˆ°ç›¸åŒçš„åˆå§‹åŒ–å€¼ã€‚å¦‚æœåˆå§‹åŒ–å§”æ‰˜çš„åŒæ­¥é”ä¸æ˜¯å¿…éœ€çš„ï¼Œå³å¦‚æœå…è®¸å¤šä¸ªçº¿ç¨‹åŒæ—¶æ‰§è¡Œï¼Œé‚£ä¹ˆå¯ä»¥å°†  **LazyThreadSafetyMode.PUBLICATION**  ä½œä¸ºå‚æ•°ä¼ é€’ç»™ **lazy()** å‡½æ•°ã€‚ è€Œå¦‚æœä½ ç¡®å®šåˆå§‹åŒ–å°†æ€»æ˜¯å‘ç”Ÿåœ¨å•ä¸ªçº¿ç¨‹ï¼Œé‚£ä¹ˆå¯ä»¥ä½¿ç”¨ **LazyThreadSafetyMode.NONE** æ¨¡å¼ï¼Œ æ­¤æ—¶ä¸ä¼šæœ‰ä»»ä½•çº¿ç¨‹å®‰å…¨çš„ä¿è¯ä»¥åŠç›¸å…³çš„èµ„æºå¼€é”€

## 4ã€å¯è§‚å¯Ÿå±æ€§

**Delegates.observable()** æ¥å—ä¸¤ä¸ªå‚æ•°ï¼šåˆå§‹å€¼ä»¥åŠä¿®æ”¹å±æ€§å€¼æ—¶çš„å›è°ƒå‡½æ•°ã€‚å½“ä¸ºå±æ€§èµ‹å€¼åå°±ä¼šè°ƒç”¨è¯¥å›è°ƒå‡½æ•°ï¼Œè¯¥å›è°ƒå‡½æ•°åŒ…å«ä¸‰ä¸ªå‚æ•°ï¼šè¢«èµ‹å€¼çš„å±æ€§ã€æ—§å€¼ä¸æ–°å€¼

```kotlin
fun main() {
    val example = Example()
    example.age = 24 //kProperty.name: age , oldValue: -100 , newValue: 24
    example.age = 27 //kProperty.name: age , oldValue: 24 , newValue: 27
}

class Example {
    var age: Int by Delegates.observable(-100) { kProperty: KProperty<*>, oldValue: Int, newValue: Int ->
        println("kProperty.name: ${kProperty.name} , oldValue: $oldValue , newValue: $newValue")
    }
}
```

å¦‚æœæƒ³è¦æ‹¦æˆªä¸€ä¸ªèµ‹å€¼æ“ä½œå¹¶åˆ¤æ–­æ˜¯å¦è¿›è¡Œå¦å†³ï¼Œå¯ä»¥ä½¿ç”¨ vetoable() å‡½æ•°ï¼Œé€šè¿‡è¿”å›ä¸€ä¸ªå¸ƒå°”å€¼æ¥å†³å®šæ˜¯å¦è¿›è¡Œæ‹¦æˆªï¼Œè¯¥åˆ¤æ–­é€»è¾‘æ˜¯åœ¨å±æ€§è¢«èµ‹æ–°å€¼ç”Ÿæ•ˆä¹‹å‰è¿›è¡Œ

```kotlin
fun main() {
    val example = Example()
    example.age = 24  //kProperty.name: age , oldValue: -100 , newValue: 24
    example.age = -10 //kProperty.name: age , oldValue: 24 , newValue: -10
    example.age = 30  //kProperty.name: age , oldValue: 24 , newValue: 30 (oldValue ä¾ç„¶æ˜¯ 24ï¼Œè¯´æ˜ç¬¬äºŒæ¬¡çš„èµ‹å€¼æ“ä½œè¢«å¦å†³äº†)
}

class Example {
    var age: Int by Delegates.vetoable(-100) { kProperty: KProperty<*>, oldValue: Int, newValue: Int ->
        println("kProperty.name: ${kProperty.name} , oldValue: $oldValue , newValue: $newValue")
        age <= 0 //è¿”å›true åˆ™è¡¨ç¤ºæ‹¦æˆªè¯¥èµ‹å€¼æ“ä½œ
    }
}
```

## 5ã€æŠŠå±æ€§å‚¨å­˜åœ¨æ˜ å°„ä¸­

å¯ä»¥åœ¨ä¸€ä¸ª map æ˜ å°„é‡Œå­˜å‚¨å±æ€§çš„å€¼ï¼Œç„¶åæŠŠå±æ€§çš„å­˜å–æ“ä½œå§”æ‰˜ç»™ map è¿›è¡Œç®¡ç†

```kotlin
fun main() {
    val student = Student(
        mapOf(
            "name" to "leavesCZY",
            "age" to 24
        )
    )
    println(student.name)
    println(student.age)
}

class Student(val map: Map<String, Any?>) {
    val name: String by map
    val age: Int by map
}
```

åœ¨ä¸Šè¿°ç¤ºä¾‹ä¸­ï¼Œå±æ€§ name å’Œ age éƒ½æ˜¯ä¸å¯å˜çš„ï¼ˆvalï¼‰ï¼Œå› æ­¤ map çš„ç±»å‹ä¹Ÿæ˜¯ Map è€Œé MutableMapï¼ˆMutableMap åœ¨èµ‹å€¼åå¯ä»¥ä¿®æ”¹ï¼‰ï¼Œå› æ­¤å¦‚æœä¸ºäº†æ”¯æŒ var å±æ€§ï¼Œå¯ä»¥å°†åªè¯»çš„ Map æ¢æˆ MutableMap

## 6ã€å±€éƒ¨å§”æ‰˜å±æ€§

å¯ä»¥å°†å±€éƒ¨å˜é‡å£°æ˜ä¸ºå§”æ‰˜å±æ€§

```kotlin
class Printer {

    fun print() {
        println("temp.Printer print")
    }

}

fun getPrinter(): Printer {
    println("temp.Printer getPrinter")
    return Printer()
}

//å±€éƒ¨å§”æ‰˜
fun example(getPrinter: () -> Printer) {
    val lPrinter by lazy(getPrinter)
    val valid = true
    if (valid) {
        lPrinter.print()
    }
}

fun main() {
    example { getPrinter() }
    //temp.Printer getPrinter
    //temp.Printer print
}
```

å§”æ‰˜å˜é‡åªä¼šåœ¨ç¬¬ä¸€æ¬¡è®¿é—®æ—¶æ‰ä¼šè¿›è¡Œåˆå§‹åŒ–ï¼Œå› æ­¤å¦‚æœ **valid** ä¸º false çš„è¯ï¼Œ**getPrinter()** æ–¹æ³•å°±ä¸ä¼šè¢«è°ƒç”¨

# äºŒåäº”ã€æ³¨è§£

æ³¨è§£æ˜¯å°†å…ƒæ•°æ®é™„åŠ åˆ°ä»£ç å…ƒç´ ä¸Šçš„ä¸€ç§æ–¹å¼ï¼Œé™„ä»¶çš„å…ƒæ•°æ®å°±å¯ä»¥åœ¨ç¼–è¯‘åçš„ç±»æ–‡ä»¶æˆ–è€…è¿è¡Œæ—¶è¢«ç›¸å…³çš„æºä»£ç å·¥å…·è®¿é—®

æ³¨è§£çš„è¯­æ³•æ ¼å¼å¦‚ä¸‹æ‰€ç¤ºï¼š

```kotlin
annotation class AnnotationName()
```

æ³¨è§£çš„é™„åŠ å±æ€§å¯ä»¥é€šè¿‡ç”¨å…ƒæ³¨è§£æ ‡æ³¨æ³¨è§£ç±»æ¥æŒ‡å®šï¼š

- @Target            æŒ‡å®šè¯¥æ³¨è§£æ ‡æ³¨çš„å…è®¸èŒƒå›´ï¼ˆç±»ã€å‡½æ•°ã€å±æ€§ç­‰ï¼‰
- @Retention         æŒ‡å®šè¯¥æ³¨è§£æ˜¯å¦è¦å­˜å‚¨åœ¨ç¼–è¯‘åçš„ class æ–‡ä»¶ä¸­ï¼Œå¦‚æœè¦ä¿å­˜ï¼Œåˆ™åœ¨è¿è¡Œæ—¶å¯ä»¥é€šè¿‡åå°„æ¥è·å–åˆ°è¯¥æ³¨è§£å€¼
- @Repeatable        æ ‡æ˜å…è®¸åœ¨å•ä¸ªå…ƒç´ ä¸Šå¤šæ¬¡ä½¿ç”¨ç›¸åŒçš„è¯¥æ³¨è§£
- @MustBeDocumented  æŒ‡å®šè¯¥æ³¨è§£æ˜¯å…¬æœ‰ API çš„ä¸€éƒ¨åˆ†ï¼Œå¹¶ä¸”åº”è¯¥åŒ…å«åœ¨ç”Ÿæˆçš„ API æ–‡æ¡£ä¸­æ˜¾ç¤ºçš„ç±»æˆ–æ–¹æ³•çš„ç­¾åä¸­

```kotlin
@Target(AnnotationTarget.FUNCTION, AnnotationTarget.FIELD)
@Retention(AnnotationRetention.RUNTIME)
@Repeatable
@MustBeDocumented
annotation class AnnotationName()
```

æ³¨è§£å¯ä»¥å£°æ˜åŒ…å«æœ‰å‚æ•°çš„æ„é€ å‡½æ•°

```kotlin
annotation class OnClick(val viewId: Long)
```

å…è®¸çš„å‚æ•°ç±»å‹æœ‰ï¼š

- åŸç”Ÿæ•°æ®ç±»å‹ï¼Œå¯¹åº” Java åŸç”Ÿçš„ int ã€longã€char ç­‰
- å­—ç¬¦ä¸²
- class å¯¹è±¡
- æšä¸¾
- å…¶ä»–æ³¨è§£
- ä»¥ä¸Šç±»å‹çš„æ•°ç»„

æ³¨è§£å‚æ•°ä¸èƒ½åŒ…å«æœ‰å¯ç©ºç±»å‹ï¼Œå› ä¸º JVM ä¸æ”¯æŒå°† null ä½œä¸ºæ³¨è§£å±æ€§çš„å€¼æ¥å­˜å‚¨

çœ‹ä¸€ä¸ªåœ¨è¿è¡Œæ—¶è·å–æ³¨è§£å€¼çš„ä¾‹å­

```kotlin
@Target(AnnotationTarget.FUNCTION, AnnotationTarget.FIELD)
@Retention(AnnotationRetention.RUNTIME)
annotation class OnClick(val viewId: Long)

class AnnotationsTest {

    @OnClick(200300)
    fun onClickButton() {
        println("Clicked")
    }

}

fun main() {
    val annotationsTest = AnnotationsTest()
    for (method in annotationsTest.javaClass.methods) {
        for (annotation in method.annotations) {
            if (annotation is OnClick) {
                println("method name: " + method.name)  //method name: onClickButton
                println("OnClick viewId: " + annotation.viewId)  //OnClick viewId: 200300
            }
        }
    }
}
```